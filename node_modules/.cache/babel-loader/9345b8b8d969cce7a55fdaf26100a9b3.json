{"ast":null,"code":"import _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _uniqueId from \"lodash/uniqueId\";\nimport _property from \"lodash/property\";\nimport _groupBy from \"lodash/groupBy\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/student/PathwayInfoContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport useGlobalStore from 'store/GlobalStore';\nimport axiosInstance from 'services/AxiosInstance';\nimport { TitleDivider } from 'components/shared';\nimport { InfoCard, InfoLayout } from 'components/student';\nimport 'assets/scss/responsive-carousel-override.scss';\n\nconst _default = function _default(props) {\n  const params = props.match.params,\n        session = props.session;\n\n  const _useGlobalStore = useGlobalStore(),\n        offerStore = _useGlobalStore.offer,\n        datafield = _useGlobalStore.datafield,\n        pathwayStore = _useGlobalStore.pathway;\n\n  const pathwayId = Number(params.id);\n\n  const groupedDataFields = _groupBy(datafield.entities, _property('type'));\n\n  const getOffer = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (offerId) {\n      const _yield$axiosInstance$ = yield axiosInstance.get(`/offers/${offerId}?scope=with_details`),\n            data = _yield$axiosInstance$.data;\n\n      offerStore.addOne(data);\n    });\n\n    return function getOffer(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const getPathway = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      const _yield$axiosInstance$2 = yield axiosInstance.get(`/pathways/${pathwayId}?scope=with_details`),\n            data = _yield$axiosInstance$2.data;\n\n      if (!pathwayStore.entities[pathwayId]) {\n        pathwayStore.addOne(data);\n      }\n    });\n\n    return function getPathway() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(() => {\n    getPathway();\n  }, []);\n  const pathway = pathwayStore.entities[pathwayId];\n\n  if (!pathway) {\n    return null;\n  }\n\n  let groupsOfOffers = {};\n  let groupKeys = [];\n\n  if (pathway && pathway.GroupsOfOffers) {\n    groupsOfOffers = _groupBy(pathway.GroupsOfOffers, 'group_name');\n    groupKeys = Object.keys(groupsOfOffers);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InfoLayout, {\n    title: pathway && pathway.name ? pathway.name : '---',\n    data: pathway,\n    groupedDataFields: groupedDataFields,\n    type: \"pathway\",\n    session: session,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, groupKeys.length && /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'GROUPS OF OFFERS',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }) || null, groupKeys.length && groupKeys.map((key, index) => {\n    const group = groupsOfOffers[key];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: _uniqueId('div_'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TitleDivider, {\n      title: key,\n      align: \"center\",\n      classNames: {\n        middleSpan: 'text-base bg-teal-600 px-2 rounded text-white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }), group.map(g => {\n      if (!g) {\n        return null;\n      }\n\n      let p = null;\n      const offer = offerStore.entities[g.offer_id];\n\n      if (!offer) {\n        getOffer(g.offer_id);\n      }\n\n      if (offer && offer.provider_id) {\n        p = offer.Provider;\n      }\n\n      return /*#__PURE__*/React.createElement(Link, {\n        key: _uniqueId('card_'),\n        to: offer && offer.id ? `/home/offer/${offer.id}` : '/',\n        disabled: offer && offer.id ? false : true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InfoCard, {\n        className: \"mb-4\",\n        data: offer,\n        provider: p,\n        groupedDataFields: groupedDataFields,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }\n      }));\n    }));\n  }) || null)));\n};\n\n__signature__(_default, \"useGlobalStore{{\\r\\n    offer: offerStore,\\r\\n    datafield,\\r\\n    pathway: pathwayStore,\\r\\n  }}\\nuseEffect{}\", () => [useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/student/PathwayInfoContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/student/PathwayInfoContainer.js"],"names":["React","useEffect","Link","useGlobalStore","axiosInstance","TitleDivider","InfoCard","InfoLayout","props","params","match","session","offerStore","offer","datafield","pathwayStore","pathway","pathwayId","Number","id","groupedDataFields","entities","getOffer","offerId","get","data","addOne","getPathway","groupsOfOffers","groupKeys","GroupsOfOffers","Object","keys","name","maxWidth","length","middleSpan","map","key","index","group","g","p","offer_id","provider_id","Provider"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { groupBy, property, uniqueId } from 'lodash';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport { TitleDivider } from 'components/shared';\r\nimport { InfoCard, InfoLayout } from 'components/student';\r\nimport 'assets/scss/responsive-carousel-override.scss';\r\n\r\nexport default function (props) {\r\n  const {\r\n    match: { params },\r\n    session,\r\n  } = props;\r\n  const {\r\n    offer: offerStore,\r\n    datafield,\r\n    pathway: pathwayStore,\r\n  } = useGlobalStore();\r\n\r\n  const pathwayId = Number(params.id);\r\n  const groupedDataFields = groupBy(datafield.entities, property('type'));\r\n\r\n  const getOffer = async (offerId) => {\r\n    const { data } = await axiosInstance.get(\r\n      `/offers/${offerId}?scope=with_details`\r\n    );\r\n    offerStore.addOne(data);\r\n  };\r\n\r\n  const getPathway = async () => {\r\n    const { data } = await axiosInstance.get(\r\n      `/pathways/${pathwayId}?scope=with_details`\r\n    );\r\n    if (!pathwayStore.entities[pathwayId]) {\r\n      pathwayStore.addOne(data);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getPathway();\r\n  }, []);\r\n\r\n  const pathway = pathwayStore.entities[pathwayId];\r\n\r\n  if (!pathway) {\r\n    return null;\r\n  }\r\n\r\n  let groupsOfOffers = {};\r\n  let groupKeys = [];\r\n\r\n  if (pathway && pathway.GroupsOfOffers) {\r\n    groupsOfOffers = groupBy(pathway.GroupsOfOffers, 'group_name');\r\n    groupKeys = Object.keys(groupsOfOffers);\r\n  }\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      <InfoLayout\r\n        title={pathway && pathway.name ? pathway.name : '---'}\r\n        data={pathway}\r\n        groupedDataFields={groupedDataFields}\r\n        type=\"pathway\"\r\n        session={session}\r\n      >\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(groupKeys.length && (\r\n            <TitleDivider\r\n              title={'GROUPS OF OFFERS'}\r\n              align=\"center\"\r\n              classNames={{ middleSpan: 'text-base' }}\r\n            />\r\n          )) ||\r\n            null}\r\n          {(groupKeys.length &&\r\n            groupKeys.map((key, index) => {\r\n              const group = groupsOfOffers[key];\r\n              return (\r\n                <div key={uniqueId('div_')}>\r\n                  <TitleDivider\r\n                    title={key}\r\n                    align=\"center\"\r\n                    classNames={{\r\n                      middleSpan:\r\n                        'text-base bg-teal-600 px-2 rounded text-white',\r\n                    }}\r\n                  />\r\n                  {group.map((g) => {\r\n                    if (!g) {\r\n                      return null;\r\n                    }\r\n                    let p = null;\r\n                    const offer = offerStore.entities[g.offer_id];\r\n                    if (!offer) {\r\n                      getOffer(g.offer_id);\r\n                    }\r\n                    if (offer && offer.provider_id) {\r\n                      p = offer.Provider;\r\n                    }\r\n                    return (\r\n                      <Link\r\n                        key={uniqueId('card_')}\r\n                        to={offer && offer.id ? `/home/offer/${offer.id}` : '/'}\r\n                        disabled={offer && offer.id ? false : true}\r\n                      >\r\n                        <InfoCard\r\n                          className=\"mb-4\"\r\n                          data={offer}\r\n                          provider={p}\r\n                          groupedDataFields={groupedDataFields}\r\n                        />\r\n                      </Link>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })) ||\r\n            null}\r\n        </section>\r\n      </InfoLayout>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}