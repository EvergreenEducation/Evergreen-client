{"ast":null,"code":"import _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar importedWrapper = require('react-imported-component/wrapper');\n\nimport { imported } from \"react-imported-component\";\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useState, useEffect } from 'react';\nimport AuthService from 'services/AuthService';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport { Layout } from 'antd';\nimport axiosInstance from 'services/AxiosInstance';\nimport Sidebar from 'components/Sidebar';\nimport PrivateRoute from 'services/PrivateRoute';\nimport 'assets/scss/antd-overrides.scss';\nconst ProviderContainer = imported(() => importedWrapper(\"imported_-165a74u_component\", import('components/provider/ProviderContainer')));\nconst ProviderSimpleUpdateContainer = imported(() => importedWrapper(\"imported_-1n9knlh_component\", import('components/provider/ProviderSimpleUpdateContainer')));\nconst ProviderUpdateContainer = imported(() => importedWrapper(\"imported_-1k7m31u_component\", import('components/provider/ProviderUpdateContainer')));\nconst OfferContainer = imported(() => importedWrapper(\"imported_-6pjk6i_component\", import('components/offer/OfferContainer')));\nconst EnrollmentContainer = imported(() => importedWrapper(\"imported_-1so594r_component\", import('components/enrollment/EnrollmentContainer')));\nconst PathwayContainer = imported(() => importedWrapper(\"imported_-1qa5251_component\", import('components/pathway/PathwayContainer')));\nconst DataFieldContainer = imported(() => importedWrapper(\"imported_-18ek2ka_component\", import('components/datafield/DataFieldContainer')));\nconst PromotionContainer = imported(() => importedWrapper(\"imported_3dgmo8_component\", import('components/promotion/PromotionContainer')));\n\nfunction DashboardScreen(props) {\n  let match = props.match;\n  const basePath = match.url;\n  const myProviderId = AuthService.currentSession.provider_id;\n  const role = AuthService.currentSession.role;\n\n  const _useState = useState({\n    providerUpdateModal: false,\n    providerSimpleUpdateModal: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        modalStates = _useState2[0],\n        setModalStates = _useState2[1];\n\n  useEffect(() => {\n    if (role === 'provider') {\n      // only check if login user is a provider\n      getProviderInfo(myProviderId);\n    }\n  }, [myProviderId]);\n\n  const openProviderUpdateModal = () => {\n    setModalStates({\n      providerUpdateModal: true,\n      providerSimpleUpdateModal: false\n    });\n  };\n\n  function getProviderInfo(_x) {\n    return _getProviderInfo.apply(this, arguments);\n  }\n\n  function _getProviderInfo() {\n    _getProviderInfo = _asyncToGenerator(function* (providerId) {\n      const _yield$axiosInstance = yield axiosInstance(`/providers/${providerId}`),\n            data = _yield$axiosInstance.data;\n\n      if (data && !data.name) {\n        const modalDelay = setTimeout(() => {\n          setModalStates(_objectSpread(_objectSpread({}, modalStates), {}, {\n            providerSimpleUpdateModal: true\n          }));\n        }, 150);\n        return () => clearTimeout(modalDelay);\n      }\n    });\n    return _getProviderInfo.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Layout, {\n    className: \"w-full flex flex-row bg-gray-300 min-h-full overflow-y-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, Object.assign({}, props, {\n    role: role,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-min-full w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: role === 'admin' ? basePath : `${basePath}/:id`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, role === 'admin' ? /*#__PURE__*/React.createElement(Redirect, {\n    to: `${basePath}/providers`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: `${basePath}/offers`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: `${basePath}/providers`,\n    restrictToRole: \"admin\",\n    role: role,\n    component: () => /*#__PURE__*/React.createElement(ProviderContainer, {\n      role: role,\n      basePath: basePath,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: `${basePath}/offers`,\n    component: () => /*#__PURE__*/React.createElement(OfferContainer, {\n      openProviderUpdateModal: openProviderUpdateModal,\n      role: role,\n      basePath: basePath,\n      providerId: myProviderId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: `${basePath}/enrollments`,\n    component: () => /*#__PURE__*/React.createElement(EnrollmentContainer, {\n      openProviderUpdateModal: openProviderUpdateModal,\n      role: role,\n      providerId: myProviderId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: `${basePath}/pathways`,\n    component: () => /*#__PURE__*/React.createElement(PathwayContainer, {\n      openProviderUpdateModal: openProviderUpdateModal,\n      role: role,\n      providerId: myProviderId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: `${basePath}/promotions`,\n    component: () => /*#__PURE__*/React.createElement(PromotionContainer, {\n      role: role,\n      providerId: myProviderId,\n      session: AuthService.currentSession,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: `${basePath}/settings`,\n    component: () => /*#__PURE__*/React.createElement(DataFieldContainer, {\n      role: role,\n      openProviderUpdateModal: openProviderUpdateModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }))), role === 'provider' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProviderUpdateContainer, {\n    provider_id: myProviderId,\n    visible: modalStates.providerUpdateModal,\n    onCancel: () => setModalStates({\n      providerUpdateModal: false,\n      providerSimpleUpdateModal: false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ProviderSimpleUpdateContainer, {\n    provider_id: myProviderId,\n    visible: modalStates.providerSimpleUpdateModal,\n    onCancel: () => setModalStates(_objectSpread(_objectSpread({}, modalStates), {}, {\n      providerSimpleUpdateModal: false\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  })));\n}\n\n__signature__(DashboardScreen, \"useState{[modalStates, setModalStates]({\\r\\n    providerUpdateModal: false,\\r\\n    providerSimpleUpdateModal: false,\\r\\n  })}\\nuseEffect{}\");\n\nconst _default = withRouter(DashboardScreen);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ProviderContainer, \"ProviderContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(ProviderSimpleUpdateContainer, \"ProviderSimpleUpdateContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(ProviderUpdateContainer, \"ProviderUpdateContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(OfferContainer, \"OfferContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(EnrollmentContainer, \"EnrollmentContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(PathwayContainer, \"PathwayContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(DataFieldContainer, \"DataFieldContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(PromotionContainer, \"PromotionContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(DashboardScreen, \"DashboardScreen\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/screens/DashboardScreen.js"],"names":["React","useState","useEffect","AuthService","withRouter","Redirect","Layout","axiosInstance","Sidebar","PrivateRoute","ProviderContainer","imported","ProviderSimpleUpdateContainer","ProviderUpdateContainer","OfferContainer","EnrollmentContainer","PathwayContainer","DataFieldContainer","PromotionContainer","DashboardScreen","props","match","basePath","url","myProviderId","currentSession","provider_id","role","providerUpdateModal","providerSimpleUpdateModal","modalStates","setModalStates","getProviderInfo","openProviderUpdateModal","providerId","data","name","modalDelay","setTimeout","clearTimeout"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport AuthService from 'services/AuthService';\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\nimport { imported } from 'react-imported-component/macro';\r\nimport { Layout } from 'antd';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport Sidebar from 'components/Sidebar';\r\nimport PrivateRoute from 'services/PrivateRoute';\r\nimport 'assets/scss/antd-overrides.scss';\r\n\r\nconst ProviderContainer = imported(() =>\r\n  import('components/provider/ProviderContainer')\r\n);\r\n\r\nconst ProviderSimpleUpdateContainer = imported(() =>\r\n  import('components/provider/ProviderSimpleUpdateContainer')\r\n);\r\n\r\nconst ProviderUpdateContainer = imported(() =>\r\n  import('components/provider/ProviderUpdateContainer')\r\n);\r\n\r\nconst OfferContainer = imported(() =>\r\n  import('components/offer/OfferContainer')\r\n);\r\n\r\nconst EnrollmentContainer = imported(() =>\r\n  import('components/enrollment/EnrollmentContainer')\r\n);\r\n\r\nconst PathwayContainer = imported(() =>\r\n  import('components/pathway/PathwayContainer')\r\n);\r\n\r\nconst DataFieldContainer = imported(() =>\r\n  import('components/datafield/DataFieldContainer')\r\n);\r\n\r\nconst PromotionContainer = imported(() =>\r\n  import('components/promotion/PromotionContainer')\r\n);\r\n\r\nfunction DashboardScreen(props) {\r\n  let { match } = props;\r\n  const { url: basePath } = match;\r\n\r\n  const myProviderId = AuthService.currentSession.provider_id;\r\n  const role = AuthService.currentSession.role;\r\n  const [modalStates, setModalStates] = useState({\r\n    providerUpdateModal: false,\r\n    providerSimpleUpdateModal: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (role === 'provider') {\r\n      // only check if login user is a provider\r\n      getProviderInfo(myProviderId);\r\n    }\r\n  }, [myProviderId]);\r\n\r\n  const openProviderUpdateModal = () => {\r\n    setModalStates({\r\n      providerUpdateModal: true,\r\n      providerSimpleUpdateModal: false,\r\n    });\r\n  };\r\n\r\n  async function getProviderInfo(providerId) {\r\n    const { data } = await axiosInstance(`/providers/${providerId}`);\r\n    if (data && !data.name) {\r\n      const modalDelay = setTimeout(() => {\r\n        setModalStates({ ...modalStates, providerSimpleUpdateModal: true });\r\n      }, 150);\r\n      return () => clearTimeout(modalDelay);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Layout className=\"w-full flex flex-row bg-gray-300 min-h-full overflow-y-auto\">\r\n        <Sidebar {...props} role={role} />\r\n        <div className=\"h-min-full w-full\">\r\n          <PrivateRoute\r\n            exact\r\n            path={role === 'admin' ? basePath : `${basePath}/:id`}\r\n          >\r\n            {role === 'admin' ? (\r\n              <Redirect to={`${basePath}/providers`} />\r\n            ) : (\r\n              <Redirect to={`${basePath}/offers`} />\r\n            )}\r\n          </PrivateRoute>\r\n          <PrivateRoute\r\n            path={`${basePath}/providers`}\r\n            restrictToRole=\"admin\"\r\n            role={role}\r\n            component={() => (\r\n              <ProviderContainer role={role} basePath={basePath} />\r\n            )}\r\n          />\r\n          <PrivateRoute\r\n            path={`${basePath}/offers`}\r\n            component={() => (\r\n              <OfferContainer\r\n                openProviderUpdateModal={openProviderUpdateModal}\r\n                role={role}\r\n                basePath={basePath}\r\n                providerId={myProviderId}\r\n              />\r\n            )}\r\n          />\r\n          <PrivateRoute\r\n            path={`${basePath}/enrollments`}\r\n            component={() => (\r\n              <EnrollmentContainer\r\n                openProviderUpdateModal={openProviderUpdateModal}\r\n                role={role}\r\n                providerId={myProviderId}\r\n              />\r\n            )}\r\n          />\r\n          <PrivateRoute\r\n            path={`${basePath}/pathways`}\r\n            component={() => (\r\n              <PathwayContainer\r\n                openProviderUpdateModal={openProviderUpdateModal}\r\n                role={role}\r\n                providerId={myProviderId}\r\n              />\r\n            )}\r\n          />\r\n          <PrivateRoute\r\n            path={`${basePath}/promotions`}\r\n            component={() => (\r\n              <PromotionContainer\r\n                role={role}\r\n                providerId={myProviderId}\r\n                session={AuthService.currentSession}\r\n              />\r\n            )}\r\n          />\r\n          <PrivateRoute\r\n            path={`${basePath}/settings`}\r\n            component={() => (\r\n              <DataFieldContainer\r\n                role={role}\r\n                openProviderUpdateModal={openProviderUpdateModal}\r\n              />\r\n            )}\r\n          />\r\n        </div>\r\n      </Layout>\r\n      {role === 'provider' && (\r\n        <>\r\n          <ProviderUpdateContainer\r\n            provider_id={myProviderId}\r\n            visible={modalStates.providerUpdateModal}\r\n            onCancel={() =>\r\n              setModalStates({\r\n                providerUpdateModal: false,\r\n                providerSimpleUpdateModal: false,\r\n              })\r\n            }\r\n          />\r\n          <ProviderSimpleUpdateContainer\r\n            provider_id={myProviderId}\r\n            visible={modalStates.providerSimpleUpdateModal}\r\n            onCancel={() =>\r\n              setModalStates({\r\n                ...modalStates,\r\n                providerSimpleUpdateModal: false,\r\n              })\r\n            }\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withRouter(DashboardScreen);\r\n"]},"metadata":{},"sourceType":"module"}