{"ast":null,"code":"import _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _uniqueId from \"lodash/uniqueId\";\nimport _property from \"lodash/property\";\nimport _groupBy from \"lodash/groupBy\";\nimport _last from \"lodash/last\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport useGlobalStore from 'store/GlobalStore';\nimport axiosInstance from 'services/AxiosInstance';\nimport { TitleDivider } from 'components/shared';\nimport { InfoCard, InfoLayout } from 'components/student';\nimport { Carousel } from 'react-responsive-carousel';\nimport 'assets/scss/responsive-carousel-override.scss';\nconst centerSlidePercentage = 90;\n\nconst _default = function _default(props) {\n  const session = props.session,\n        getOffers = props.getOffers;\n\n  let _useParams = useParams(),\n      offerId = _useParams.id;\n\n  const _useGlobalStore = useGlobalStore(),\n        datafield = _useGlobalStore.datafield,\n        offerStore = _useGlobalStore.offer;\n\n  useEffect(() => {\n    const getOffer = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* () {\n        const _yield$axiosInstance$ = yield axiosInstance.get(`/offers/${offerId}?scope=with_details`),\n              data = _yield$axiosInstance$.data;\n\n        if (!offerStore.entities[offerId]) {\n          offerStore.addOne(data);\n        }\n      });\n\n      return function getOffer() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getOffer();\n  }, []);\n  let offer = offerStore.entities[offerId];\n\n  if (!offer) {\n    return null;\n  }\n\n  const groupedDataFields = _groupBy(Object.values(datafield.entities), _property('type'));\n\n  let imageSrc = null;\n  let provider = offer.Provider;\n  let alt = '';\n\n  if (offer && offer.Files && offer.Files.length) {\n    const _last2 = _last(offer.Files),\n          file_link = _last2.file_link,\n          location = _last2.location;\n\n    imageSrc = file_link;\n    alt = location;\n  }\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        activeGenericOffer = _useState2[0],\n        setActiveGenericOffer = _useState2[1]; // find generic offer of child\n\n\n  function findChildGenericOfferID() {\n    // console.log('findChildGenericOfferID', getOffers)\n    let genericOfferDetail = {};\n\n    if (getOffers) {\n      for (let i = 0; i < getOffers.length; i++) {\n        if (getOffers[i].id === Number(offerId)) {\n          if (getOffers[i].generic_type) {\n            genericOfferDetail.is_parent = false;\n            genericOfferDetail.generic_type = getOffers[i].generic_type;\n            return genericOfferDetail;\n          } else {\n            genericOfferDetail.is_parent = true;\n            genericOfferDetail.generic_type = null;\n            return genericOfferDetail;\n          }\n        }\n      }\n    } else {\n      return false;\n    }\n  } // filter generic offer data\n\n\n  function filterGenericOfferData(id) {\n    if (getOffers) {\n      let activeGenericOfer = getOffers.filter(x => {\n        if (x.id === id) {\n          return x;\n        }\n      });\n      return activeGenericOfer;\n    }\n  } // get all child generic data\n\n\n  const allChildGenericData = () => {\n    if (getOffers) {\n      let activeGenericOfer = getOffers.filter(x => {\n        if (x.generic_type) {\n          if (Number(x.generic_type) === Number(offerId)) {\n            return x;\n          }\n        }\n      }); // console.log('allChildGenericData', activeGenericOfer)\n\n      return activeGenericOfer;\n    }\n  }; // get generic offer data from offer api data\n\n\n  function getGenericOfferData() {\n    let genericOfferId = findChildGenericOfferID(),\n        activeGenericOfferData = genericOfferId ? genericOfferId.is_parent ? allChildGenericData() : filterGenericOfferData(Number(genericOfferId.generic_type)) : '';\n    console.log('activeGenericOfferData', activeGenericOfferData);\n\n    if (activeGenericOfferData) {\n      setActiveGenericOffer(activeGenericOfferData);\n    }\n  }\n\n  useEffect(() => {\n    getGenericOfferData();\n  }, []);\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        checkEnroll = _useState4[0],\n        setCheckEnroll = _useState4[1];\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InfoLayout, {\n    data: offer,\n    src: imageSrc,\n    alt: alt,\n    session: session,\n    groupedDataFields: groupedDataFields,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, offer && offer.RelatedOffers && offer.RelatedOffers.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'RELATED OFFERS',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: offer.RelatedOffers.length === 1 ? 100 : centerSlidePercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showThumbs: false,\n    showStatus: false,\n    swipeScrollTolerance: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, offer.RelatedOffers.map((o, index) => {\n    return /*#__PURE__*/React.createElement(Link, {\n      key: _uniqueId('related_card_'),\n      to: o && o.id ? `/home/offer/${o.id}` : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(InfoCard, {\n      data: o,\n      provider: provider,\n      groupedDataFields: groupedDataFields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 23\n      }\n    }));\n  }))) || null), /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, activeGenericOffer.length && /*#__PURE__*/React.createElement(React.Fragment, null, console.log(\"checkEnroll\", checkEnroll), /*#__PURE__*/React.createElement(TitleDivider, {\n    title: activeGenericOffer && activeGenericOffer.length && activeGenericOffer[0].is_generic ? 'GENERIC OFFERS' : 'OFFERS',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: activeGenericOffer.length === 1 ? 100 : centerSlidePercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showThumbs: false,\n    showStatus: false,\n    swipeScrollTolerance: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, activeGenericOffer.map((o, index) => {\n    console.log('activeGenericOffer..', o);\n    return /*#__PURE__*/React.createElement(Link, {\n      key: _uniqueId('related_card_'),\n      to: o && o.id ? `/home/offer/${o.id}` : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(InfoCard, {\n      data: o,\n      provider: provider,\n      groupedDataFields: groupedDataFields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }));\n  }))) || null), /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, offer && offer.PrerequisiteOffers && offer.PrerequisiteOffers.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'PREREQUISITES',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-4 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: offer.PrerequisiteOffers.length === 1 ? 100 : centerSlidePercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showThumbs: false,\n    showStatus: false,\n    swipeScrollTolerance: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, offer.PrerequisiteOffers.map((o, index) => {\n    return /*#__PURE__*/React.createElement(Link, {\n      key: _uniqueId('prereq_card_'),\n      to: o && o.id ? `/home/offer/${o.id}` : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(InfoCard, {\n      data: o,\n      provider: provider,\n      groupedDataFields: groupedDataFields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 25\n      }\n    }));\n  }))) || null)));\n};\n\n__signature__(_default, \"useParams{{ id: offerId }}\\nuseGlobalStore{{ datafield, offer: offerStore }}\\nuseEffect{}\\nuseState{[activeGenericOffer, setActiveGenericOffer]([])}\\nuseEffect{}\\nuseState{[checkEnroll,setCheckEnroll]({})}\", () => [useParams, useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(centerSlidePercentage, \"centerSlidePercentage\", \"/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js"],"names":["React","useEffect","useState","Link","useParams","useGlobalStore","axiosInstance","TitleDivider","InfoCard","InfoLayout","Carousel","centerSlidePercentage","props","session","getOffers","offerId","id","datafield","offerStore","offer","getOffer","get","data","entities","addOne","groupedDataFields","Object","values","imageSrc","provider","Provider","alt","Files","length","file_link","location","activeGenericOffer","setActiveGenericOffer","findChildGenericOfferID","genericOfferDetail","i","Number","generic_type","is_parent","filterGenericOfferData","activeGenericOfer","filter","x","allChildGenericData","getGenericOfferData","genericOfferId","activeGenericOfferData","console","log","checkEnroll","setCheckEnroll","maxWidth","RelatedOffers","middleSpan","map","o","index","is_generic","PrerequisiteOffers"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { last, groupBy, property, uniqueId } from 'lodash';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport { TitleDivider } from 'components/shared';\r\nimport { InfoCard, InfoLayout } from 'components/student';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport 'assets/scss/responsive-carousel-override.scss';\r\n\r\nconst centerSlidePercentage = 90;\r\n\r\nexport default function (props) {\r\n  const { session, getOffers } = props;\r\n  let { id: offerId } = useParams();\r\n  const { datafield, offer: offerStore } = useGlobalStore();\r\n  useEffect(() => {\r\n    const getOffer = async () => {\r\n      const { data } = await axiosInstance.get(\r\n        `/offers/${offerId}?scope=with_details`\r\n      );\r\n      if (!offerStore.entities[offerId]) {\r\n        offerStore.addOne(data);\r\n      }\r\n    };\r\n    getOffer();\r\n  }, []);\r\n\r\n  let offer = offerStore.entities[offerId];\r\n\r\n  if (!offer) {\r\n    return null;\r\n  }\r\n\r\n  const groupedDataFields = groupBy(\r\n    Object.values(datafield.entities),\r\n    property('type')\r\n  );\r\n\r\n  let imageSrc = null;\r\n  let provider = offer.Provider;\r\n  let alt = '';\r\n\r\n  if (offer && offer.Files && offer.Files.length) {\r\n    const { file_link, location } = last(offer.Files);\r\n    imageSrc = file_link;\r\n    alt = location;\r\n  }\r\n\r\n  const [activeGenericOffer, setActiveGenericOffer] = useState([]);\r\n\r\n  // find generic offer of child\r\n  function findChildGenericOfferID() {\r\n    // console.log('findChildGenericOfferID', getOffers)\r\n    let genericOfferDetail = {};\r\n    if (getOffers) {\r\n      for (let i = 0; i < getOffers.length; i++) {\r\n        if (getOffers[i].id === Number(offerId)) {\r\n          if (getOffers[i].generic_type) {\r\n            genericOfferDetail.is_parent = false;\r\n            genericOfferDetail.generic_type = getOffers[i].generic_type;\r\n            return genericOfferDetail\r\n          } else {\r\n            genericOfferDetail.is_parent = true;\r\n            genericOfferDetail.generic_type = null;\r\n            return genericOfferDetail\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  // filter generic offer data\r\n  function filterGenericOfferData(id) {\r\n    if (getOffers) {\r\n      let activeGenericOfer = getOffers.filter(x => {\r\n        if (x.id === id) {\r\n          return x\r\n        }\r\n      });\r\n      return activeGenericOfer;\r\n    }\r\n  }\r\n\r\n  // get all child generic data\r\n  const allChildGenericData = () => {\r\n    if (getOffers) {\r\n      let activeGenericOfer = getOffers.filter(x => {\r\n        if (x.generic_type) {\r\n          if (Number(x.generic_type) === Number(offerId)) {\r\n            return x\r\n          }\r\n        }\r\n      });\r\n      // console.log('allChildGenericData', activeGenericOfer)\r\n      return activeGenericOfer;\r\n    }\r\n  }\r\n\r\n  // get generic offer data from offer api data\r\n  function getGenericOfferData() {\r\n    let genericOfferId = findChildGenericOfferID(),\r\n      activeGenericOfferData = genericOfferId ? genericOfferId.is_parent ? allChildGenericData() : filterGenericOfferData(Number(genericOfferId.generic_type)) : '';\r\n    console.log('activeGenericOfferData', activeGenericOfferData)\r\n    if (activeGenericOfferData) {\r\n      setActiveGenericOffer(activeGenericOfferData)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getGenericOfferData()\r\n  }, []);\r\n\r\n  const [checkEnroll,setCheckEnroll]=useState({})\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      <InfoLayout\r\n        data={offer}\r\n        src={imageSrc}\r\n        alt={alt}\r\n        session={session}\r\n        groupedDataFields={groupedDataFields}>\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(offer && offer.RelatedOffers && offer.RelatedOffers.length && (\r\n            <>\r\n              <TitleDivider\r\n                title={'RELATED OFFERS'}\r\n                align=\"center\"\r\n                classNames={{ middleSpan: 'text-base' }} />\r\n              <Carousel\r\n                className=\"custom-carousel mb-2 cursor-grab\"\r\n                centerMode\r\n                infiniteLoop\r\n                centerSlidePercentage={offer.RelatedOffers.length === 1 ? 100 : centerSlidePercentage}\r\n                showArrows={true}\r\n                showIndicators={false}\r\n                swipeable={true}\r\n                emulateTouch={true}\r\n                showThumbs={false}\r\n                showStatus={false}\r\n                swipeScrollTolerance={10}>\r\n                {offer.RelatedOffers.map((o, index) => {\r\n                  return (\r\n                    <Link\r\n                      key={uniqueId('related_card_')}\r\n                      to={o && o.id ? `/home/offer/${o.id}` : null}>\r\n                      <InfoCard\r\n                        data={o}\r\n                        provider={provider}\r\n                        groupedDataFields={groupedDataFields} />\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </Carousel>\r\n            </>\r\n          )) ||\r\n            null}\r\n        </section>\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(activeGenericOffer.length && (\r\n            <>\r\n            {console.log(\"checkEnroll\",checkEnroll)}\r\n              <TitleDivider\r\n                title={ activeGenericOffer && activeGenericOffer.length && activeGenericOffer[0].is_generic ? 'GENERIC OFFERS' : 'OFFERS'}\r\n                align=\"center\"\r\n                classNames={{ middleSpan: 'text-base' }} />\r\n              <Carousel\r\n                className=\"custom-carousel mb-2 cursor-grab\"\r\n                centerMode\r\n                infiniteLoop\r\n                centerSlidePercentage={activeGenericOffer.length === 1 ? 100 : centerSlidePercentage}\r\n                showArrows={true}\r\n                showIndicators={false}\r\n                swipeable={true}\r\n                emulateTouch={true}\r\n                showThumbs={false}\r\n                showStatus={false}\r\n                swipeScrollTolerance={10}>\r\n                {activeGenericOffer.map((o, index) => {\r\n                  console.log('activeGenericOffer..', o)\r\n                  return (\r\n                    <Link\r\n                      key={uniqueId('related_card_')}\r\n                      to={o && o.id ? `/home/offer/${o.id}` : null}>\r\n                      <InfoCard\r\n                        data={o}\r\n                        provider={provider}\r\n                        groupedDataFields={groupedDataFields} />\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </Carousel>\r\n            </>\r\n          )) ||\r\n            null}\r\n        </section>\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(offer &&\r\n            offer.PrerequisiteOffers &&\r\n            offer.PrerequisiteOffers.length && (\r\n              <>\r\n                <TitleDivider\r\n                  title={'PREREQUISITES'}\r\n                  align=\"center\"\r\n                  classNames={{ middleSpan: 'text-base' }} />\r\n                <Carousel\r\n                  className=\"custom-carousel mb-4 cursor-grab\"\r\n                  centerMode\r\n                  infiniteLoop\r\n                  centerSlidePercentage={offer.PrerequisiteOffers.length === 1 ? 100 : centerSlidePercentage}\r\n                  showArrows={true}\r\n                  showIndicators={false}\r\n                  swipeable={true}\r\n                  emulateTouch={true}\r\n                  showThumbs={false}\r\n                  showStatus={false}\r\n                  swipeScrollTolerance={10}>\r\n                  {offer.PrerequisiteOffers.map((o, index) => {\r\n                    return (\r\n                      <Link\r\n                        key={uniqueId('prereq_card_')}\r\n                        to={o && o.id ? `/home/offer/${o.id}` : null}>\r\n                        <InfoCard\r\n                          data={o}\r\n                          provider={provider}\r\n                          groupedDataFields={groupedDataFields}/>\r\n                      </Link>\r\n                    );\r\n                  })}\r\n                </Carousel>\r\n              </>\r\n            )) ||\r\n            null}\r\n        </section>\r\n      </InfoLayout>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}