{"ast":null,"code":"import _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _uniqueId from \"lodash/uniqueId\";\nimport _property from \"lodash/property\";\nimport _groupBy from \"lodash/groupBy\";\nimport _last from \"lodash/last\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport useGlobalStore from 'store/GlobalStore';\nimport axiosInstance from 'services/AxiosInstance';\nimport { TitleDivider } from 'components/shared';\nimport { InfoCard, InfoLayout } from 'components/student';\nimport { Carousel } from 'react-responsive-carousel';\nimport 'assets/scss/responsive-carousel-override.scss';\nconst centerSlidePercentage = 90;\n\nconst _default = function _default(props) {\n  const session = props.session,\n        getOffers = props.getOffers;\n\n  let _useParams = useParams(),\n      offerId = _useParams.id;\n\n  const _useGlobalStore = useGlobalStore(),\n        datafield = _useGlobalStore.datafield,\n        offerStore = _useGlobalStore.offer;\n\n  useEffect(() => {\n    const getOffer = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* () {\n        const _yield$axiosInstance$ = yield axiosInstance.get(`/offers/${offerId}?scope=with_details`),\n              data = _yield$axiosInstance$.data;\n\n        if (!offerStore.entities[offerId]) {\n          offerStore.addOne(data);\n        }\n      });\n\n      return function getOffer() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getOffer();\n  }, []);\n  let offer = offerStore.entities[offerId];\n\n  if (!offer) {\n    return null;\n  }\n\n  const groupedDataFields = _groupBy(Object.values(datafield.entities), _property('type'));\n\n  let imageSrc = null;\n  let provider = offer.Provider;\n  let alt = '';\n\n  if (offer && offer.Files && offer.Files.length) {\n    const _last2 = _last(offer.Files),\n          file_link = _last2.file_link,\n          location = _last2.location;\n\n    imageSrc = file_link;\n    alt = location;\n  }\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        activeGenericOffer = _useState2[0],\n        setActiveGenericOffer = _useState2[1]; // find generic offer of child\n\n\n  function findChildGenericOfferID() {\n    console.log('findChildGenericOfferID', getOffers);\n    let genericOfferDetail = {};\n\n    if (getOffers) {\n      for (let i = 0; i < getOffers.length; i++) {\n        if (getOffers[i].id === Number(offerId)) {\n          if (getOffers[i].generic_type) {\n            genericOfferDetail.is_parent = false;\n            genericOfferDetail.generic_type = getOffers[i].generic_type;\n            return genericOfferDetail;\n          } else {\n            genericOfferDetail.is_parent = true;\n            genericOfferDetail.generic_type = null;\n            return genericOfferDetail;\n          }\n        }\n      }\n    }\n  } // filter generic offer data\n\n\n  function filterGenericOfferData(id) {\n    if (getOffers) {\n      let activeGenericOfer = getOffers.filter(x => {\n        if (x.id === id) {\n          return x;\n        }\n      });\n      return activeGenericOfer;\n    }\n  } // get all child generic data\n\n\n  const allChildGenericData = () => {\n    if (getOffers) {\n      let activeGenericOfer = getOffers.filter(x => {\n        if (x.generic_type) {\n          if (Number(x.generic_type) === Number(offerId)) {\n            return x;\n          }\n        }\n      });\n      console.log('allChildGenericData', activeGenericOfer);\n      return activeGenericOfer;\n    }\n  }; // \n  // get generic offer data from offer api data\n\n\n  function getGenericOfferData() {\n    let genericOfferId = findChildGenericOfferID(),\n        activeGenericOfferData = genericOfferId.is_parent ? allChildGenericData() : filterGenericOfferData(Number(genericOfferId.generic_type));\n    console.log('activeGenericOfferData', activeGenericOfferData);\n    setActiveGenericOffer(activeGenericOfferData);\n  }\n\n  useEffect(() => {\n    getGenericOfferData();\n  }, []);\n  let checkOfferTitle;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InfoLayout, {\n    data: offer,\n    src: imageSrc,\n    alt: alt,\n    session: session,\n    groupedDataFields: groupedDataFields,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, offer && offer.RelatedOffers && offer.RelatedOffers.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'RELATED OFFERS',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: offer.RelatedOffers.length === 1 ? 100 : centerSlidePercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showThumbs: false,\n    showStatus: false,\n    swipeScrollTolerance: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, offer.RelatedOffers.map((o, index) => {\n    checkOfferTitle = o.is_generic;\n    return /*#__PURE__*/React.createElement(Link, {\n      key: _uniqueId('related_card_'),\n      to: o && o.id ? `/home/offer/${o.id}` : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(InfoCard, {\n      data: o,\n      provider: provider,\n      groupedDataFields: groupedDataFields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 23\n      }\n    }));\n  }))) || null), /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, activeGenericOffer.length && /*#__PURE__*/React.createElement(React.Fragment, null, console.log(\"activeGenericOffer\", checkOfferTitle), /*#__PURE__*/React.createElement(TitleDivider, {\n    title: activeGenericOffer.map(item => item.is_generic) ? 'GENERIC OFFERS' : 'NON GENERIC OFFER',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: activeGenericOffer.length === 1 ? 100 : centerSlidePercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showThumbs: false,\n    showStatus: false,\n    swipeScrollTolerance: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, activeGenericOffer.map((o, index) => {\n    console.log('activeGenericOffer..', o);\n    return /*#__PURE__*/React.createElement(Link, {\n      key: _uniqueId('related_card_'),\n      to: o && o.id ? `/home/offer/${o.id}` : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(InfoCard, {\n      data: o,\n      provider: provider,\n      groupedDataFields: groupedDataFields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 23\n      }\n    }));\n  }))) || null), /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      maxWidth: 896\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, offer && offer.PrerequisiteOffers && offer.PrerequisiteOffers.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'PREREQUISITES',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-4 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: offer.PrerequisiteOffers.length === 1 ? 100 : centerSlidePercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showThumbs: false,\n    showStatus: false,\n    swipeScrollTolerance: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, offer.PrerequisiteOffers.map((o, index) => {\n    return /*#__PURE__*/React.createElement(Link, {\n      key: _uniqueId('prereq_card_'),\n      to: o && o.id ? `/home/offer/${o.id}` : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(InfoCard, {\n      data: o,\n      provider: provider,\n      groupedDataFields: groupedDataFields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 25\n      }\n    }));\n  }))) || null)));\n};\n\n__signature__(_default, \"useParams{{ id: offerId }}\\nuseGlobalStore{{ datafield, offer: offerStore }}\\nuseEffect{}\\nuseState{[activeGenericOffer,setActiveGenericOffer]([])}\\nuseEffect{}\", () => [useParams, useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(centerSlidePercentage, \"centerSlidePercentage\", \"/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/student/OfferInfoContainer.js"],"names":["React","useEffect","useState","Link","useParams","useGlobalStore","axiosInstance","TitleDivider","InfoCard","InfoLayout","Carousel","centerSlidePercentage","props","session","getOffers","offerId","id","datafield","offerStore","offer","getOffer","get","data","entities","addOne","groupedDataFields","Object","values","imageSrc","provider","Provider","alt","Files","length","file_link","location","activeGenericOffer","setActiveGenericOffer","findChildGenericOfferID","console","log","genericOfferDetail","i","Number","generic_type","is_parent","filterGenericOfferData","activeGenericOfer","filter","x","allChildGenericData","getGenericOfferData","genericOfferId","activeGenericOfferData","checkOfferTitle","maxWidth","RelatedOffers","middleSpan","map","o","index","is_generic","item","PrerequisiteOffers"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { last, groupBy, property, uniqueId } from 'lodash';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport { TitleDivider } from 'components/shared';\r\nimport { InfoCard, InfoLayout } from 'components/student';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport 'assets/scss/responsive-carousel-override.scss';\r\n\r\nconst centerSlidePercentage = 90;\r\n\r\nexport default function (props) {\r\n  const { session,getOffers } = props;\r\n  let { id: offerId } = useParams();\r\n  const { datafield, offer: offerStore } = useGlobalStore();\r\n\r\n  useEffect(() => {\r\n    const getOffer = async () => {\r\n      const { data } = await axiosInstance.get(\r\n        `/offers/${offerId}?scope=with_details`\r\n      );\r\n      if (!offerStore.entities[offerId]) {\r\n        offerStore.addOne(data);\r\n      }\r\n    };\r\n    getOffer();\r\n  }, []);\r\n\r\n  let offer = offerStore.entities[offerId];\r\n\r\n  if (!offer) {\r\n    return null;\r\n  }\r\n\r\n  const groupedDataFields = groupBy(\r\n    Object.values(datafield.entities),\r\n    property('type')\r\n  );\r\n\r\n  let imageSrc = null;\r\n  let provider = offer.Provider;\r\n  let alt = '';\r\n\r\n  if (offer && offer.Files && offer.Files.length) {\r\n    const { file_link, location } = last(offer.Files);\r\n    imageSrc = file_link;\r\n    alt = location;\r\n  }\r\n\r\n  const [activeGenericOffer,setActiveGenericOffer]=useState([]);\r\n\r\n  // find generic offer of child\r\n  function findChildGenericOfferID(){\r\n    console.log('findChildGenericOfferID',getOffers)\r\n    let genericOfferDetail={};\r\n    if(getOffers){\r\n      for(let i=0;i<getOffers.length;i++){\r\n        if(getOffers[i].id ===Number(offerId)){\r\n          if(getOffers[i].generic_type){\r\n            genericOfferDetail.is_parent=false;\r\n            genericOfferDetail.generic_type=getOffers[i].generic_type;\r\n            return genericOfferDetail\r\n          }else{\r\n            genericOfferDetail.is_parent=true;\r\n            genericOfferDetail.generic_type=null;\r\n            return genericOfferDetail\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n// filter generic offer data\r\n  function filterGenericOfferData(id){\r\n    if(getOffers){\r\n      let activeGenericOfer=getOffers.filter(x=>{\r\n        if(x.id === id){\r\n          return x\r\n        }\r\n      });\r\n      return activeGenericOfer;\r\n    }\r\n  }\r\n\r\n\r\n  // get all child generic data\r\n  const allChildGenericData = () =>{\r\n    if(getOffers){\r\n      let activeGenericOfer=getOffers.filter(x=>{\r\n        if(x.generic_type){\r\n          if(Number(x.generic_type) === Number(offerId)){\r\n            return x\r\n          }\r\n        }\r\n      });\r\n      console.log('allChildGenericData',activeGenericOfer)\r\n      return activeGenericOfer;\r\n    }\r\n  }\r\n  // \r\n\r\n\r\n\r\n\r\n// get generic offer data from offer api data\r\n  function getGenericOfferData(){\r\n    let genericOfferId=findChildGenericOfferID(),\r\n    activeGenericOfferData=genericOfferId.is_parent? allChildGenericData():filterGenericOfferData(Number(genericOfferId.generic_type));\r\n    console.log('activeGenericOfferData',activeGenericOfferData)\r\n    setActiveGenericOffer(activeGenericOfferData)\r\n\r\n  }\r\n\r\n  useEffect(()=>{\r\n    getGenericOfferData()\r\n  },[]);\r\n\r\n  let checkOfferTitle\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      <InfoLayout\r\n        data={offer}\r\n        src={imageSrc}\r\n        alt={alt}\r\n        session={session}\r\n        groupedDataFields={groupedDataFields}\r\n      >\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(offer && offer.RelatedOffers && offer.RelatedOffers.length && (\r\n            <>\r\n              <TitleDivider\r\n                title={'RELATED OFFERS'}\r\n                align=\"center\"\r\n                classNames={{ middleSpan: 'text-base' }}\r\n              />\r\n              <Carousel\r\n                className=\"custom-carousel mb-2 cursor-grab\"\r\n                centerMode\r\n                infiniteLoop\r\n                centerSlidePercentage={\r\n                  offer.RelatedOffers.length === 1 ? 100 : centerSlidePercentage\r\n                }\r\n                showArrows={true}\r\n                showIndicators={false}\r\n                swipeable={true}\r\n                emulateTouch={true}\r\n                showThumbs={false}\r\n                showStatus={false}\r\n                swipeScrollTolerance={10}\r\n              >\r\n                {offer.RelatedOffers.map((o, index) => {\r\n                  checkOfferTitle = o.is_generic\r\n                  return (\r\n                    <Link\r\n                      key={uniqueId('related_card_')}\r\n                      to={o && o.id ? `/home/offer/${o.id}` : null}\r\n                    >\r\n                      <InfoCard\r\n                        data={o}\r\n                        provider={provider}\r\n                        groupedDataFields={groupedDataFields}\r\n                      />\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </Carousel>\r\n            </>\r\n          )) ||\r\n            null}\r\n        </section>\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(activeGenericOffer.length && (\r\n            <>\r\n            {console.log(\"activeGenericOffer\",checkOfferTitle)}\r\n              <TitleDivider\r\n                title={activeGenericOffer.map(item => item.is_generic) ? 'GENERIC OFFERS' : 'NON GENERIC OFFER'}\r\n                align=\"center\"\r\n                classNames={{ middleSpan: 'text-base' }}\r\n              />\r\n              <Carousel\r\n                className=\"custom-carousel mb-2 cursor-grab\"\r\n                centerMode\r\n                infiniteLoop\r\n                centerSlidePercentage={\r\n                  activeGenericOffer.length === 1 ? 100 : centerSlidePercentage\r\n                }\r\n                showArrows={true}\r\n                showIndicators={false}\r\n                swipeable={true}\r\n                emulateTouch={true}\r\n                showThumbs={false}\r\n                showStatus={false}\r\n                swipeScrollTolerance={10}\r\n              >\r\n                {activeGenericOffer.map((o, index) => {\r\n                  console.log('activeGenericOffer..',o)\r\n                  return (\r\n                    <Link\r\n                      key={uniqueId('related_card_')}\r\n                      to={o && o.id ? `/home/offer/${o.id}` : null}\r\n                    >\r\n                      <InfoCard\r\n                        data={o}\r\n                        provider={provider}\r\n                        groupedDataFields={groupedDataFields}\r\n                      />\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </Carousel>\r\n            </>\r\n          )) ||\r\n            null}\r\n        </section>\r\n        <section style={{ maxWidth: 896 }}>\r\n          {(offer &&\r\n            offer.PrerequisiteOffers &&\r\n            offer.PrerequisiteOffers.length && (\r\n              <>\r\n                <TitleDivider\r\n                  title={'PREREQUISITES'}\r\n                  align=\"center\"\r\n                  classNames={{ middleSpan: 'text-base' }}\r\n                />\r\n                <Carousel\r\n                  className=\"custom-carousel mb-4 cursor-grab\"\r\n                  centerMode\r\n                  infiniteLoop\r\n                  centerSlidePercentage={\r\n                    offer.PrerequisiteOffers.length === 1\r\n                      ? 100\r\n                      : centerSlidePercentage\r\n                  }\r\n                  showArrows={true}\r\n                  showIndicators={false}\r\n                  swipeable={true}\r\n                  emulateTouch={true}\r\n                  showThumbs={false}\r\n                  showStatus={false}\r\n                  swipeScrollTolerance={10}\r\n                >\r\n                  {offer.PrerequisiteOffers.map((o, index) => {\r\n                    return (\r\n                      <Link\r\n                        key={uniqueId('prereq_card_')}\r\n                        to={o && o.id ? `/home/offer/${o.id}` : null}\r\n                      >\r\n                        <InfoCard\r\n                          data={o}\r\n                          provider={provider}\r\n                          groupedDataFields={groupedDataFields}\r\n                        />\r\n                      </Link>\r\n                    );\r\n                  })}\r\n                </Carousel>\r\n              </>\r\n            )) ||\r\n            null}\r\n        </section>\r\n      </InfoLayout>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}