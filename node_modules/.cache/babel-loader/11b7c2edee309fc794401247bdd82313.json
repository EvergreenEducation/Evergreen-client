{"ast":null,"code":"import _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/datafield/CreatePageContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport axiosInstance from 'services/AxiosInstance';\nimport { configure } from 'axios-hooks';\nimport { toast } from 'react-toastify';\nimport { Card, Button, Table } from 'antd';\n\nconst axios = require('axios').default;\n\nconst Column = Table.Column;\nconfigure({\n  axios: axiosInstance\n});\ntoast.configure();\nexport const getData = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* () {\n    // let token = JSON.parse(localStorage.getItem(\"currentSession\"))\n    // let user_id = token.id\n    // let user_role = token.role\n    // console.log(\"insssssss\", user_role, user_id)\n    let Data = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/get_page`);\n    return Data;\n  });\n\n  return function getData() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default function CreatePageContainer(props) {\n  const _useState = useState({\n    page_route: \"\"\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        pageValue = _useState2[0],\n        setPageValue = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        getdata = _useState4[0],\n        setGetData = _useState4[1];\n\n  const postData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (pageValue) {\n      let token = JSON.parse(localStorage.getItem(\"currentSession\")); // console.log(\"wwwwwwwwww\", process.env.REACT_APP_API_APIURL)\n\n      let httpAdd = `${process.env.REACT_APP_API_APIURL}`;\n      let page_route = httpAdd + pageValue.page_route;\n      let user_id = token.id;\n      let user_role = token.role; // console.log(\"insssssss\", page_route, user_role, user_id)\n\n      let pdfData = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/add_page`, {\n        page_route,\n        user_id,\n        user_role\n      });\n      return pdfData;\n    });\n\n    return function postData(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  const handleName = event => {\n    let value = event.target.value;\n\n    let inputValues = _objectSpread(_objectSpread({}, pageValue), {}, {\n      page_route: value.replace(/\\s/g, '')\n    });\n\n    setPageValue(inputValues);\n  };\n\n  function matchDataFromUrl(pageValue) {\n    if (getData) {\n      for (let i = 0; i < getdata.length; i++) {\n        let lastUrl = getdata[i].page_route.split('/');\n\n        if (lastUrl[lastUrl.length - 1] === pageValue.page_route.trim()) {\n          return false;\n        }\n      }\n\n      return true;\n    } else {\n      return true;\n    }\n  }\n\n  const handleButton = () => {\n    let status = matchDataFromUrl(pageValue);\n\n    if (status) {\n      pageValue.page_route = pageValue.page_route;\n      postData(pageValue).then(resp => {\n        // console.log(resp, \"response\")\n        if (resp.status == 200) {\n          getData().then(resp => {\n            setGetData(resp.data.data);\n          });\n          setPageValue({\n            page_route: \"\"\n          });\n          notify(\"success\");\n        }\n      }).catch(error => {\n        console.log(error, \"error\");\n      });\n    } else {\n      toast.error(\"Custom route is already selected\");\n    }\n  };\n\n  const notify = msg => {\n    if (msg == \"error\") {\n      toast.error(\"Please send the valid params\");\n    } else if (msg == \"success\") {\n      toast.success(\"Data Save Successfully\");\n    } else if (msg == \"netork\") {\n      toast.network(\"Network error Please check again\");\n    }\n  };\n\n  useEffect(() => {\n    getData().then(resp => {\n      // console.log(resp, \"reeeeeeeeeeeee\")\n      if (resp.status == 200) {\n        setGetData(resp.data.data);\n      }\n    }).catch(error => {\n      console.log(error, \"errrrrrrrrrrrr\");\n    });\n  }, []);\n\n  const handleLink = text => {\n    window.open(`${text.page_route}`, \"_blank\");\n  }; // console.log(\"accedrationValues\", pageValue)\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    title: \"Add Page\",\n    className: \"shadow-md rounded-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"acc_input_listing\",\n    id: \"create-course-form\",\n    onChange: e => handleName(e, \"page_route\"),\n    value: pageValue === null || pageValue === void 0 ? void 0 : pageValue.page_route,\n    placeholder: \"Please enter route name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: pageValue.page_route === \"\",\n    className: \"plus-icon listing_aad_page ant-btn flex justify-center items-center ant-btn-primary ant-btn-circle ant-btn-sm\",\n    onClick: () => handleButton(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"plus\",\n    className: \"svg-inline--fa fa-plus fa-w-14 text-xs\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 217\n    }\n  })))), /*#__PURE__*/React.createElement(Table, {\n    ref: getdata // loading={loading}\n    ,\n    pagination: {\n      pageSize: 8\n    },\n    dataSource: getdata,\n    bordered: true,\n    className: \"ant-table-wrapper--responsive\",\n    rowClassName: () => 'antd-row',\n    rowKey: \"id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Column, {\n    className: \"antd-col\",\n    title: \"Listing\",\n    dataIndex: \"page_route\",\n    key: \"page_route\",\n    render: (text, record) => ({\n      children: text,\n      props: {\n        'page_route': 'page_route'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Column, {\n    className: \"antd-col style-right\" // title=\"pdf_link\"\n    ,\n    key: \"page_route\",\n    render: (text, record, index) => ({\n      children: /*#__PURE__*/React.createElement(Button, {\n        onClick: () => handleLink(text),\n        title: \"PDF Listing\",\n        dataIndex: \"page_route\",\n        key: \"page_route\",\n        render: (text, record) => ({\n          children: text,\n          props: {\n            'page_route': 'page_route'\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }\n      }, \"click here\"),\n      props: {\n        'page_route': 'page_route'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  })));\n}\n\n__signature__(CreatePageContainer, \"useState{[pageValue, setPageValue]({\\n        page_route: \\\"\\\"\\n    })}\\nuseState{[getdata, setGetData]}\\nuseEffect{}\");\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(axios, \"axios\", \"/home/devnineteen/Music/evergreen-frontend/src/components/datafield/CreatePageContainer.js\");\n  reactHotLoader.register(Column, \"Column\", \"/home/devnineteen/Music/evergreen-frontend/src/components/datafield/CreatePageContainer.js\");\n  reactHotLoader.register(getData, \"getData\", \"/home/devnineteen/Music/evergreen-frontend/src/components/datafield/CreatePageContainer.js\");\n  reactHotLoader.register(CreatePageContainer, \"CreatePageContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/components/datafield/CreatePageContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/datafield/CreatePageContainer.js"],"names":["React","useEffect","useState","axiosInstance","configure","toast","Card","Button","Table","axios","require","default","Column","getData","Data","post","process","env","REACT_APP_API_URL","CreatePageContainer","props","page_route","pageValue","setPageValue","getdata","setGetData","postData","token","JSON","parse","localStorage","getItem","httpAdd","REACT_APP_API_APIURL","user_id","id","user_role","role","pdfData","handleName","event","value","target","inputValues","replace","matchDataFromUrl","i","length","lastUrl","split","trim","handleButton","status","then","resp","data","notify","catch","error","console","log","msg","success","network","handleLink","text","window","open","e","pageSize","record","children","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axiosInstance from 'services/AxiosInstance';\nimport  { configure } from 'axios-hooks';\nimport {  toast } from 'react-toastify';\nimport { Card, Button, Table } from 'antd';\n\nconst axios = require('axios').default;\nconst { Column } = Table;\n\nconfigure({\n    axios: axiosInstance,\n});\ntoast.configure()\nexport const getData = async () => {\n    // let token = JSON.parse(localStorage.getItem(\"currentSession\"))\n    // let user_id = token.id\n    // let user_role = token.role\n    // console.log(\"insssssss\", user_role, user_id)\n    let Data = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/get_page`)\n    return Data\n}\n\n\nexport default function CreatePageContainer(props) {\n\n    const [pageValue, setPageValue] = useState({\n        page_route: \"\"\n    })\n    const [getdata, setGetData] = useState()\n\n    const postData = async (pageValue) => {\n        let token = JSON.parse(localStorage.getItem(\"currentSession\"))\n        // console.log(\"wwwwwwwwww\", process.env.REACT_APP_API_APIURL)\n        let httpAdd = `${process.env.REACT_APP_API_APIURL}`\n        let page_route = httpAdd + pageValue.page_route\n        let user_id = token.id\n        let user_role = token.role\n        // console.log(\"insssssss\", page_route, user_role, user_id)\n        let pdfData = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/add_page`, {\n            page_route,\n            user_id,\n            user_role\n        })\n        return pdfData\n    }\n\n    const handleName = (event) => {\n        let { value } = event.target;\n        let inputValues = { ...pageValue, page_route: value.replace(/\\s/g, '') }\n        setPageValue(inputValues);\n    }\n\n    function matchDataFromUrl(pageValue) {\n        if (getData) {\n            for (let i = 0; i < getdata.length; i++) {\n                let lastUrl = getdata[i].page_route.split('/');\n                if (lastUrl[lastUrl.length - 1] === pageValue.page_route.trim()) {\n                    return false\n                }\n            }\n            return true\n        } else {\n            return true\n        }\n    }\n\n    const handleButton = () => {\n        let status = matchDataFromUrl(pageValue);\n        if (status) {\n            pageValue.page_route = pageValue.page_route;\n            postData(pageValue).then(resp => {\n                // console.log(resp, \"response\")\n                if (resp.status == 200) {\n                    getData().then(resp => {\n                        setGetData(resp.data.data)\n                    })\n                    setPageValue({ page_route: \"\" })\n                    notify(\"success\")\n                }\n            }).catch(error => {\n                console.log(error, \"error\")\n            })\n        } else {\n            toast.error(\"Custom route is already selected\");\n        }\n    }\n\n    const notify = msg => {\n        if (msg == \"error\") {\n            toast.error(\"Please send the valid params\")\n        } else if (msg == \"success\") {\n            toast.success(\"Data Save Successfully\")\n        } else if (msg == \"netork\") {\n            toast.network(\"Network error Please check again\")\n        }\n    }\n\n    useEffect(() => {\n        getData().then(resp => {\n            // console.log(resp, \"reeeeeeeeeeeee\")\n            if (resp.status == 200) {\n                setGetData(resp.data.data)\n            }\n        }).catch(error => {\n            console.log(error, \"errrrrrrrrrrrr\")\n        })\n    }, []);\n\n    const handleLink = (text) => {\n        window.open(`${text.page_route}`, \"_blank\")\n    }\n    // console.log(\"accedrationValues\", pageValue)\n    return (\n        <>\n            <Card title=\"Add Page\" className=\"shadow-md rounded-md\">\n                <input className=\"acc_input_listing\" id=\"create-course-form\" onChange={(e) => handleName(e, \"page_route\")} value={pageValue?.page_route} placeholder=\"Please enter route name\"></input>\n                <button disabled={pageValue.page_route === \"\"} className=\"plus-icon listing_aad_page ant-btn flex justify-center items-center ant-btn-primary ant-btn-circle ant-btn-sm\" onClick={() => handleButton()}>\n                    <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"plus\" className=\"svg-inline--fa fa-plus fa-w-14 text-xs\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\"></path></svg>\n                </button>\n            </Card>\n            <Table\n                ref={getdata}\n                // loading={loading}\n                pagination={{ pageSize: 8 }}\n                dataSource={getdata}\n                bordered\n                className=\"ant-table-wrapper--responsive\"\n                rowClassName={() => 'antd-row'}\n                rowKey=\"id\"\n            >\n                <Column\n                    className=\"antd-col\"\n                    title=\"Listing\"\n                    dataIndex=\"page_route\"\n                    key=\"page_route\"\n                    render={(text, record) => ({\n                        children: text,\n                        props: {\n                            'page_route': 'page_route',\n                        },\n                    })}\n                />\n                <Column\n                    className=\"antd-col style-right\"\n                    // title=\"pdf_link\"\n                    key=\"page_route\"\n                    render={(text, record, index) => ({\n                        children: (\n                            <Button\n                                onClick={() => handleLink(text)}\n                                title=\"PDF Listing\"\n                                dataIndex=\"page_route\"\n                                key=\"page_route\"\n                                render={(text, record) => ({\n                                    children: text,\n                                    props: {\n                                        'page_route': 'page_route',\n                                    },\n                                })}\n                            >click here</Button>\n                        ),\n                        props: {\n                            'page_route': 'page_route',\n                        },\n                    })}\n                />\n            </Table>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}