{"ast":null,"code":"import _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _find from \"lodash/find\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar importedWrapper = require('react-imported-component/wrapper');\n\nimport { imported } from \"react-imported-component\";\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useState, useEffect } from 'react';\nimport { Layout, Row, Col, Button, Popover, Input, Checkbox, Select, Switch } from 'antd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSignInAlt, faUser, faArrowLeft, faSearch, faTimes, faHome, faFilter } from '@fortawesome/free-solid-svg-icons';\nimport { TopicCarouselContainer } from 'components/student';\nimport PromoCarouselsContainer from 'components/promotion/PromoCarouselsContainer/PromoCarouselsContainer';\nimport { Route, withRouter, useRouteMatch, useHistory, Link, Redirect } from 'react-router-dom';\nimport matchSorter from 'match-sorter';\nimport useAxios, { configure } from 'axios-hooks';\nimport axiosInstance from 'services/AxiosInstance';\nimport AuthService from 'services/AuthService';\nimport useGlobalStore from 'store/GlobalStore';\nimport Logo from 'assets/svgs/evergreen-optimized-logo.svg';\nimport './home-screen.scss';\n\nconst axios = require('axios').default;\n\nconfigure({\n  axios: axiosInstance\n});\nconst Header = Layout.Header,\n      Content = Layout.Content;\nconst Search = Input.Search;\nconst Option = Select.Option;\nconst OfferInfoContainer = imported(() => importedWrapper(\"imported_1esgib6_component\", import('components/student/OfferInfoContainer')));\nconst ProviderInfoContainer = imported(() => importedWrapper(\"imported_30q54p_component\", import('components/student/ProviderInfoContainer')));\nconst PathwayInfoContainer = imported(() => importedWrapper(\"imported_q8s8mn_component\", import('components/student/PathwayInfoContainer')));\nconst StudentDashboard = imported(() => importedWrapper(\"imported_-ohg3o5_component\", import('components/student/StudentDashboard/StudentDashboard')));\nconst SearchResultContainer = imported(() => importedWrapper(\"imported_muricv_component\", import('components/SearchResultContainer/SearchResultContainer')));\n\nfunction HomeScreen() {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        searchString = _useState2[0],\n        setSearchString = _useState2[1];\n\n  const _useState3 = useState({\n    offer: true,\n    pathway: true,\n    provider: true,\n    learn: false,\n    earn: false\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        filters = _useState4[0],\n        setFilters = _useState4[1];\n\n  const _useGlobalStore = useGlobalStore(),\n        datafieldStore = _useGlobalStore.datafield,\n        providerStore = _useGlobalStore.provider,\n        pathwayStore = _useGlobalStore.pathway,\n        offerStore = _useGlobalStore.offer;\n\n  const _useState5 = useState({\n    search: false,\n    popover: false\n  }),\n        _useState6 = _slicedToArray(_useState5, 2),\n        toggeables = _useState6[0],\n        setToggeables = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        results = _useState8[0],\n        setResults = _useState8[1];\n\n  const handleVisibleChange = visible => {\n    setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n      popover: visible\n    }));\n  };\n\n  let match = useRouteMatch();\n  const history = useHistory();\n  const session = AuthService.currentSession;\n\n  const _useAxios = useAxios('/datafields?scope=with_offers'),\n        _useAxios2 = _slicedToArray(_useAxios, 1),\n        getDataFields = _useAxios2[0].data;\n\n  const _useAxios3 = useAxios('/pathways?scope=with_details'),\n        _useAxios4 = _slicedToArray(_useAxios3, 1),\n        getPathways = _useAxios4[0].data;\n\n  const _useAxios5 = useAxios('/offers?scope=with_details'),\n        _useAxios6 = _slicedToArray(_useAxios5, 1),\n        getOffers = _useAxios6[0].data;\n\n  const _useAxios7 = useAxios('/providers?scope=with_details'),\n        _useAxios8 = _slicedToArray(_useAxios7, 1),\n        getProviders = _useAxios8[0].data;\n\n  const offers = Object.values(offerStore.entities).map(o => {\n    return _objectSpread(_objectSpread({}, o), {}, {\n      entity_type: 'offer'\n    });\n  });\n  const providers = Object.values(providerStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'provider'\n    });\n  });\n  const pathways = Object.values(pathwayStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'pathway'\n    });\n  });\n  const data = [...offers, ...pathways, ...providers];\n\n  const _useState9 = useState({\n    id: 0,\n    page_route: \"default\"\n  }),\n        _useState10 = _slicedToArray(_useState9, 2),\n        activePageId = _useState10[0],\n        setActivePageId = _useState10[1]; // custom api calling\n\n\n  const customPageInfoApi = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (page_route) {\n      let response = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/get_custom_route_page`, {\n        page_route\n      });\n      return response.data;\n    });\n\n    return function customPageInfoApi(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // getting custom page id and url\n\n\n  function customPageInfoData(pageUrl) {\n    customPageInfoApi(pageUrl).then(res => {\n      if (res.data.length) {\n        let response = res.data[0];\n        setActivePageId({\n          id: response.id,\n          page_route: response.page_route\n        });\n      } else {\n        history.push('/error/404');\n      }\n    }).catch(err => {\n      console.log('customPageInfoApi err', err);\n    });\n  } // check if page is custom or home page\n\n\n  function checkUrlIsCustom() {\n    let isUrlCustomPage = window.location.href.indexOf(\"evg\") > -1 ? true : false,\n        pageUrl = window.location.href;\n\n    if (isUrlCustomPage) {\n      customPageInfoData(pageUrl);\n    }\n  }\n\n  useEffect(() => {\n    if (window.location.href.indexOf(\"evg\") > -1) {\n      checkUrlIsCustom();\n    }\n  }, []);\n  console.log('Home page', activePageId);\n\n  const handleSearch = e => {\n    if (!e) {\n      return '';\n    }\n\n    setSearchString(e.target.value);\n\n    if (searchString.length > 0) {\n      setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n        isSearching: true\n      }));\n    } else {\n      setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n        isSearching: false\n      }));\n    }\n\n    return searchString;\n  };\n\n  function handleLearnCheckbox(e) {\n    setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n      learn: e.target.checked\n    }));\n  }\n\n  function handleEarnCheckbox(e) {\n    setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n      earn: e.target.checked\n    }));\n  }\n\n  const handleDataAfterSearch = (data, keys = ['name', 'keywords']) => {\n    return matchSorter(data, searchString, {\n      keys\n    });\n  };\n\n  const topics = Object.values(datafieldStore.entities).filter(df => {\n    return df.type === 'topic';\n  });\n  let showData = handleDataAfterSearch(data).filter(d => {\n    if (filters.offer && d.entity_type === 'offer') {\n      return true;\n    }\n\n    if (filters.provider && d.entity_type === 'provider') {\n      return true;\n    }\n\n    if (filters.pathway && d.entity_type === 'pathway') {\n      return true;\n    }\n\n    return false;\n  });\n\n  if (filters.learn && !filters.earn) {\n    showData = showData.filter(d => {\n      if (!d.learn_and_earn) {\n        return false;\n      }\n\n      return d.learn_and_earn === 'learn';\n    });\n  }\n\n  if (filters.earn && !filters.learn) {\n    showData = showData.filter(d => {\n      if (!d.learn_and_earn) {\n        return false;\n      }\n\n      return d.learn_and_earn === 'earn';\n    });\n  }\n\n  if (filters.earn && filters.learn) {\n    showData = showData.filter(d => {\n      if (!d.learn_and_earn) {\n        return false;\n      }\n\n      return d.learn_and_earn === 'both';\n    });\n  }\n\n  function toggleFilter(key) {\n    if (!key) {\n      return;\n    }\n\n    setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n      [key]: !filters[key]\n    }));\n  }\n\n  function onSelectChange(dataFieldId) {\n    const filteredByTopic = showData.filter(d => {\n      return _find(d.DataFields, ['id', dataFieldId]);\n    });\n    setResults(filteredByTopic);\n  }\n\n  useEffect(() => {\n    if (getDataFields) {\n      datafieldStore.addMany(getDataFields);\n    }\n\n    if (getPathways) {\n      pathwayStore.addMany(getPathways);\n    }\n\n    if (getOffers) {\n      offerStore.addMany(getOffers);\n    }\n\n    if (getProviders) {\n      providerStore.addMany(getProviders);\n    }\n  }, [getDataFields, getPathways, getOffers, getProviders]);\n  const search = toggeables.search,\n        popover = toggeables.popover;\n  return /*#__PURE__*/React.createElement(Layout, {\n    className: \"homeScreen h-full bg-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeScreen__contentWrapper w-full bg-gray-100 pb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Content, {\n    className: \"homeScreen__carouselContent mx-auto h-auto bg-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, !search && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.url}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(PromoCarouselsContainer, {\n    activePageId: activePageId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeScreen__carouselContentTwo mx-auto homepage_outlook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TopicCarouselContainer, {\n    getDataFields: getDataFields,\n    getPathways: getPathways,\n    getOffers: getOffers,\n    getProviders: getProviders,\n    activePageId: activePageId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeScreen__carouselContentTwo mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: `${match.url}/offer/:id`,\n    component: props => /*#__PURE__*/React.createElement(OfferInfoContainer, Object.assign({}, props, {\n      session: session,\n      getOffers: getOffers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: `${match.url}/pathway/:id`,\n    component: props => /*#__PURE__*/React.createElement(PathwayInfoContainer, Object.assign({}, props, {\n      session: session,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: `${match.url}/provider/:id`,\n    component: props => /*#__PURE__*/React.createElement(ProviderInfoContainer, Object.assign({}, props, {\n      getOffers: getOffers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 40\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.url}/student`,\n    component: props => {\n      return session && session.role === 'student' && /*#__PURE__*/React.createElement(StudentDashboard, Object.assign({}, props, {\n        session: session,\n        toggeables: toggeables,\n        setToggeables: setToggeables,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 25\n        }\n      })) || /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/error/401\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 29\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }\n  }))) || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeScreen__carouselContentTwo mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SearchResultContainer, {\n    data: results.length ? results : showData,\n    setToggeables: setToggeables,\n    toggeables: toggeables,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Header, {\n    className: \"homeScreen__navWrapper h-12 w-full bg-green-500 fixed bottom-0 z-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"homeScreen__navbar mx-auto h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: !search ? 8 : 3,\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"mr-2\",\n    type: \"primary\",\n    shape: \"circle\",\n    onClick: () => {\n      history.goBack();\n      setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n        search: false,\n        isSearching: false\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white\",\n    icon: faArrowLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"homeScreen__homeButton mr-2 p-0 z-10\",\n    type: \"primary\",\n    shape: \"circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"flex w-full h-full\",\n    to: \"/\",\n    onClick: () => {\n      setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n        search: false,\n        isSearching: false\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white m-auto\",\n    icon: faHome,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    span: !search ? 8 : 18,\n    className: \"flex justify-center items-center h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 11\n    }\n  }, !search && /*#__PURE__*/React.createElement(Row, {\n    className: \"flex justify-center items-center select-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"homeScreen__brandLogo relative mr-1\",\n    src: Logo,\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"homeScreen__brandName font-bold flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 17\n    }\n  }, \"EVERGREEN\")) || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    className: \"rounded-l rounded-r-none custom-searchbox\",\n    onChange: handleSearch,\n    addonAfter: /*#__PURE__*/React.createElement(Popover, {\n      trigger: \"click\",\n      placement: \"topRight\",\n      content: /*#__PURE__*/React.createElement(Row, {\n        gutter: 8,\n        style: {\n          width: 297\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        className: \"w-full\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(Select, {\n        className: \"w-full mb-2\",\n        size: \"small\",\n        placeholder: \"Topics\",\n        allowClear: true,\n        onChange: onSelectChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 29\n        }\n      }, topics.map((t, index) => {\n        return /*#__PURE__*/React.createElement(Option, {\n          className: \"text-xs\",\n          value: t.id,\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 35\n          }\n        }, t.name);\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Checkbox, {\n        checked: filters.learn,\n        onChange: handleLearnCheckbox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 31\n        }\n      }, \"Learn\"), /*#__PURE__*/React.createElement(Checkbox, {\n        checked: filters.earn,\n        onChange: handleEarnCheckbox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 31\n        }\n      }, \"Earn\")), /*#__PURE__*/React.createElement(Row, {\n        className: \"justify-between mb-1\",\n        gutter: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 31\n        }\n      }, \"Providers\"), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        size: 'small',\n        defaultChecked: filters.provider,\n        onClick: () => toggleFilter('provider'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        className: \"justify-between mb-1\",\n        gutter: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 31\n        }\n      }, \"Offers\"), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        size: \"small\",\n        defaultChecked: filters.offer,\n        onClick: () => toggleFilter('offer'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        className: \"justify-between\",\n        gutter: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 31\n        }\n      }, \"Pathways\"), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        size: \"small\",\n        defaultChecked: filters.pathway,\n        onClick: () => toggleFilter('pathway'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 33\n        }\n      }))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h-full w-full px-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"text-white\",\n      icon: faFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 25\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: !toggeables.search ? 8 : 3,\n    className: \"flex justify-end items-center h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 11\n    }\n  }, search && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    className: \"mr-2\",\n    danger: true,\n    type: \"primary\",\n    shape: \"circle\",\n    onClick: () => setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n      search: false,\n      isSearching: false\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white\",\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 19\n    }\n  }))), !search && /*#__PURE__*/React.createElement(Button, {\n    className: \"mr-2\",\n    type: \"primary\",\n    shape: \"circle\",\n    onClick: () => setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n      search: true\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white\",\n    icon: faSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 17\n    }\n  })), session && session.role === 'student' && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Popover, {\n    trigger: \"click\",\n    placement: \"topRight\",\n    visible: popover,\n    onVisibleChange: handleVisibleChange,\n    content: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-col items-start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `${match.url}/student`,\n      style: {\n        borderBottom: '1px solid #edf2f7'\n      },\n      onClick: () => setToggeables(_objectSpread(_objectSpread({}, toggeables), {}, {\n        search: false,\n        popover: false\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"link\",\n      className: \"py-0 px-0 pr-6 text-gray-500\",\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 25\n      }\n    }, \"User Pathway\")), /*#__PURE__*/React.createElement(Button, {\n      type: \"link\",\n      className: \"py-0 px-0 pr-6 text-gray-500\",\n      size: \"small\",\n      onClick: () => AuthService.logout(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 23\n      }\n    }, \"Sign out\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    shape: \"circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white\",\n    icon: faUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 21\n    }\n  })))) || /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    shape: \"circle\",\n    onClick: () => {\n      window.location.replace(`${process.env.REACT_APP_API_URL}/login`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white\",\n    icon: faSignInAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 17\n    }\n  }))))));\n}\n\n__signature__(HomeScreen, \"useState{[searchString, setSearchString]('')}\\nuseState{[filters, setFilters]({\\r\\n    offer: true,\\r\\n    pathway: true,\\r\\n    provider: true,\\r\\n    learn: false,\\r\\n    earn: false,\\r\\n  })}\\nuseGlobalStore{{\\r\\n    datafield: datafieldStore,\\r\\n    provider: providerStore,\\r\\n    pathway: pathwayStore,\\r\\n    offer: offerStore,\\r\\n  }}\\nuseState{[toggeables, setToggeables]({\\r\\n    search: false,\\r\\n    popover: false,\\r\\n  })}\\nuseState{[results, setResults]([])}\\nuseRouteMatch{match}\\nuseHistory{history}\\nuseAxios{[{ data: getDataFields }]}\\nuseAxios{[{ data: getPathways }]}\\nuseAxios{[{ data: getOffers }]}\\nuseAxios{[{ data: getProviders }]}\\nuseState{[activePageId, setActivePageId]({\\r\\n    id: 0,\\r\\n    page_route: \\\"default\\\"\\r\\n  })}\\nuseEffect{}\\nuseEffect{}\", () => [useGlobalStore, useRouteMatch, useHistory, useAxios, useAxios, useAxios, useAxios]);\n\nconst _default = withRouter(HomeScreen);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(axios, \"axios\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(Header, \"Header\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(Content, \"Content\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(Search, \"Search\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(Option, \"Option\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(OfferInfoContainer, \"OfferInfoContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(ProviderInfoContainer, \"ProviderInfoContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(PathwayInfoContainer, \"PathwayInfoContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(StudentDashboard, \"StudentDashboard\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(SearchResultContainer, \"SearchResultContainer\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(HomeScreen, \"HomeScreen\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/screens/HomeScreen/HomeScreen.js"],"names":["React","useState","useEffect","Layout","Row","Col","Button","Popover","Input","Checkbox","Select","Switch","FontAwesomeIcon","faSignInAlt","faUser","faArrowLeft","faSearch","faTimes","faHome","faFilter","TopicCarouselContainer","PromoCarouselsContainer","Route","withRouter","useRouteMatch","useHistory","Link","Redirect","matchSorter","useAxios","configure","axiosInstance","AuthService","useGlobalStore","Logo","axios","require","default","Header","Content","Search","Option","OfferInfoContainer","imported","ProviderInfoContainer","PathwayInfoContainer","StudentDashboard","SearchResultContainer","HomeScreen","searchString","setSearchString","offer","pathway","provider","learn","earn","filters","setFilters","datafieldStore","datafield","providerStore","pathwayStore","offerStore","search","popover","toggeables","setToggeables","results","setResults","handleVisibleChange","visible","match","history","session","currentSession","getDataFields","data","getPathways","getOffers","getProviders","offers","Object","values","entities","map","o","entity_type","providers","p","pathways","id","page_route","activePageId","setActivePageId","customPageInfoApi","response","post","process","env","REACT_APP_API_URL","customPageInfoData","pageUrl","then","res","length","push","catch","err","console","log","checkUrlIsCustom","isUrlCustomPage","window","location","href","indexOf","handleSearch","e","target","value","isSearching","handleLearnCheckbox","checked","handleEarnCheckbox","handleDataAfterSearch","keys","topics","filter","df","type","showData","d","learn_and_earn","toggleFilter","key","onSelectChange","dataFieldId","filteredByTopic","DataFields","addMany","url","props","role","goBack","width","t","index","name","borderBottom","logout","replace"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Layout,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Popover,\r\n  Input,\r\n  Checkbox,\r\n  Select,\r\n  Switch,\r\n} from 'antd';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faSignInAlt,\r\n  faUser,\r\n  faArrowLeft,\r\n  faSearch,\r\n  faTimes,\r\n  faHome,\r\n  faFilter,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { TopicCarouselContainer } from 'components/student';\r\nimport PromoCarouselsContainer from 'components/promotion/PromoCarouselsContainer/PromoCarouselsContainer';\r\nimport {\r\n  Route,\r\n  withRouter,\r\n  useRouteMatch,\r\n  useHistory,\r\n  Link,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport { imported } from 'react-imported-component/macro';\r\nimport matchSorter from 'match-sorter';\r\nimport { find } from 'lodash';\r\nimport useAxios, { configure } from 'axios-hooks';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport AuthService from 'services/AuthService';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport Logo from 'assets/svgs/evergreen-optimized-logo.svg';\r\nimport './home-screen.scss';\r\nconst axios = require('axios').default;\r\n\r\nconfigure({\r\n  axios: axiosInstance,\r\n});\r\n\r\nconst { Header, Content } = Layout;\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nconst OfferInfoContainer = imported(() =>\r\n  import('components/student/OfferInfoContainer')\r\n);\r\n\r\nconst ProviderInfoContainer = imported(() =>\r\n  import('components/student/ProviderInfoContainer')\r\n);\r\n\r\nconst PathwayInfoContainer = imported(() =>\r\n  import('components/student/PathwayInfoContainer')\r\n);\r\n\r\nconst StudentDashboard = imported(() =>\r\n  import('components/student/StudentDashboard/StudentDashboard')\r\n);\r\n\r\nconst SearchResultContainer = imported(() =>\r\n  import('components/SearchResultContainer/SearchResultContainer')\r\n);\r\n\r\nfunction HomeScreen() {\r\n  const [searchString, setSearchString] = useState('');\r\n  const [filters, setFilters] = useState({\r\n    offer: true,\r\n    pathway: true,\r\n    provider: true,\r\n    learn: false,\r\n    earn: false,\r\n  });\r\n  const {\r\n    datafield: datafieldStore,\r\n    provider: providerStore,\r\n    pathway: pathwayStore,\r\n    offer: offerStore,\r\n  } = useGlobalStore();\r\n  const [toggeables, setToggeables] = useState({\r\n    search: false,\r\n    popover: false,\r\n  });\r\n  const [results, setResults] = useState([]);\r\n\r\n  const handleVisibleChange = (visible) => {\r\n    setToggeables({\r\n      ...toggeables,\r\n      popover: visible,\r\n    });\r\n  };\r\n\r\n  let match = useRouteMatch();\r\n  const history = useHistory();\r\n\r\n  const session = AuthService.currentSession;\r\n  \r\n  const [{ data: getDataFields }] = useAxios('/datafields?scope=with_offers');\r\n\r\n  const [{ data: getPathways }] = useAxios('/pathways?scope=with_details');\r\n\r\n  const [{ data: getOffers }] = useAxios('/offers?scope=with_details');\r\n\r\n  const [{ data: getProviders }] = useAxios('/providers?scope=with_details');\r\n\r\n  const offers = Object.values(offerStore.entities).map((o) => {\r\n    return { ...o, entity_type: 'offer' };\r\n  });\r\n\r\n  const providers = Object.values(providerStore.entities).map((p) => {\r\n    return { ...p, entity_type: 'provider' };\r\n  });\r\n\r\n  const pathways = Object.values(pathwayStore.entities).map((p) => {\r\n    return { ...p, entity_type: 'pathway' };\r\n  });\r\n\r\n  const data = [...offers, ...pathways, ...providers];\r\n  \r\n  const [activePageId, setActivePageId] = useState({\r\n    id: 0,\r\n    page_route: \"default\"\r\n  });\r\n// custom api calling\r\n  const customPageInfoApi = async (page_route) => {\r\n    let response = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/get_custom_route_page`, {\r\n      page_route\r\n    })\r\n    return response.data\r\n  }\r\n\r\n  // getting custom page id and url\r\n  function customPageInfoData(pageUrl){\r\n    customPageInfoApi(pageUrl).then(res=>{\r\n      if(res.data.length){\r\n        let response=res.data[0];\r\n        setActivePageId({\r\n          id:response.id,\r\n          page_route:response.page_route\r\n        })\r\n      }else{\r\n        history.push('/error/404');\r\n      }\r\n    }).catch(err=>{\r\n      console.log('customPageInfoApi err',err)\r\n    })\r\n  }\r\n\r\n  // check if page is custom or home page\r\n  function checkUrlIsCustom(){\r\n    let isUrlCustomPage=window.location.href.indexOf(\"evg\")> -1?true:false,\r\n    pageUrl=window.location.href;\r\n    if(isUrlCustomPage){\r\n      customPageInfoData(pageUrl);\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(window.location.href.indexOf(\"evg\")> -1){\r\n      checkUrlIsCustom()\r\n    }\r\n  },[])\r\n\r\n  console.log('Home page',activePageId)\r\n\r\n  const handleSearch = (e) => {\r\n    if (!e) {\r\n      return '';\r\n    }\r\n    setSearchString(e.target.value);\r\n    if (searchString.length > 0) {\r\n      setToggeables({\r\n        ...toggeables,\r\n        isSearching: true,\r\n      });\r\n    } else {\r\n      setToggeables({\r\n        ...toggeables,\r\n        isSearching: false,\r\n      });\r\n    }\r\n    return searchString;\r\n  };\r\n\r\n  function handleLearnCheckbox(e) {\r\n    setFilters({\r\n      ...filters,\r\n      learn: e.target.checked,\r\n    });\r\n  }\r\n\r\n  function handleEarnCheckbox(e) {\r\n    setFilters({\r\n      ...filters,\r\n      earn: e.target.checked,\r\n    });\r\n  }\r\n\r\n  const handleDataAfterSearch = (data, keys = ['name', 'keywords']) => {\r\n    return matchSorter(data, searchString, { keys });\r\n  };\r\n\r\n  const topics = Object.values(datafieldStore.entities).filter((df) => {\r\n    return df.type === 'topic';\r\n  });\r\n\r\n  let showData = handleDataAfterSearch(data).filter((d) => {\r\n    if (filters.offer && d.entity_type === 'offer') {\r\n      return true;\r\n    }\r\n\r\n    if (filters.provider && d.entity_type === 'provider') {\r\n      return true;\r\n    }\r\n\r\n    if (filters.pathway && d.entity_type === 'pathway') {\r\n      return true;\r\n    }\r\n    return false;\r\n  });\r\n\r\n  if (filters.learn && !filters.earn) {\r\n    showData = showData.filter((d) => {\r\n      if (!d.learn_and_earn) {\r\n        return false;\r\n      }\r\n      return d.learn_and_earn === 'learn';\r\n    });\r\n  }\r\n\r\n  if (filters.earn && !filters.learn) {\r\n    showData = showData.filter((d) => {\r\n      if (!d.learn_and_earn) {\r\n        return false;\r\n      }\r\n      return d.learn_and_earn === 'earn';\r\n    });\r\n  }\r\n\r\n  if (filters.earn && filters.learn) {\r\n    showData = showData.filter((d) => {\r\n      if (!d.learn_and_earn) {\r\n        return false;\r\n      }\r\n      return d.learn_and_earn === 'both';\r\n    });\r\n  }\r\n\r\n  function toggleFilter(key) {\r\n    if (!key) {\r\n      return;\r\n    }\r\n    setFilters({\r\n      ...filters,\r\n      [key]: !filters[key],\r\n    });\r\n  }\r\n\r\n  function onSelectChange(dataFieldId) {\r\n    const filteredByTopic = showData.filter((d) => {\r\n      return find(d.DataFields, ['id', dataFieldId]);\r\n    });\r\n    setResults(filteredByTopic);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (getDataFields) {\r\n      datafieldStore.addMany(getDataFields);\r\n    }\r\n    if (getPathways) {\r\n      pathwayStore.addMany(getPathways);\r\n    }\r\n    if (getOffers) {\r\n      offerStore.addMany(getOffers);\r\n    }\r\n    if (getProviders) {\r\n      providerStore.addMany(getProviders);\r\n    }\r\n  }, [getDataFields,getPathways, getOffers, getProviders]);\r\n\r\n  const { search, popover } = toggeables;\r\n\r\n  return (\r\n    <Layout className=\"homeScreen h-full bg-gray-100\">\r\n      <div className=\"homeScreen__contentWrapper w-full bg-gray-100 pb-6\">\r\n        <Content className=\"homeScreen__carouselContent mx-auto h-auto bg-gray-100\">\r\n          {(!search && (\r\n            <>\r\n              <Route exact path={`${match.url}`}>\r\n                <PromoCarouselsContainer activePageId={activePageId}/>\r\n                <div className=\"homeScreen__carouselContentTwo mx-auto homepage_outlook\">\r\n                  <TopicCarouselContainer \r\n                  getDataFields={getDataFields}\r\n                  getPathways={getPathways}\r\n                  getOffers={getOffers}\r\n                  getProviders={getProviders}\r\n                  activePageId={activePageId}\r\n                  />\r\n                </div>\r\n              </Route>\r\n              <div className=\"homeScreen__carouselContentTwo mx-auto\">\r\n                <Route\r\n                  path={`${match.url}/offer/:id`}\r\n                  component={(props) => (\r\n                    <OfferInfoContainer {...props} session={session} getOffers={getOffers}/>\r\n                  )}\r\n                />\r\n                <Route\r\n                  path={`${match.url}/pathway/:id`}\r\n                  component={(props) => (\r\n                    <PathwayInfoContainer {...props} session={session} />\r\n                  )}\r\n                />\r\n                <Route\r\n                  path={`${match.url}/provider/:id`}\r\n                  component={(props)=>(<ProviderInfoContainer {...props} getOffers={getOffers}/>)}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`${match.url}/student`}\r\n                  component={(props) => {\r\n                    return (\r\n                      (session && session.role === 'student' && (\r\n                        <StudentDashboard\r\n                          {...props}\r\n                          session={session}\r\n                          toggeables={toggeables}\r\n                          setToggeables={setToggeables}\r\n                        />\r\n                      )) || <Redirect to=\"/error/401\" />\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n            </>\r\n          )) || (\r\n            <div className=\"homeScreen__carouselContentTwo mx-auto\">\r\n              <SearchResultContainer\r\n                data={results.length ? results : showData}\r\n                setToggeables={setToggeables}\r\n                toggeables={toggeables}\r\n              />\r\n            </div>\r\n          )}\r\n        </Content>\r\n      </div>\r\n      <Header className=\"homeScreen__navWrapper h-12 w-full bg-green-500 fixed bottom-0 z-10\">\r\n        <Row className=\"homeScreen__navbar mx-auto h-full\">\r\n          <Col span={!search ? 8 : 3} className=\"flex items-center\">\r\n            <div className=\"inherit\">\r\n              <Button\r\n                className=\"mr-2\"\r\n                type=\"primary\"\r\n                shape=\"circle\"\r\n                onClick={() => {\r\n                  history.goBack();\r\n                  setToggeables({\r\n                    ...toggeables,\r\n                    search: false,\r\n                    isSearching: false,\r\n                  });\r\n                }}\r\n              >\r\n                <FontAwesomeIcon className=\"text-white\" icon={faArrowLeft} />\r\n              </Button>\r\n              <Button\r\n                className=\"homeScreen__homeButton mr-2 p-0 z-10\"\r\n                type=\"primary\"\r\n                shape=\"circle\"\r\n              >\r\n                <Link\r\n                  className=\"flex w-full h-full\"\r\n                  to=\"/\"\r\n                  onClick={() => {\r\n                    setToggeables({\r\n                      ...toggeables,\r\n                      search: false,\r\n                      isSearching: false,\r\n                    });\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    className=\"text-white m-auto\"\r\n                    icon={faHome}\r\n                  />\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </Col>\r\n          <Col span={!search ? 8 : 18} className=\"flex justify-center items-center h-full\" >\r\n            {(!search && (\r\n              <Row className=\"flex justify-center items-center select-none\">\r\n                <img\r\n                  className=\"homeScreen__brandLogo relative mr-1\"\r\n                  src={Logo}\r\n                  alt=\"logo\"\r\n                />\r\n                <span className=\"homeScreen__brandName font-bold flex items-center\">\r\n                  EVERGREEN\r\n                </span>\r\n              </Row>\r\n            )) || (\r\n              <div className=\"flex flex-row\">\r\n                <Search\r\n                  className=\"rounded-l rounded-r-none custom-searchbox\"\r\n                  onChange={handleSearch}\r\n                  addonAfter={\r\n                    <Popover\r\n                      trigger=\"click\"\r\n                      placement=\"topRight\"\r\n                      content={\r\n                        <Row gutter={8} style={{ width: 297 }}>\r\n                          <Col className=\"w-full\">\r\n                            <Select\r\n                              className=\"w-full mb-2\"\r\n                              size=\"small\"\r\n                              placeholder=\"Topics\"\r\n                              allowClear\r\n                              onChange={onSelectChange}\r\n                            >\r\n                              {topics.map((t, index) => {\r\n                                return (\r\n                                  <Option\r\n                                    className=\"text-xs\"\r\n                                    value={t.id}\r\n                                    key={index}\r\n                                  >\r\n                                    {t.name}\r\n                                  </Option>\r\n                                );\r\n                              })}\r\n                            </Select>\r\n                            <div>\r\n                              <Checkbox\r\n                                checked={filters.learn}\r\n                                onChange={handleLearnCheckbox}\r\n                              >\r\n                                Learn\r\n                              </Checkbox>\r\n                              <Checkbox\r\n                                checked={filters.earn}\r\n                                onChange={handleEarnCheckbox}\r\n                              >\r\n                                Earn\r\n                              </Checkbox>\r\n                            </div>\r\n                            <Row className=\"justify-between mb-1\" gutter={6}>\r\n                              <Col>Providers</Col>\r\n                              <Col>\r\n                                <Switch\r\n                                  size={'small'}\r\n                                  defaultChecked={filters.provider}\r\n                                  onClick={() => toggleFilter('provider')}\r\n                                />\r\n                              </Col>\r\n                            </Row>\r\n                            <Row className=\"justify-between mb-1\" gutter={6}>\r\n                              <Col>Offers</Col>\r\n                              <Col>\r\n                                <Switch\r\n                                  size=\"small\"\r\n                                  defaultChecked={filters.offer}\r\n                                  onClick={() => toggleFilter('offer')}\r\n                                />\r\n                              </Col>\r\n                            </Row>\r\n                            <Row className=\"justify-between\" gutter={6}>\r\n                              <Col>Pathways</Col>\r\n                              <Col>\r\n                                <Switch\r\n                                  size=\"small\"\r\n                                  defaultChecked={filters.pathway}\r\n                                  onClick={() => toggleFilter('pathway')}\r\n                                />\r\n                              </Col>\r\n                            </Row>\r\n                          </Col>\r\n                        </Row>\r\n                      }\r\n                    >\r\n                      <div className=\"h-full w-full px-3\">\r\n                        <FontAwesomeIcon\r\n                          className=\"text-white\"\r\n                          icon={faFilter}\r\n                        />\r\n                      </div>\r\n                    </Popover>\r\n                  }\r\n                />\r\n              </div>\r\n            )}\r\n          </Col>\r\n          <Col\r\n            span={!toggeables.search ? 8 : 3}\r\n            className=\"flex justify-end items-center h-full\"\r\n          >\r\n            {search && (\r\n              <>\r\n                <Button\r\n                  className=\"mr-2\"\r\n                  danger\r\n                  type=\"primary\"\r\n                  shape=\"circle\"\r\n                  onClick={() =>\r\n                    setToggeables({\r\n                      ...toggeables,\r\n                      search: false,\r\n                      isSearching: false,\r\n                    })\r\n                  }\r\n                >\r\n                  <FontAwesomeIcon className=\"text-white\" icon={faTimes} />\r\n                </Button>\r\n              </>\r\n            )}\r\n            {!search && (\r\n              <Button\r\n                className=\"mr-2\"\r\n                type=\"primary\"\r\n                shape=\"circle\"\r\n                onClick={() =>\r\n                  setToggeables({\r\n                    ...toggeables,\r\n                    search: true,\r\n                  })\r\n                }\r\n              >\r\n                <FontAwesomeIcon className=\"text-white\" icon={faSearch} />\r\n              </Button>\r\n            )}\r\n            {(session && session.role === 'student' && (\r\n              <div>\r\n                <Popover\r\n                  trigger=\"click\"\r\n                  placement=\"topRight\"\r\n                  visible={popover}\r\n                  onVisibleChange={handleVisibleChange}\r\n                  content={\r\n                    <div className=\"flex flex-col items-start\">\r\n                      <Link\r\n                        to={`${match.url}/student`}\r\n                        style={{ borderBottom: '1px solid #edf2f7' }}\r\n                        onClick={() =>\r\n                          setToggeables({\r\n                            ...toggeables,\r\n                            search: false,\r\n                            popover: false,\r\n                          })\r\n                        }\r\n                      >\r\n                        <Button\r\n                          type=\"link\"\r\n                          className=\"py-0 px-0 pr-6 text-gray-500\"\r\n                          size=\"small\"\r\n                        >\r\n                          User Pathway\r\n                        </Button>\r\n                      </Link>\r\n                      <Button\r\n                        type=\"link\"\r\n                        className=\"py-0 px-0 pr-6 text-gray-500\"\r\n                        size=\"small\"\r\n                        onClick={() => AuthService.logout()}\r\n                      >\r\n                        Sign out\r\n                      </Button>\r\n                    </div>\r\n                  }\r\n                >\r\n                  <Button type=\"primary\" shape=\"circle\">\r\n                    <FontAwesomeIcon className=\"text-white\" icon={faUser} />\r\n                  </Button>\r\n                </Popover>\r\n              </div>\r\n            )) || (\r\n              <Button\r\n                type=\"primary\"\r\n                shape=\"circle\"\r\n                onClick={() => {\r\n                  window.location.replace(\r\n                    `${process.env.REACT_APP_API_URL}/login`\r\n                  );\r\n                }}\r\n              >\r\n                <FontAwesomeIcon className=\"text-white\" icon={faSignInAlt} />\r\n              </Button>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n      </Header>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default withRouter(HomeScreen);\r\n"]},"metadata":{},"sourceType":"module"}