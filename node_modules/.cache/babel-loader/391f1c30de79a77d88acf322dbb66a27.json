{"ast":null,"code":"import _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoCarouselsContainer/PromoCarouselsContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport useGlobalStore from 'store/GlobalStore';\nimport { Carousel } from 'react-responsive-carousel';\nimport { TitleDivider } from 'components/shared';\nimport PromoCard from 'components/promotion/PromoCard/PromoCard';\nimport 'assets/scss/responsive-carousel-override.scss';\nimport './promo-carousels-container.scss';\n\nconst axios = require('axios').default;\n\nconst _default = function _default(props) {\n  const _useState = useState(100),\n        _useState2 = _slicedToArray(_useState, 2),\n        localSliderPercentage = _useState2[0],\n        setLocalSliderPercentage = _useState2[1];\n\n  const _useGlobalStore = useGlobalStore(),\n        offerStore = _useGlobalStore.offer,\n        providerStore = _useGlobalStore.provider,\n        pathwayStore = _useGlobalStore.pathway;\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        bannerImage = _useState4[0],\n        setBannerImage = _useState4[1];\n\n  let activePageId = props.activePageId; //  console.log(\"------------\",pathwayStore)\n\n  const getBannerApi = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* () {\n      // let token = JSON.parse(localStorage.getItem(\"currentSession\"))\n      // let user_id = token.id\n      // let user_role = token.role\n      let Data = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/get_images_list`);\n      return Data;\n    });\n\n    return function getBannerApi() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const offers = Object.values(offerStore.entities).map(o => {\n    return _objectSpread(_objectSpread({}, o), {}, {\n      entity_type: 'offer'\n    });\n  });\n  const providers = Object.values(providerStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'provider'\n    });\n  });\n  const pathways = Object.values(pathwayStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'pathway'\n    });\n  });\n  const data = [...offers, ...pathways, ...providers];\n  const localPromos = data.filter(d => {\n    return d.custom_page_local_ids.includes(activePageId.id);\n  });\n  const mainPromos = data.filter(d => {\n    return d.custom_page_promo_ids.includes(activePageId.id);\n  });\n  console.log(\"mainPromos\", activePageId);\n  useEffect(() => {\n    const handleSliderPercentOnResize = () => {\n      if (window.innerWidth >= 769) {\n        setLocalSliderPercentage(34);\n      } else {\n        setLocalSliderPercentage(100);\n      }\n    };\n\n    if (window.innerWidth >= 769) {\n      setLocalSliderPercentage(34);\n    } else {\n      setLocalSliderPercentage(100);\n    }\n\n    window.addEventListener('resize', handleSliderPercentOnResize);\n    return () => window.removeEventListener('resize', handleSliderPercentOnResize);\n  }, [localSliderPercentage]);\n  let newA = [];\n  let windowUrl = window.location.pathname;\n  windowUrl = windowUrl.split('/').pop();\n  console.log(\"inssssssssss\", windowUrl);\n  useEffect(() => {\n    getBannerApi().then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (resp) {\n        if (resp.status === 200) {\n          var output = yield resp.data.data.map(s => ({\n            banner_image: s.landing_image,\n            id: s.id,\n            image_url: s.image_url,\n            page_url_check: s.page_url_check\n          }));\n          var defaultFilterData = (yield output) && output.length && output.map(newItem => {\n            if (newItem.page_url_check === windowUrl) {\n              console.log(\"inside\", newItem);\n              newA.push(newItem);\n              setBannerImage(newA);\n            } else if (windowUrl == \"home\" && newItem.page_url_check == \"default\") {\n              console.log(\"outside\", newItem);\n              newA.push(newItem);\n              setBannerImage(newA);\n            }\n          });\n        }\n      });\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }()).catch(error => {\n      console.log(\"errror\", error);\n    });\n  }, []);\n  console.log(\"bannerImage\", windowUrl); // console.log('mainPromos',mainPromos)\n\n  const concat = (...arrays) => [].concat(...arrays.filter(Array.isArray)); // console.log(concat(bannerImage, mainPromos),\"zzzzzzzzzzzzzzzzz\");\n\n\n  const FinalImageData = concat(mainPromos); // console.log('localPromos', localPromos)\n  // const finalPromoData = localPromos.filter(function (item, index, inputArray) {\n  //   if (item === null || item === undefined) {\n  //     return false\n  //   } else {\n  //     return inputArray.indexOf(item) == index;\n  //   }\n  // });\n\n  console.log(\"FinalImageData\", FinalImageData);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-auto w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel promoCarousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: 100,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showStatus: false,\n    showThumbs: false,\n    interval: 3000,\n    autoPlay: true,\n    swipeScrollTolerance: FinalImageData.length,\n    key: `localPromos-slide-local`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, FinalImageData.map((promo, index) => {\n    console.log(\"pro\", promo);\n    return /*#__PURE__*/React.createElement(PromoCard, {\n      key: `localPromos-slide-${promo.id}`,\n      index: index,\n      data: promo,\n      size: \"small\",\n      className: \"mx-1\",\n      bannerImage: FinalImageData,\n      slideType: \"localPromos\",\n      type: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 18\n      }\n    });\n  })), /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'LOCAL PROMOS',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }), localPromos.length ? /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel promoCarousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: localSliderPercentage,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    showStatus: false,\n    showThumbs: false,\n    interval: 3000,\n    autoPlay: true,\n    swipeScrollTolerance: localPromos.length,\n    key: `localPromos-slide-local`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, localPromos.map((promo, index) => {\n    // console.log('localdata map running', promo)\n    return /*#__PURE__*/React.createElement(PromoCard, {\n      key: `localPromos-slide-${promo.id}`,\n      index: index,\n      data: promo,\n      size: \"small\",\n      className: \"mx-1\",\n      slideType: \"localPromos\",\n      type: \"local\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    });\n  })) : '');\n};\n\n__signature__(_default, \"useState{[localSliderPercentage, setLocalSliderPercentage](100)}\\nuseGlobalStore{{\\r\\n    offer: offerStore,\\r\\n    provider: providerStore,\\r\\n    pathway: pathwayStore,\\r\\n  }}\\nuseState{[bannerImage, setBannerImage]({})}\\nuseEffect{}\\nuseEffect{}\", () => [useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(axios, \"axios\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoCarouselsContainer/PromoCarouselsContainer.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoCarouselsContainer/PromoCarouselsContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoCarouselsContainer/PromoCarouselsContainer.js"],"names":["React","useEffect","useState","useGlobalStore","Carousel","TitleDivider","PromoCard","axios","require","default","props","localSliderPercentage","setLocalSliderPercentage","offerStore","offer","providerStore","provider","pathwayStore","pathway","bannerImage","setBannerImage","activePageId","getBannerApi","Data","post","process","env","REACT_APP_API_URL","offers","Object","values","entities","map","o","entity_type","providers","p","pathways","data","localPromos","filter","d","custom_page_local_ids","includes","id","mainPromos","custom_page_promo_ids","console","log","handleSliderPercentOnResize","window","innerWidth","addEventListener","removeEventListener","newA","windowUrl","location","pathname","split","pop","then","resp","status","output","s","banner_image","landing_image","image_url","page_url_check","defaultFilterData","length","newItem","push","catch","error","concat","arrays","Array","isArray","FinalImageData","promo","index","middleSpan"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport { TitleDivider } from 'components/shared';\r\nimport PromoCard from 'components/promotion/PromoCard/PromoCard';\r\nimport 'assets/scss/responsive-carousel-override.scss';\r\nimport './promo-carousels-container.scss';\r\nconst axios = require('axios').default;\r\n\r\nexport default function (props) {\r\n  const [localSliderPercentage, setLocalSliderPercentage] = useState(100);\r\n  const {\r\n    offer: offerStore,\r\n    provider: providerStore,\r\n    pathway: pathwayStore,\r\n  } = useGlobalStore();\r\n  const [bannerImage, setBannerImage] = useState({})\r\n  let { activePageId } = props;\r\n  //  console.log(\"------------\",pathwayStore)\r\n\r\n  const getBannerApi = async () => {\r\n    // let token = JSON.parse(localStorage.getItem(\"currentSession\"))\r\n    // let user_id = token.id\r\n    // let user_role = token.role\r\n    let Data = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/get_images_list`)\r\n    return Data\r\n  }\r\n  const offers = Object.values(offerStore.entities).map((o) => {\r\n    return {\r\n      ...o,\r\n      entity_type: 'offer',\r\n    };\r\n  });\r\n\r\n  const providers = Object.values(providerStore.entities).map((p) => {\r\n    return {\r\n      ...p,\r\n      entity_type: 'provider',\r\n    };\r\n  });\r\n\r\n  const pathways = Object.values(pathwayStore.entities).map((p) => {\r\n    return {\r\n      ...p,\r\n      entity_type: 'pathway',\r\n    };\r\n  });\r\n\r\n  const data = [...offers, ...pathways, ...providers];\r\n\r\n  const localPromos = data.filter((d) => {\r\n    return d.custom_page_local_ids.includes(activePageId.id);\r\n  });\r\n\r\n  const mainPromos = data.filter((d) => {\r\n    return d.custom_page_promo_ids.includes(activePageId.id);\r\n  });\r\n  console.log(\"mainPromos\",activePageId)\r\n\r\n  useEffect(() => {\r\n    const handleSliderPercentOnResize = () => {\r\n      if (window.innerWidth >= 769) {\r\n        setLocalSliderPercentage(34);\r\n      } else {\r\n        setLocalSliderPercentage(100);\r\n      }\r\n    };\r\n\r\n    if (window.innerWidth >= 769) {\r\n      setLocalSliderPercentage(34);\r\n    } else {\r\n      setLocalSliderPercentage(100);\r\n    }\r\n\r\n    window.addEventListener('resize', handleSliderPercentOnResize);\r\n\r\n    return () =>\r\n      window.removeEventListener('resize', handleSliderPercentOnResize);\r\n  }, [localSliderPercentage]);\r\n let newA = []\r\n let windowUrl = window.location.pathname\r\n windowUrl = windowUrl.split('/').pop()\r\n console.log(\"inssssssssss\",windowUrl)\r\n\r\n  useEffect(() => {\r\n    getBannerApi().then(async resp => {\r\n      if (resp.status === 200) {\r\n        var output = await resp.data.data.map(s => ({ banner_image: s.landing_image, id: s.id, image_url: s.image_url,page_url_check: s.page_url_check }));\r\n        var defaultFilterData = await output && output.length && output.map(newItem => {\r\n          if(newItem.page_url_check === windowUrl){\r\n            console.log(\"inside\",newItem)\r\n            newA.push(newItem)\r\n            setBannerImage(newA)\r\n          }else if(windowUrl == \"home\" && newItem.page_url_check == \"default\"){\r\n            console.log(\"outside\",newItem)\r\n            newA.push(newItem)\r\n            setBannerImage(newA)\r\n          }\r\n        })\r\n      }\r\n    }).catch(error => {\r\n      console.log(\"errror\", error)\r\n    })\r\n  }, [])\r\n\r\n  console.log(\"bannerImage\",windowUrl)\r\n  // console.log('mainPromos',mainPromos)\r\n  const concat = (...arrays) => [].concat(...arrays.filter(Array.isArray));\r\n  // console.log(concat(bannerImage, mainPromos),\"zzzzzzzzzzzzzzzzz\");\r\n  const FinalImageData = concat( mainPromos)\r\n  // console.log('localPromos', localPromos)\r\n\r\n    // const finalPromoData = localPromos.filter(function (item, index, inputArray) {\r\n    //   if (item === null || item === undefined) {\r\n    //     return false\r\n    //   } else {\r\n    //     return inputArray.indexOf(item) == index;\r\n    //   }\r\n    // });\r\n\r\n     console.log(\"FinalImageData\",FinalImageData)\r\n  return (\r\n    <div className=\"h-auto w-full\">\r\n      <Carousel\r\n         className=\"custom-carousel promoCarousel mb-2 cursor-grab\"\r\n         centerMode\r\n         infiniteLoop\r\n         centerSlidePercentage={100}\r\n         showArrows={true}\r\n         showIndicators={false}\r\n         swipeable={true}\r\n         emulateTouch={true}\r\n         showStatus={false}\r\n         showThumbs={false}\r\n         interval={3000}\r\n         autoPlay={true}\r\n         swipeScrollTolerance={FinalImageData.length}\r\n         key={`localPromos-slide-local`}\r\n         >\r\n        {FinalImageData.map((promo, index) => {\r\n          console.log(\"pro\", promo)\r\n          return <PromoCard key={`localPromos-slide-${promo.id}`} index={index} data={promo} size=\"small\" className=\"mx-1\"  bannerImage={FinalImageData} slideType='localPromos' type=\"main\" />;\r\n        })}\r\n      </Carousel>\r\n      <TitleDivider\r\n        title={'LOCAL PROMOS'}\r\n        align=\"center\"\r\n        classNames={{ middleSpan: 'text-base' }}\r\n      />\r\n\r\n      {localPromos.length ? <Carousel\r\n        className=\"custom-carousel promoCarousel mb-2 cursor-grab\"\r\n        centerMode\r\n        infiniteLoop\r\n        centerSlidePercentage={localSliderPercentage}\r\n        showArrows={true}\r\n        showIndicators={false}\r\n        swipeable={true}\r\n        emulateTouch={true}\r\n        showStatus={false}\r\n        showThumbs={false}\r\n        interval={3000}\r\n        autoPlay={true}\r\n        swipeScrollTolerance={localPromos.length}\r\n        key={`localPromos-slide-local`}\r\n      >\r\n        {localPromos.map((promo, index) => {\r\n          // console.log('localdata map running', promo)\r\n          return (\r\n            <PromoCard key={`localPromos-slide-${promo.id}`} index={index} data={promo} size=\"small\" className=\"mx-1\" slideType='localPromos' type=\"local\" />\r\n          );\r\n        })}\r\n      </Carousel>\r\n\r\n        : ''}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}