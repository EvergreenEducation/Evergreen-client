{"ast":null,"code":"/**\n * Remove parameters like `charset=utf-8` from the end of a mime type string.\n *\n * @param {string} mimeType - The mime type string that may have optional parameters.\n * @returns {string} The \"base\" mime type, i.e. only 'category/type'.\n */\nfunction removeMimeParameters(mimeType) {\n  return mimeType.replace(/;.*$/, '');\n}\n/**\n * Check if a response contains XML based on the response object and its text content.\n *\n * @param {string} content - The text body of the response.\n * @param {object|XMLHttpRequest} xhr - The XHR object or response object from Companion.\n * @returns {bool} Whether the content is (probably) XML.\n */\n\n\nfunction isXml(content, xhr) {\n  var rawContentType = xhr.headers ? xhr.headers['content-type'] : xhr.getResponseHeader('Content-Type');\n\n  if (typeof rawContentType === 'string') {\n    var contentType = removeMimeParameters(rawContentType).toLowerCase();\n\n    if (contentType === 'application/xml' || contentType === 'text/xml') {\n      return true;\n    } // GCS uses text/html for some reason\n    // https://github.com/transloadit/uppy/issues/896\n\n\n    if (contentType === 'text/html' && /^<\\?xml /.test(content)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nmodule.exports = isXml;","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/node_modules/@uppy/aws-s3/lib/isXml.js"],"names":["removeMimeParameters","mimeType","replace","isXml","content","xhr","rawContentType","headers","getResponseHeader","contentType","toLowerCase","test","module","exports"],"mappings":"AAAA;;;;;;AAMA,SAASA,oBAAT,CAA8BC,QAA9B,EAAwC;AACtC,SAAOA,QAAQ,CAACC,OAAT,CAAiB,MAAjB,EAAyB,EAAzB,CAAP;AACD;AACD;;;;;;;;;AASA,SAASC,KAAT,CAAeC,OAAf,EAAwBC,GAAxB,EAA6B;AAC3B,MAAIC,cAAc,GAAGD,GAAG,CAACE,OAAJ,GAAcF,GAAG,CAACE,OAAJ,CAAY,cAAZ,CAAd,GAA4CF,GAAG,CAACG,iBAAJ,CAAsB,cAAtB,CAAjE;;AAEA,MAAI,OAAOF,cAAP,KAA0B,QAA9B,EAAwC;AACtC,QAAIG,WAAW,GAAGT,oBAAoB,CAACM,cAAD,CAApB,CAAqCI,WAArC,EAAlB;;AAEA,QAAID,WAAW,KAAK,iBAAhB,IAAqCA,WAAW,KAAK,UAAzD,EAAqE;AACnE,aAAO,IAAP;AACD,KALqC,CAKpC;AACF;;;AAGA,QAAIA,WAAW,KAAK,WAAhB,IAA+B,WAAWE,IAAX,CAAgBP,OAAhB,CAAnC,EAA6D;AAC3D,aAAO,IAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiBV,KAAjB","sourcesContent":["/**\n * Remove parameters like `charset=utf-8` from the end of a mime type string.\n *\n * @param {string} mimeType - The mime type string that may have optional parameters.\n * @returns {string} The \"base\" mime type, i.e. only 'category/type'.\n */\nfunction removeMimeParameters(mimeType) {\n  return mimeType.replace(/;.*$/, '');\n}\n/**\n * Check if a response contains XML based on the response object and its text content.\n *\n * @param {string} content - The text body of the response.\n * @param {object|XMLHttpRequest} xhr - The XHR object or response object from Companion.\n * @returns {bool} Whether the content is (probably) XML.\n */\n\n\nfunction isXml(content, xhr) {\n  var rawContentType = xhr.headers ? xhr.headers['content-type'] : xhr.getResponseHeader('Content-Type');\n\n  if (typeof rawContentType === 'string') {\n    var contentType = removeMimeParameters(rawContentType).toLowerCase();\n\n    if (contentType === 'application/xml' || contentType === 'text/xml') {\n      return true;\n    } // GCS uses text/html for some reason\n    // https://github.com/transloadit/uppy/issues/896\n\n\n    if (contentType === 'text/html' && /^<\\?xml /.test(content)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nmodule.exports = isXml;"]},"metadata":{},"sourceType":"script"}