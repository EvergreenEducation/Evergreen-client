{"ast":null,"code":"import _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _findIndex from \"lodash/findIndex\";\nimport _last from \"lodash/last\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect } from 'react';\nimport { Button, Popconfirm } from 'antd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faImage } from '@fortawesome/free-regular-svg-icons';\nimport axiosInstance from 'services/AxiosInstance';\nimport useGlobalStore from 'store/GlobalStore';\nimport useAxios, { configure } from 'axios-hooks';\nimport './promote-card.scss';\n\nconst axios = require('axios').default;\n\nconfigure({\n  axios: axiosInstance\n});\n\nconst _default = function _default({\n  data = {},\n  session,\n  activePageId\n}) {\n  const _useGlobalStore = useGlobalStore(),\n        provider = _useGlobalStore.provider,\n        offer = _useGlobalStore.offer,\n        pathway = _useGlobalStore.pathway;\n\n  const adminId = session.id;\n\n  const update = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (id, endpoint, value, container, updateType) {\n      if (!id || !endpoint || !value) {\n        return;\n      }\n\n      console.log('daaaaaata', value); // let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\n      //   user_id = id,\n      //   custom_page_promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.custom_page_promo_ids.length ? value.custom_page_promo_ids[0] : null : null,\n      //   custom_page_local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.custom_page_local_ids.length ? value.custom_page_local_ids[0] : null : null,\n      //   custom_page_promo_routes = uniqueArray(value.custom_page_promo_routes);\n\n      let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\n          user_id = id,\n          custom_page_promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.custom_page_promo_ids && value.custom_page_promo_ids.length ? value.custom_page_promo_ids[0] : null : null,\n          custom_page_local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.custom_page_promo_ids && value.custom_page_local_ids.length ? value.custom_page_local_ids[0] : null : null,\n          custom_page_promo_routes = value.custom_page_promo_routes === undefined ? '' : value.custom_page_promo_routes[0];\n\n      if (updateType === 'reset') {\n        let data = value;\n        const response = yield axiosInstance.put(`/${endpoint}/${id}?scope=with_files`, data);\n        container.updateOne(response.data);\n        updatePromotionSetting(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes);\n        return response;\n      } else if (updateType === 'local') {\n        if (value.is_local_promo || value.is_local_promo === false || value.is_local_promo === true) {\n          let data = {\n            is_local_promo: value.is_local_promo,\n            local_promoted_by_user_ids: value.local_promoted_by_user_ids\n          };\n          const response = yield axiosInstance.put(`/${endpoint}/${id}?scope=with_files`, data);\n          container.updateOne(response.data);\n          updatePromotionSetting(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes);\n          return response;\n        }\n      } else if (updateType === 'main') {\n        if (value.is_main_promo || value.is_main_promo === false || value.is_main_promo === true) {\n          let data = {\n            is_main_promo: value.is_main_promo,\n            main_promoted_by_user_ids: value.main_promoted_by_user_ids\n          };\n          const response = yield axiosInstance.put(`/${endpoint}/${id}?scope=with_files`, data);\n          container.updateOne(response.data);\n          updatePromotionSetting(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes);\n          return response;\n        }\n      } else {}\n    });\n\n    return function update(_x, _x2, _x3, _x4, _x5) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function uniqueArray(idArray) {\n    idArray = idArray.filter(function (item, index, inputArray) {\n      return inputArray.indexOf(item) == index;\n    });\n    return idArray;\n  }\n\n  const removeAdminId = (nameOfUserIdArr, userIdsArr, incomingPromoData) => {\n    const foundAdminIndex = _findIndex(userIdsArr, function (item) {\n      return item === adminId;\n    });\n\n    const newMainPromotedByUserIds = userIdsArr;\n    newMainPromotedByUserIds.splice(foundAdminIndex, 1);\n    return _objectSpread(_objectSpread({}, incomingPromoData), {}, {\n      [nameOfUserIdArr]: newMainPromotedByUserIds\n    });\n  };\n\n  const includeAdminId = (promoData, nameOfUserIdArr, userIdArr) => {\n    if (userIdArr) {\n      const newObj = _objectSpread(_objectSpread({}, promoData), {}, {\n        [nameOfUserIdArr]: [...userIdArr, adminId]\n      });\n\n      return newObj;\n    }\n  };\n\n  function togglePromo(data, promoType) {\n    const is_local_promo = data.is_local_promo,\n          entity_type = data.entity_type,\n          is_main_promo = data.is_main_promo,\n          local_promoted_by_user_ids = data.local_promoted_by_user_ids,\n          main_promoted_by_user_ids = data.main_promoted_by_user_ids;\n    let localPromoData = {\n      is_local_promo: !is_local_promo\n    };\n    let mainPromoData = {\n      is_main_promo: !is_main_promo\n    };\n    const resetPromoData = {\n      is_main_promo: false,\n      is_local_promo: false,\n      local_promoted_by_user_ids: [],\n      main_promoted_by_user_ids: []\n    },\n          idLocalArray = [],\n          routeArray = [],\n          promoIdArray = [];\n\n    if (entity_type === 'offer') {\n      if (promoType === 'local') {\n        if (localPromoData.is_local_promo) {\n          localPromoData = includeAdminId(localPromoData, 'local_promoted_by_user_ids', local_promoted_by_user_ids);\n        } else {\n          localPromoData = removeAdminId('local_promoted_by_user_ids', local_promoted_by_user_ids, localPromoData);\n        }\n\n        if (localPromoData) {\n          idLocalArray.push(activePageId.id);\n          routeArray.push(activePageId.page_route); // localPromoData.custom_page_local_ids = idLocalArray;\n          // localPromoData.custom_page_promo_routes = routeArray;\n          //       localPromoData.custom_page_local_ids = activePageId.id;\n          // localPromoData.custom_page_promo_routes = activePageId.page_route;\n        } // localPromoData.id = activePageId.id;\n        // localPromoData.page_route = activePageId.page_route;\n\n\n        return update(data.id, 'offers', localPromoData, offer, 'local');\n      }\n\n      if (promoType === 'main') {\n        if (mainPromoData.is_main_promo) {\n          mainPromoData = includeAdminId(mainPromoData, 'main_promoted_by_user_ids', main_promoted_by_user_ids);\n        } else {\n          mainPromoData = removeAdminId('main_promoted_by_user_ids', main_promoted_by_user_ids, mainPromoData);\n        }\n\n        if (mainPromoData) {\n          promoIdArray.push(activePageId.id);\n          routeArray.push(activePageId.page_route);\n          mainPromoData.custom_page_promo_ids = promoIdArray;\n          mainPromoData.custom_page_promo_routes = routeArray;\n        } // mainPromoData.id = activePageId.id;\n        // mainPromoData.page_route = activePageId.page_route;\n\n\n        return update(data.id, 'offers', mainPromoData, offer, 'main');\n      }\n\n      resetPromoData.id = activePageId.id;\n      resetPromoData.page_route = activePageId.page_route;\n      return update(data.id, 'offers', resetPromoData, offer, 'reset');\n    }\n\n    if (entity_type === 'provider') {\n      if (promoType === 'local') {\n        if (localPromoData.is_local_promo) {\n          localPromoData = includeAdminId(localPromoData, 'local_promoted_by_user_ids', local_promoted_by_user_ids);\n        } else {\n          localPromoData = removeAdminId('local_promoted_by_user_ids', local_promoted_by_user_ids, localPromoData);\n        }\n\n        if (localPromoData) {\n          idLocalArray.push(activePageId.id);\n          routeArray.push(activePageId.page_route);\n          localPromoData.custom_page_local_ids = idLocalArray;\n          localPromoData.custom_page_promo_routes = routeArray; // idLocalArray.push(activePageId.id);\n          // debugger\n          // localPromoData.id = activePageId.id;\n          // localPromoData.page_route = activePageId.page_route;\n        }\n\n        return update(data.id, 'providers', localPromoData, provider, 'local');\n      }\n\n      if (promoType === 'main') {\n        if (mainPromoData.is_main_promo) {\n          mainPromoData = includeAdminId(mainPromoData, 'main_promoted_by_user_ids', main_promoted_by_user_ids);\n        } else {\n          mainPromoData = removeAdminId('main_promoted_by_user_ids', main_promoted_by_user_ids, mainPromoData);\n        }\n\n        if (mainPromoData) {\n          promoIdArray.push(activePageId.id);\n          routeArray.push(activePageId.page_route);\n          mainPromoData.custom_page_promo_ids = promoIdArray;\n          mainPromoData.custom_page_promo_routes = routeArray; // promoIdArray.push(activePageId.id);\n          // debugger\n          // mainPromoData.id = activePageId.id;\n          // mainPromoData.page_route = activePageId.page_route;\n        }\n\n        return update(data.id, 'providers', mainPromoData, provider, 'main');\n      }\n\n      resetPromoData.id = activePageId.id;\n      resetPromoData.page_route = activePageId.page_route;\n      return update(data.id, 'providers', resetPromoData, provider, 'reset');\n    }\n\n    if (entity_type === 'pathway') {\n      if (promoType === 'local') {\n        if (localPromoData.is_local_promo) {\n          localPromoData = includeAdminId(localPromoData, 'local_promoted_by_user_ids', local_promoted_by_user_ids);\n        } else {\n          localPromoData = removeAdminId('local_promoted_by_user_ids', local_promoted_by_user_ids, localPromoData);\n        }\n\n        if (localPromoData) {\n          idLocalArray.push(activePageId.id);\n          routeArray.push(activePageId.page_route);\n          localPromoData.custom_page_local_ids = idLocalArray;\n          localPromoData.custom_page_promo_routes = routeArray; // localPromoData.id = activePageId.id;\n          // localPromoData.page_route = activePageId.page_route;\n        }\n\n        return update(data.id, 'pathways', localPromoData, pathway, 'local');\n      }\n\n      if (promoType === 'main') {\n        if (mainPromoData.is_main_promo) {\n          mainPromoData = includeAdminId(mainPromoData, 'main_promoted_by_user_ids', main_promoted_by_user_ids);\n        } else {\n          mainPromoData = removeAdminId('main_promoted_by_user_ids', main_promoted_by_user_ids, mainPromoData);\n        }\n\n        if (mainPromoData) {\n          promoIdArray.push(activePageId.id);\n          routeArray.push(activePageId.page_route);\n          mainPromoData.custom_page_promo_ids = promoIdArray;\n          mainPromoData.custom_page_promo_routes = routeArray; // mainPromoData.id = activePageId.id;\n          // mainPromoData.page_route = activePageId.page_route;\n        } // mainPromoData.id = activePageId.id;\n        // mainPromoData.page_route = activePageId.page_route;\n\n\n        return update(data.id, 'pathways', mainPromoData, pathway, 'main');\n      }\n\n      resetPromoData.id = activePageId.id;\n      resetPromoData.page_route = activePageId.page_route;\n      return update(data.id, 'pathways', resetPromoData, pathway, 'reset');\n    }\n\n    return;\n  }\n\n  function confirm(e) {\n    togglePromo(data);\n  }\n\n  let themeBorder = 'promote-card--offerBorder';\n  let themeBackground = 'promote-card--offerBg';\n\n  if (data && data.entity_type === 'provider') {\n    themeBorder = 'promote-card--providerBorder';\n    themeBackground = 'promote-card--providerBg';\n  }\n\n  if (data && data.entity_type === 'pathway') {\n    themeBorder = 'promote-card--pathwayBorder';\n    themeBackground = 'promote-card--pathwayBg';\n  } // update promo route api\n\n\n  const updatePromoRoute = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) {\n      let Data = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/update_promo_route`, {\n        type,\n        user_id,\n        custom_page_promo_ids,\n        custom_page_local_ids,\n        custom_page_promo_routes\n      });\n      return Data;\n    });\n\n    return function updatePromoRoute(_x6, _x7, _x8, _x9, _x10) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  const updatePromotionSetting = (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\n    updatePromoRoute(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes).then(res => {\n      console.log('updatePromotionSetting res', updatePromotionSetting);\n    }).catch(err => {\n      console.log('updatePromoRoute err', err);\n    });\n  };\n\n  function checkCardIdMatchWithSelectedUrl() {\n    let custom_page_promo_ids = data.custom_page_promo_ids,\n        custom_page_local_ids = data.custom_page_local_ids,\n        is_local_promo = data.is_local_promo,\n        is_main_promo = data.is_main_promo,\n        id = activePageId.id,\n        isBothTrue = is_local_promo && is_main_promo,\n        isLocalPromoTrue = isBothTrue ? false : is_local_promo,\n        isMainPromo = isBothTrue ? false : is_main_promo,\n        idAvialableInPagePromos = false,\n        idAvialableInLocalPromos = false;\n\n    if (isBothTrue) {\n      if (custom_page_promo_ids && custom_page_promo_ids.length) {\n        let index = custom_page_promo_ids.indexOf(id);\n\n        if (index === -1) {\n          idAvialableInPagePromos = false;\n        } else {\n          idAvialableInPagePromos = true;\n        }\n      }\n\n      if (custom_page_local_ids && custom_page_local_ids.length) {\n        let index = custom_page_local_ids.indexOf(id);\n\n        if (index === -1) {\n          idAvialableInLocalPromos = false;\n        } else {\n          idAvialableInLocalPromos = true;\n        }\n      }\n\n      if (idAvialableInPagePromos && idAvialableInLocalPromos) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (isLocalPromoTrue) {\n      if (custom_page_local_ids && custom_page_local_ids.length) {\n        let index = custom_page_local_ids.indexOf(id);\n\n        if (index === -1) {\n          idAvialableInLocalPromos = false;\n        } else {\n          idAvialableInLocalPromos = true;\n        }\n\n        return idAvialableInLocalPromos;\n      }\n    } else if (isMainPromo) {\n      if (custom_page_promo_ids && custom_page_promo_ids.length) {\n        let index = custom_page_promo_ids.indexOf(id);\n\n        if (index === -1) {\n          idAvialableInPagePromos = false;\n        } else {\n          idAvialableInPagePromos = true;\n        }\n\n        return idAvialableInPagePromos;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  function setLocalMainArray(data) {\n    let custom_page_promo_ids = data.custom_page_promo_ids,\n        custom_page_local_ids = data.custom_page_local_ids,\n        localPromotionArray = [],\n        mainPromotionArray = [];\n\n    if (custom_page_promo_ids) {\n      if (custom_page_promo_ids.length) {\n        mainPromotionArray = uniqueMainLocalArray(custom_page_promo_ids);\n      }\n    }\n\n    if (custom_page_local_ids) {\n      if (custom_page_local_ids.length) {\n        localPromotionArray = uniqueMainLocalArray(custom_page_local_ids);\n      }\n    }\n\n    if (localPromotionArray.length || mainPromotionArray.length) {\n      let isLocalTrue = localPromotionArray.indexOf(activePageId.id),\n          isMainTrue = mainPromotionArray.indexOf(activePageId.id);\n\n      if (isLocalTrue === -1 && isMainTrue === -1) {\n        return false;\n      } else if (isLocalTrue === -1) {\n        return false;\n      } else if (isMainTrue === -1) {\n        return false;\n      } else if (isMainTrue !== -1 && isLocalTrue !== -1) {\n        return true;\n      } else if (isLocalTrue !== -1) {\n        return true;\n      } else if (isMainTrue !== -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  function uniqueMainLocalArray(idArray) {\n    idArray = idArray.filter(function (item, index, inputArray) {\n      if (item === null || item === undefined) {\n        return false;\n      } else {\n        return inputArray.indexOf(item) == index;\n      }\n    });\n    return idArray;\n  }\n\n  let buttonActive = setLocalMainArray(data);\n  console.log('buttonActive', buttonActive);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `promote-card h-auto w-48 mr-3 mb-3 rounded border border-solid ${themeBorder} shadow`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: `py-1 px-2 text-center capitalize ${themeBackground}`,\n    style: {\n      borderTopRightRadius: '0.20rem',\n      borderTopLeftRadius: '0.20rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }\n  }, data && data.entity_type ? data.entity_type : ''), /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"block bg-gray-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }\n  }, data && data.Files && data.Files.length && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"object-cover mx-auto\",\n    style: {\n      height: 112\n    },\n    src: data.Files && data.Files.length ? _last(data.Files).file_link : null,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 11\n    }\n  }) || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mx-auto p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-6xl text-gray-400 mx-auto block\",\n    icon: faImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col pb-2 px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-base break-all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 9\n    }\n  }, data && data.name ? data.name : '---'), /*#__PURE__*/React.createElement(\"footer\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    className: `mr-1 rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--main ${data && data.is_main_promo ? 'promote-card--toggledMain shadow-inner' : 'promote-card--notToggled shadow-md'}`,\n    onClick: () => {\n      if (data) {\n        togglePromo(data, 'main');\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 11\n    }\n  }, \"main\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    className: `rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--local ${data && data.is_local_promo ? 'promote-card--toggledLocal shadow-inner' : 'promote-card--notToggled shadow-md'}`,\n    onClick: () => {\n      if (data) {\n        togglePromo(data, 'local');\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 11\n    }\n  }, \"local\"), /*#__PURE__*/React.createElement(Popconfirm, {\n    title: \"Are you sure?\",\n    onConfirm: confirm,\n    okText: \"Yes\",\n    cancelText: \"No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"link\",\n    size: \"small\",\n    danger: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 13\n    }\n  }, \"reset\")))));\n};\n\n__signature__(_default, \"useGlobalStore{{ provider, offer, pathway }}\", () => [useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(axios, \"axios\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js"],"names":["React","useEffect","Button","Popconfirm","FontAwesomeIcon","faImage","axiosInstance","useGlobalStore","useAxios","configure","axios","require","default","data","session","activePageId","provider","offer","pathway","adminId","id","update","endpoint","value","container","updateType","console","log","type","user_id","custom_page_promo_ids","is_main_promo","undefined","length","custom_page_local_ids","is_local_promo","custom_page_promo_routes","response","put","updateOne","updatePromotionSetting","local_promoted_by_user_ids","main_promoted_by_user_ids","uniqueArray","idArray","filter","item","index","inputArray","indexOf","removeAdminId","nameOfUserIdArr","userIdsArr","incomingPromoData","foundAdminIndex","newMainPromotedByUserIds","splice","includeAdminId","promoData","userIdArr","newObj","togglePromo","promoType","entity_type","localPromoData","mainPromoData","resetPromoData","idLocalArray","routeArray","promoIdArray","push","page_route","confirm","e","themeBorder","themeBackground","updatePromoRoute","Data","post","process","env","REACT_APP_API_URL","then","res","catch","err","checkCardIdMatchWithSelectedUrl","isBothTrue","isLocalPromoTrue","isMainPromo","idAvialableInPagePromos","idAvialableInLocalPromos","setLocalMainArray","localPromotionArray","mainPromotionArray","uniqueMainLocalArray","isLocalTrue","isMainTrue","buttonActive","borderTopRightRadius","borderTopLeftRadius","Files","height","file_link","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Button, Popconfirm } from 'antd';\r\nimport { last, findIndex } from 'lodash';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faImage } from '@fortawesome/free-regular-svg-icons';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport useAxios, { configure } from 'axios-hooks';\r\n\r\nimport './promote-card.scss';\r\n\r\nconst axios = require('axios').default;\r\n\r\nconfigure({\r\n  axios: axiosInstance,\r\n});\r\n\r\nexport default function ({ data = {}, session, activePageId }) {\r\n  const { provider, offer, pathway } = useGlobalStore();\r\n  const adminId = session.id;\r\n\r\n  const update = async (id, endpoint, value, container,updateType) => {\r\n    if (!id || !endpoint || !value) {\r\n      return;\r\n    }\r\n    console.log('daaaaaata', value);\r\n    \r\n    // let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\r\n    //   user_id = id,\r\n    //   custom_page_promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.custom_page_promo_ids.length ? value.custom_page_promo_ids[0] : null : null,\r\n    //   custom_page_local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.custom_page_local_ids.length ? value.custom_page_local_ids[0] : null : null,\r\n    //   custom_page_promo_routes = uniqueArray(value.custom_page_promo_routes);\r\n    \r\n    let type=endpoint===\"offers\"?\"offer\":endpoint===\"providers\"?\"provider\":endpoint===\"pathways\"?\"pathway\":null,\r\n    user_id=id,\r\n    custom_page_promo_ids= value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.custom_page_promo_ids&& value.custom_page_promo_ids.length?value.custom_page_promo_ids[0] :null:null,\r\n    custom_page_local_ids=value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ?value.custom_page_promo_ids&& value.custom_page_local_ids.length?value.custom_page_local_ids[0] :null:null,\r\n    custom_page_promo_routes=value.custom_page_promo_routes === undefined? '':value.custom_page_promo_routes[0];\r\n\r\n    if(updateType === 'reset'){\r\n      let data=value;\r\n      const response = await axiosInstance.put(\r\n        `/${endpoint}/${id}?scope=with_files`,\r\n        data\r\n      );\r\n      container.updateOne(response.data);\r\n      updatePromotionSetting(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes);\r\n      return response;\r\n    }else if(updateType === 'local'){\r\n      if(value.is_local_promo || value.is_local_promo===false || value.is_local_promo===true){\r\n        let data={\r\n          is_local_promo:value.is_local_promo,\r\n          local_promoted_by_user_ids:value.local_promoted_by_user_ids\r\n        }\r\n        const response = await axiosInstance.put(\r\n          `/${endpoint}/${id}?scope=with_files`,\r\n          data\r\n        );\r\n        container.updateOne(response.data);\r\n        updatePromotionSetting(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes);\r\n        return response;\r\n      }\r\n    }else if(updateType === 'main'){\r\n      if(value.is_main_promo || value.is_main_promo===false || value.is_main_promo===true){\r\n        let data={\r\n          is_main_promo:value.is_main_promo,\r\n          main_promoted_by_user_ids:value.main_promoted_by_user_ids\r\n        }\r\n        const response = await axiosInstance.put(\r\n          `/${endpoint}/${id}?scope=with_files`,\r\n          data\r\n        );\r\n        container.updateOne(response.data);\r\n        updatePromotionSetting(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes);\r\n        return response;\r\n      }\r\n    }else{\r\n      \r\n    }\r\n  };\r\n\r\n  function uniqueArray(idArray) {\r\n    idArray = idArray.filter(function (item, index, inputArray) {\r\n      return inputArray.indexOf(item) == index;\r\n    });\r\n    return idArray\r\n  }\r\n\r\n  const removeAdminId = (nameOfUserIdArr, userIdsArr, incomingPromoData) => {\r\n    const foundAdminIndex = findIndex(userIdsArr, function (item) {\r\n      return item === adminId;\r\n    });\r\n    const newMainPromotedByUserIds = userIdsArr;\r\n    newMainPromotedByUserIds.splice(foundAdminIndex, 1);\r\n    return {\r\n      ...incomingPromoData,\r\n      [nameOfUserIdArr]: newMainPromotedByUserIds,\r\n    };\r\n  };\r\n\r\n  const includeAdminId = (promoData, nameOfUserIdArr, userIdArr) => {\r\n    if (userIdArr) {\r\n      const newObj = {\r\n        ...promoData,\r\n        [nameOfUserIdArr]: [...userIdArr, adminId],\r\n      };\r\n      return newObj;\r\n    }\r\n  };\r\n\r\n  function togglePromo(data, promoType) {\r\n    const {\r\n      is_local_promo,\r\n      entity_type,\r\n      is_main_promo,\r\n      local_promoted_by_user_ids,\r\n      main_promoted_by_user_ids,\r\n    } = data;\r\n    let localPromoData = { is_local_promo: !is_local_promo };\r\n    let mainPromoData = { is_main_promo: !is_main_promo };\r\n    const resetPromoData = {\r\n      is_main_promo: false,\r\n      is_local_promo: false,\r\n      local_promoted_by_user_ids: [],\r\n      main_promoted_by_user_ids: [],\r\n    }, idLocalArray = [], routeArray = [], promoIdArray = [];\r\n\r\n    if (entity_type === 'offer') {\r\n      if (promoType === 'local') {\r\n        if (localPromoData.is_local_promo) {\r\n          localPromoData = includeAdminId(\r\n            localPromoData,\r\n            'local_promoted_by_user_ids',\r\n            local_promoted_by_user_ids\r\n          );\r\n        } else {\r\n          localPromoData = removeAdminId(\r\n            'local_promoted_by_user_ids',\r\n            local_promoted_by_user_ids,\r\n            localPromoData\r\n          );\r\n        }\r\n        if (localPromoData) {\r\n          idLocalArray.push(activePageId.id);\r\n          routeArray.push(activePageId.page_route);\r\n          // localPromoData.custom_page_local_ids = idLocalArray;\r\n          // localPromoData.custom_page_promo_routes = routeArray;\r\n          //       localPromoData.custom_page_local_ids = activePageId.id;\r\n          // localPromoData.custom_page_promo_routes = activePageId.page_route;\r\n        }\r\n        // localPromoData.id = activePageId.id;\r\n        // localPromoData.page_route = activePageId.page_route;\r\n        return update(data.id, 'offers', localPromoData, offer,'local');\r\n      }\r\n      if (promoType === 'main') {\r\n        if (mainPromoData.is_main_promo) {\r\n          mainPromoData = includeAdminId(\r\n            mainPromoData,\r\n            'main_promoted_by_user_ids',\r\n            main_promoted_by_user_ids\r\n          );\r\n        } else {\r\n          mainPromoData = removeAdminId(\r\n            'main_promoted_by_user_ids',\r\n            main_promoted_by_user_ids,\r\n            mainPromoData\r\n          );\r\n        }\r\n        if (mainPromoData) {\r\n          promoIdArray.push(activePageId.id);\r\n          routeArray.push(activePageId.page_route);\r\n          mainPromoData.custom_page_promo_ids = promoIdArray;\r\n          mainPromoData.custom_page_promo_routes = routeArray;\r\n        }\r\n        // mainPromoData.id = activePageId.id;\r\n        // mainPromoData.page_route = activePageId.page_route;\r\n        return update(data.id, 'offers', mainPromoData, offer,'main');\r\n      }\r\n      resetPromoData.id = activePageId.id;\r\n      resetPromoData.page_route = activePageId.page_route;\r\n      return update(data.id, 'offers', resetPromoData, offer,'reset');\r\n    }\r\n    if (entity_type === 'provider') {\r\n      if (promoType === 'local') {\r\n        if (localPromoData.is_local_promo) {\r\n          localPromoData = includeAdminId(\r\n            localPromoData,\r\n            'local_promoted_by_user_ids',\r\n            local_promoted_by_user_ids\r\n          );\r\n        } else {\r\n          localPromoData = removeAdminId(\r\n            'local_promoted_by_user_ids',\r\n            local_promoted_by_user_ids,\r\n            localPromoData\r\n          );\r\n        }\r\n        if (localPromoData) {\r\n          idLocalArray.push(activePageId.id);\r\n          routeArray.push(activePageId.page_route);\r\n          localPromoData.custom_page_local_ids = idLocalArray;\r\n          localPromoData.custom_page_promo_routes = routeArray;\r\n          // idLocalArray.push(activePageId.id);\r\n          // debugger\r\n          // localPromoData.id = activePageId.id;\r\n          // localPromoData.page_route = activePageId.page_route;\r\n        }\r\n        return update(data.id, 'providers', localPromoData, provider,'local');\r\n      }\r\n      if (promoType === 'main') {\r\n        if (mainPromoData.is_main_promo) {\r\n          mainPromoData = includeAdminId(\r\n            mainPromoData,\r\n            'main_promoted_by_user_ids',\r\n            main_promoted_by_user_ids\r\n          );\r\n        } else {\r\n          mainPromoData = removeAdminId(\r\n            'main_promoted_by_user_ids',\r\n            main_promoted_by_user_ids,\r\n            mainPromoData\r\n          );\r\n        }\r\n        if (mainPromoData) {\r\n          promoIdArray.push(activePageId.id);\r\n          routeArray.push(activePageId.page_route);\r\n          mainPromoData.custom_page_promo_ids = promoIdArray;\r\n          mainPromoData.custom_page_promo_routes = routeArray;\r\n          // promoIdArray.push(activePageId.id);\r\n          // debugger\r\n          // mainPromoData.id = activePageId.id;\r\n          // mainPromoData.page_route = activePageId.page_route;\r\n        }\r\n\r\n        return update(data.id, 'providers', mainPromoData, provider,'main');\r\n      }\r\n      resetPromoData.id = activePageId.id;\r\n      resetPromoData.page_route = activePageId.page_route;\r\n      return update(data.id, 'providers', resetPromoData, provider,'reset');\r\n    }\r\n    if (entity_type === 'pathway') {\r\n      if (promoType === 'local') {\r\n        if (localPromoData.is_local_promo) {\r\n          localPromoData = includeAdminId(\r\n            localPromoData,\r\n            'local_promoted_by_user_ids',\r\n            local_promoted_by_user_ids\r\n          );\r\n        } else {\r\n          localPromoData = removeAdminId(\r\n            'local_promoted_by_user_ids',\r\n            local_promoted_by_user_ids,\r\n            localPromoData\r\n          );\r\n        }\r\n        if (localPromoData) {\r\n          idLocalArray.push(activePageId.id);\r\n          routeArray.push(activePageId.page_route);\r\n          localPromoData.custom_page_local_ids = idLocalArray;\r\n          localPromoData.custom_page_promo_routes = routeArray;\r\n          // localPromoData.id = activePageId.id;\r\n          // localPromoData.page_route = activePageId.page_route;\r\n        }\r\n        return update(data.id, 'pathways', localPromoData, pathway,'local');\r\n      }\r\n      if (promoType === 'main') {\r\n        if (mainPromoData.is_main_promo) {\r\n          mainPromoData = includeAdminId(\r\n            mainPromoData,\r\n            'main_promoted_by_user_ids',\r\n            main_promoted_by_user_ids\r\n          );\r\n        } else {\r\n          mainPromoData = removeAdminId(\r\n            'main_promoted_by_user_ids',\r\n            main_promoted_by_user_ids,\r\n            mainPromoData\r\n          );\r\n        }\r\n        if (mainPromoData) {\r\n          promoIdArray.push(activePageId.id);\r\n          routeArray.push(activePageId.page_route);\r\n          mainPromoData.custom_page_promo_ids = promoIdArray;\r\n          mainPromoData.custom_page_promo_routes = routeArray;\r\n          // mainPromoData.id = activePageId.id;\r\n          // mainPromoData.page_route = activePageId.page_route;\r\n        }\r\n        // mainPromoData.id = activePageId.id;\r\n        // mainPromoData.page_route = activePageId.page_route;\r\n        return update(data.id, 'pathways', mainPromoData, pathway,'main');\r\n      }\r\n      resetPromoData.id = activePageId.id;\r\n      resetPromoData.page_route = activePageId.page_route;\r\n      return update(data.id, 'pathways', resetPromoData, pathway,'reset');\r\n    }\r\n    return;\r\n  }\r\n\r\n  function confirm(e) {\r\n    togglePromo(data);\r\n  }\r\n\r\n  let themeBorder = 'promote-card--offerBorder';\r\n  let themeBackground = 'promote-card--offerBg';\r\n\r\n  if (data && data.entity_type === 'provider') {\r\n    themeBorder = 'promote-card--providerBorder';\r\n    themeBackground = 'promote-card--providerBg';\r\n  }\r\n\r\n  if (data && data.entity_type === 'pathway') {\r\n    themeBorder = 'promote-card--pathwayBorder';\r\n    themeBackground = 'promote-card--pathwayBg';\r\n  }\r\n\r\n  // update promo route api\r\n  const updatePromoRoute = async (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\r\n    let Data = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/update_promo_route`, {\r\n      type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes\r\n    })\r\n    return Data\r\n  }\r\n\r\n  const updatePromotionSetting = (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\r\n    updatePromoRoute(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes).then(res => {\r\n      console.log('updatePromotionSetting res', updatePromotionSetting)\r\n    }).catch(err => {\r\n      console.log('updatePromoRoute err', err)\r\n    })\r\n  }\r\n\r\n  function checkCardIdMatchWithSelectedUrl() {\r\n    let {\r\n      custom_page_promo_ids,\r\n      custom_page_local_ids,\r\n      is_local_promo,\r\n      is_main_promo\r\n      } = data,\r\n      {\r\n        id\r\n      } = activePageId,\r\n      isBothTrue = is_local_promo && is_main_promo,\r\n      // check if local and main are true then we set local false\r\n      isLocalPromoTrue = isBothTrue ? false : is_local_promo,\r\n      // check if local and main are true then we set main false\r\n      isMainPromo = isBothTrue ? false : is_main_promo,\r\n      idAvialableInPagePromos = false,\r\n      idAvialableInLocalPromos = false;\r\n\r\n    if (isBothTrue) {\r\n      if (custom_page_promo_ids && custom_page_promo_ids.length) {\r\n        let index = custom_page_promo_ids.indexOf(id);\r\n        if (index === -1) {\r\n          idAvialableInPagePromos = false;\r\n        } else {\r\n          idAvialableInPagePromos = true;\r\n        }\r\n      }\r\n      if (custom_page_local_ids && custom_page_local_ids.length) {\r\n        let index = custom_page_local_ids.indexOf(id);\r\n        if (index === -1) {\r\n          idAvialableInLocalPromos = false;\r\n        } else {\r\n          idAvialableInLocalPromos = true;\r\n        }\r\n      }\r\n      if (idAvialableInPagePromos && idAvialableInLocalPromos) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    } else if (isLocalPromoTrue) {\r\n      if (custom_page_local_ids && custom_page_local_ids.length) {\r\n        let index = custom_page_local_ids.indexOf(id);\r\n        if (index === -1) {\r\n          idAvialableInLocalPromos = false;\r\n        } else {\r\n          idAvialableInLocalPromos = true;\r\n        }\r\n        return idAvialableInLocalPromos;\r\n      }\r\n    } else if (isMainPromo) {\r\n      if (custom_page_promo_ids && custom_page_promo_ids.length) {\r\n        let index = custom_page_promo_ids.indexOf(id);\r\n        if (index === -1) {\r\n          idAvialableInPagePromos = false\r\n        } else {\r\n          idAvialableInPagePromos = true\r\n        }\r\n        return idAvialableInPagePromos;\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n\r\n  function setLocalMainArray(data){\r\n  let {custom_page_promo_ids,custom_page_local_ids}=data,\r\n  localPromotionArray=[],mainPromotionArray=[];\r\n    if(custom_page_promo_ids){\r\n      if(custom_page_promo_ids.length){\r\n        mainPromotionArray=uniqueMainLocalArray(custom_page_promo_ids);\r\n      }\r\n    }\r\n    if(custom_page_local_ids){\r\n      if(custom_page_local_ids.length){\r\n        localPromotionArray=uniqueMainLocalArray(custom_page_local_ids);\r\n      }\r\n    }\r\n\r\n    if(localPromotionArray.length || mainPromotionArray.length){\r\n      let isLocalTrue=localPromotionArray.indexOf(activePageId.id),\r\n      isMainTrue=mainPromotionArray.indexOf(activePageId.id);\r\n      if(isLocalTrue === -1 && isMainTrue === -1){\r\n        return false\r\n      }else if(isLocalTrue === -1 ){\r\n        return false\r\n      }else if(isMainTrue === -1){\r\n        return false\r\n      }else if(isMainTrue !== -1 && isLocalTrue !== -1){\r\n      return true\r\n      }else if(isLocalTrue !== -1 ){\r\n        return true\r\n      }else if(isMainTrue !== -1){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  function uniqueMainLocalArray(idArray) {\r\n    idArray = idArray.filter(function (item, index, inputArray) {\r\n      if(item === null || item ===undefined){\r\n        return false\r\n      }else{\r\n        return inputArray.indexOf(item) == index;\r\n      }\r\n    });\r\n    return idArray\r\n  }\r\n\r\n  let buttonActive=setLocalMainArray(data);\r\n  console.log('buttonActive',buttonActive)\r\n  return (\r\n    <div\r\n      className={`promote-card h-auto w-48 mr-3 mb-3 rounded border border-solid ${themeBorder} shadow`}\r\n    >\r\n      <header\r\n        className={`py-1 px-2 text-center capitalize ${themeBackground}`}\r\n        style={{\r\n          borderTopRightRadius: '0.20rem',\r\n          borderTopLeftRadius: '0.20rem',\r\n        }}\r\n      >\r\n        {data && data.entity_type ? data.entity_type : ''}\r\n      </header>\r\n      <figure className=\"block bg-gray-200\">\r\n        {(data && data.Files && data.Files.length && (\r\n          <img\r\n            className=\"object-cover mx-auto\"\r\n            style={{ height: 112 }}\r\n            src={\r\n              data.Files && data.Files.length\r\n                ? last(data.Files).file_link\r\n                : null\r\n            }\r\n            alt=\"\"\r\n          />\r\n        )) || (\r\n            <div className=\"mx-auto p-6\">\r\n              <FontAwesomeIcon\r\n                className=\"text-6xl text-gray-400 mx-auto block\"\r\n                icon={faImage}\r\n              />\r\n            </div>\r\n          )}\r\n      </figure>\r\n      <div className=\"flex flex-col pb-2 px-2\">\r\n        <span className=\"text-base break-all\">\r\n          {data && data.name ? data.name : '---'}\r\n        </span>\r\n        <footer>\r\n          <Button\r\n            size=\"small\"\r\n            className={`mr-1 rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--main ${\r\n              data && data.is_main_promo\r\n                ? 'promote-card--toggledMain shadow-inner'\r\n                : 'promote-card--notToggled shadow-md'\r\n              }`}\r\n            onClick={() => {\r\n              if (data) {\r\n                togglePromo(data, 'main');\r\n              }\r\n            }}\r\n          >\r\n            main\r\n          </Button>\r\n          <Button\r\n            size=\"small\"\r\n            className={`rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--local ${\r\n              data && data.is_local_promo\r\n                ? 'promote-card--toggledLocal shadow-inner'\r\n                : 'promote-card--notToggled shadow-md'\r\n              }`}\r\n            onClick={() => {\r\n              if (data) {\r\n                togglePromo(data, 'local');\r\n              }\r\n            }}\r\n          >\r\n            local\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Are you sure?\"\r\n            onConfirm={confirm}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button type=\"link\" size=\"small\" danger>\r\n              reset\r\n            </Button>\r\n          </Popconfirm>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}