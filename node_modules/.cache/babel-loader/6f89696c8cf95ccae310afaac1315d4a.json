{"ast":null,"code":"import _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _findIndex from \"lodash/findIndex\";\nimport _last from \"lodash/last\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect } from 'react';\nimport { Button, Popconfirm } from 'antd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faImage } from '@fortawesome/free-regular-svg-icons';\nimport axiosInstance from 'services/AxiosInstance';\nimport useGlobalStore from 'store/GlobalStore';\nimport useAxios, { configure } from 'axios-hooks';\nimport './promote-card.scss';\n\nconst axios = require('axios').default;\n\nconfigure({\n  axios: axiosInstance\n});\n\nconst _default = function _default({\n  data = {},\n  session,\n  activePageId,\n  type,\n  allApiCall\n}) {\n  const _useGlobalStore = useGlobalStore(),\n        provider = _useGlobalStore.provider,\n        offer = _useGlobalStore.offer,\n        pathway = _useGlobalStore.pathway;\n\n  const adminId = session.id;\n\n  const update = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (data, endpoint, value, container, updateType) {\n      let id = data.id,\n          custom_page_promo_ids = data.custom_page_promo_ids,\n          custom_page_local_ids = data.custom_page_local_ids;\n\n      if (!id || !endpoint || !value) {\n        return;\n      } // console.log('daaaaaata', value);\n      // let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\n      //   user_id = id,\n      //   custom_page_promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.custom_page_promo_ids.length ? value.custom_page_promo_ids[0] : null : null,\n      //   custom_page_local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.custom_page_local_ids.length ? value.custom_page_local_ids[0] : null : null,\n      //   custom_page_promo_routes = uniqueArray(value.custom_page_promo_routes);\n\n\n      let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\n          user_id = id,\n          promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.id : null,\n          local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.id : null,\n          custom_page_promo_routes = value.page_route === undefined ? null : value.page_route,\n          is_main_promo = custom_page_promo_ids ? custom_page_promo_ids.length ? custom_page_promo_ids.includes(value.id) : false : false,\n          is_local_promo = custom_page_local_ids ? custom_page_local_ids.length ? custom_page_local_ids.includes(value.id) : false : false;\n\n      if (updateType === 'reset') {\n        let data = value;\n        const response = yield axiosInstance.put(`/${endpoint}/${id}?scope=with_files`, data);\n        yield container.updateOne(response.data);\n        let promo = [],\n            local = [],\n            route = [];\n        promo.push(promo_ids);\n        local.push(local_ids);\n        route.push(custom_page_promo_routes); // console.log(promo,local,route,'promo_ids,local_ids,custom_page_promo_routes')\n\n        deletePromotionSetting(type, user_id, promo, local, route);\n        return response;\n      } else if (updateType === 'local') {\n        if (is_local_promo === false || is_local_promo === true) {\n          let data = {\n            is_local_promo: value.is_local_promo,\n            local_promoted_by_user_ids: value.local_promoted_by_user_ids\n          };\n          const response = yield axiosInstance.put(`/${endpoint}/${id}?scope=with_files`, data);\n          yield container.updateOne(response.data);\n\n          if (!is_local_promo === false) {\n            let promo = [],\n                local = [],\n                route = [];\n            promo.push(promo_ids);\n            local.push(local_ids);\n            route.push(custom_page_promo_routes); // console.log(promo,local,route,'promo_ids,local_ids,custom_page_promo_routes')\n\n            deletePromotionSetting(type, user_id, promo, local, route); // deletePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\n          } else {\n            updatePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\n          }\n\n          return response;\n        }\n      } else if (updateType === 'main') {\n        if (is_main_promo === false || is_main_promo === true) {\n          let data = {\n            is_main_promo: value.is_main_promo,\n            main_promoted_by_user_ids: value.main_promoted_by_user_ids\n          };\n          const response = yield axiosInstance.put(`/${endpoint}/${id}?scope=with_files`, data);\n          yield container.updateOne(response.data);\n\n          if (!is_main_promo === false) {\n            let promo = [],\n                local = [],\n                route = [];\n            promo.push(promo_ids);\n            local.push(local_ids);\n            route.push(custom_page_promo_routes); // console.log(promo,local,route,'promo_ids,local_ids,custom_page_promo_routes')\n\n            deletePromotionSetting(type, user_id, promo, local, route); // deletePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\n          } else {\n            updatePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\n          }\n\n          return response;\n        }\n      } else {}\n    });\n\n    return function update(_x, _x2, _x3, _x4, _x5) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function uniqueArray(idArray) {\n    idArray = idArray.filter(function (item, index, inputArray) {\n      if (item === null || item === undefined) {\n        return false;\n      } else {\n        return inputArray.indexOf(item) == index;\n      }\n    });\n    return idArray;\n  }\n\n  const removeAdminId = (nameOfUserIdArr, userIdsArr, incomingPromoData) => {\n    const foundAdminIndex = _findIndex(userIdsArr, function (item) {\n      return item === adminId;\n    });\n\n    const newMainPromotedByUserIds = userIdsArr;\n    newMainPromotedByUserIds.splice(foundAdminIndex, 1);\n    return _objectSpread(_objectSpread({}, incomingPromoData), {}, {\n      [nameOfUserIdArr]: newMainPromotedByUserIds\n    });\n  };\n\n  const includeAdminId = (promoData, nameOfUserIdArr, userIdArr) => {\n    if (userIdArr) {\n      const newObj = _objectSpread(_objectSpread({}, promoData), {}, {\n        [nameOfUserIdArr]: [...userIdArr, adminId]\n      });\n\n      return newObj;\n    }\n  };\n\n  function togglePromo(data, promoType) {\n    const is_local_promo = data.is_local_promo,\n          entity_type = data.entity_type,\n          is_main_promo = data.is_main_promo,\n          local_promoted_by_user_ids = data.local_promoted_by_user_ids,\n          main_promoted_by_user_ids = data.main_promoted_by_user_ids,\n          custom_page_promo_ids = data.custom_page_promo_ids,\n          custom_page_local_ids = data.custom_page_local_ids;\n    let localPromoData = {\n      is_local_promo: !is_local_promo\n    };\n    let mainPromoData = {\n      is_main_promo: !is_main_promo\n    };\n    const resetPromoData = {\n      is_main_promo: false,\n      is_local_promo: false,\n      local_promoted_by_user_ids: [],\n      main_promoted_by_user_ids: []\n    },\n          idLocalArray = [],\n          routeArray = [],\n          promoIdArray = [];\n\n    if (entity_type === 'offer') {\n      if (promoType === 'local') {\n        if (custom_page_local_ids) {\n          if (!custom_page_local_ids.includes(activePageId.id)) {\n            localPromoData = includeAdminId(localPromoData, 'local_promoted_by_user_ids', local_promoted_by_user_ids);\n          } else {\n            localPromoData = removeAdminId('local_promoted_by_user_ids', local_promoted_by_user_ids, localPromoData);\n          } // if (localPromoData) {\n          //   idLocalArray.push(activePageId.id);\n          //   routeArray.push(activePageId.page_route);\n          //   localPromoData.custom_page_local_ids = idLocalArray;\n          //   localPromoData.custom_page_promo_routes = routeArray;\n          // }\n\n\n          localPromoData.id = activePageId.id;\n          localPromoData.page_route = activePageId.page_route;\n          return update(data, 'offers', localPromoData, offer, 'local');\n        }\n      }\n\n      if (promoType === 'main') {\n        if (custom_page_promo_ids) {\n          if (!custom_page_promo_ids.includes(activePageId.id)) {\n            mainPromoData = includeAdminId(mainPromoData, 'main_promoted_by_user_ids', main_promoted_by_user_ids);\n          } else {\n            mainPromoData = removeAdminId('main_promoted_by_user_ids', main_promoted_by_user_ids, mainPromoData);\n          } // if (mainPromoData) {\n          //   promoIdArray.push(activePageId.id);\n          //   routeArray.push(activePageId.page_route);\n          //   mainPromoData.custom_page_promo_ids = promoIdArray;\n          //   mainPromoData.custom_page_promo_routes = routeArray;\n          // }\n\n\n          mainPromoData.id = activePageId.id;\n          mainPromoData.page_route = activePageId.page_route;\n          return update(data, 'offers', mainPromoData, offer, 'main');\n        }\n      }\n\n      resetPromoData.id = activePageId.id;\n      resetPromoData.page_route = activePageId.page_route;\n      return update(data, 'offers', resetPromoData, offer, 'reset');\n    }\n\n    if (entity_type === 'provider') {\n      if (promoType === 'local') {\n        if (custom_page_local_ids) {\n          if (!custom_page_local_ids.includes(activePageId.id)) {\n            localPromoData = includeAdminId(localPromoData, 'local_promoted_by_user_ids', local_promoted_by_user_ids);\n          } else {\n            localPromoData = removeAdminId('local_promoted_by_user_ids', local_promoted_by_user_ids, localPromoData);\n          } // if (localPromoData) {\n          //   idLocalArray.push(activePageId.id);\n          //   routeArray.push(activePageId.page_route);\n          //   localPromoData.custom_page_local_ids = idLocalArray;\n          //   localPromoData.custom_page_promo_routes = routeArray; \n          // }\n\n\n          localPromoData.id = activePageId.id;\n          localPromoData.page_route = activePageId.page_route;\n          return update(data, 'providers', localPromoData, provider, 'local');\n        }\n      }\n\n      if (promoType === 'main') {\n        if (custom_page_promo_ids) {\n          if (!custom_page_promo_ids.includes(activePageId.id)) {\n            mainPromoData = includeAdminId(mainPromoData, 'main_promoted_by_user_ids', main_promoted_by_user_ids);\n          } else {\n            mainPromoData = removeAdminId('main_promoted_by_user_ids', main_promoted_by_user_ids, mainPromoData);\n          } // if (mainPromoData) {\n          //   promoIdArray.push(activePageId.id);\n          //   routeArray.push(activePageId.page_route);\n          //   mainPromoData.custom_page_promo_ids = promoIdArray;\n          //   mainPromoData.custom_page_promo_routes = routeArray;       \n          // }\n\n\n          mainPromoData.id = activePageId.id;\n          mainPromoData.page_route = activePageId.page_route;\n          return update(data, 'providers', mainPromoData, provider, 'main');\n        }\n      }\n\n      resetPromoData.id = activePageId.id;\n      resetPromoData.page_route = activePageId.page_route;\n      return update(data, 'providers', resetPromoData, provider, 'reset');\n    }\n\n    if (entity_type === 'pathway') {\n      if (promoType === 'local') {\n        if (custom_page_local_ids) {\n          if (!custom_page_local_ids.includes(activePageId.id)) {\n            localPromoData = includeAdminId(localPromoData, 'local_promoted_by_user_ids', local_promoted_by_user_ids);\n          } else {\n            localPromoData = removeAdminId('local_promoted_by_user_ids', local_promoted_by_user_ids, localPromoData);\n          } // if (localPromoData) {\n          //   idLocalArray.push(activePageId.id);\n          //   routeArray.push(activePageId.page_route);\n          //   localPromoData.custom_page_local_ids = idLocalArray;\n          //   localPromoData.custom_page_promo_routes = routeArray;\n          // }\n\n\n          localPromoData.id = activePageId.id;\n          localPromoData.page_route = activePageId.page_route;\n          return update(data, 'pathways', localPromoData, pathway, 'local');\n        }\n      }\n\n      if (promoType === 'main') {\n        if (custom_page_promo_ids) {\n          if (!custom_page_promo_ids.includes(activePageId.id)) {\n            mainPromoData = includeAdminId(mainPromoData, 'main_promoted_by_user_ids', main_promoted_by_user_ids);\n          } else {\n            mainPromoData = removeAdminId('main_promoted_by_user_ids', main_promoted_by_user_ids, mainPromoData);\n          } // if (mainPromoData) {\n          //   promoIdArray.push(activePageId.id);\n          //   routeArray.push(activePageId.page_route);\n          //   mainPromoData.custom_page_promo_ids = promoIdArray;\n          //   mainPromoData.custom_page_promo_routes = routeArray;\n          // }\n\n\n          mainPromoData.id = activePageId.id;\n          mainPromoData.page_route = activePageId.page_route;\n          return update(data, 'pathways', mainPromoData, pathway, 'main');\n        }\n      }\n\n      resetPromoData.id = activePageId.id;\n      resetPromoData.page_route = activePageId.page_route;\n      return update(data, 'pathways', resetPromoData, pathway, 'reset');\n    }\n\n    return;\n  }\n\n  function confirm(e) {\n    togglePromo(data);\n  }\n\n  let themeBorder = 'promote-card--offerBorder',\n      themeBackground = 'promote-card--offerBg';\n\n  if (data && data.entity_type === 'provider') {\n    themeBorder = 'promote-card--providerBorder';\n    themeBackground = 'promote-card--providerBg';\n  }\n\n  if (data && data.entity_type === 'pathway') {\n    themeBorder = 'promote-card--pathwayBorder';\n    themeBackground = 'promote-card--pathwayBg';\n  } // update promo route api\n\n\n  const updatePromoRoute = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) {\n      let Data = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/update_promo_route`, {\n        type,\n        user_id,\n        custom_page_promo_ids,\n        custom_page_local_ids,\n        custom_page_promo_routes\n      });\n      return Data;\n    });\n\n    return function updatePromoRoute(_x6, _x7, _x8, _x9, _x10) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // calling update promotion setting\n\n\n  const updatePromotionSetting = (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\n    updatePromoRoute(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes).then(res => {\n      console.log('updatePromotionSetting res', res.data);\n      allApiCall();\n    }).catch(err => {\n      console.log('updatePromoRoute err', err);\n    });\n  }; // calling delete promotion setting\n\n\n  const deletePromotionSetting = (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\n    deletePromoRoute(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes).then(res => {\n      console.log('deletePromoRoute res', res.data);\n      allApiCall();\n    }).catch(err => {\n      console.log('updatePromoRoute err', err);\n    });\n  }; // delete promo route\n\n\n  const deletePromoRoute = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(function* (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) {\n      let Data = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/delete_promo_route`, {\n        type,\n        user_id,\n        custom_page_promo_ids,\n        custom_page_local_ids,\n        custom_page_promo_routes\n      });\n      return Data;\n    });\n\n    return function deletePromoRoute(_x11, _x12, _x13, _x14, _x15) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  let custom_page_promo_ids = data.custom_page_promo_ids,\n      custom_page_local_ids = data.custom_page_local_ids,\n      mainArray = custom_page_promo_ids === undefined || custom_page_promo_ids === null ? [] : uniqueArray(custom_page_promo_ids),\n      localArray = custom_page_local_ids === undefined || custom_page_local_ids === null ? [] : uniqueArray(custom_page_local_ids),\n      isLocalSelected = localArray.includes(activePageId.id),\n      isMainSelected = mainArray.includes(activePageId.id);\n  console.log('type', type, '\\n activePageId', activePageId);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `promote-card h-auto w-48 mr-3 mb-3 rounded border border-solid ${themeBorder} shadow`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: `py-1 px-2 text-center capitalize ${themeBackground}`,\n    style: {\n      borderTopRightRadius: '0.20rem',\n      borderTopLeftRadius: '0.20rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 9\n    }\n  }, data && data.entity_type ? data.entity_type : ''), /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"block bg-gray-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }\n  }, data && data.Files && data.Files.length && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"object-cover mx-auto\",\n    style: {\n      height: 112\n    },\n    src: data.Files && data.Files.length ? _last(data.Files).file_link : null,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 13\n    }\n  }) || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mx-auto p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-6xl text-gray-400 mx-auto block\",\n    icon: faImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col pb-2 px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-base break-all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 11\n    }\n  }, data && data.name ? data.name : '---'), /*#__PURE__*/React.createElement(\"footer\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    className: `mr-1 rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--main ${mainArray.includes(activePageId.id) ? 'promote-card--toggledMain shadow-inner' : 'promote-card--notToggled shadow-md'}`,\n    onClick: () => {\n      if (data) {\n        togglePromo(data, 'main');\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 13\n    }\n  }, \"main\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    className: `rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--local ${localArray.includes(activePageId.id) ? 'promote-card--toggledLocal shadow-inner' : 'promote-card--notToggled shadow-md'}`,\n    onClick: () => {\n      if (data) {\n        togglePromo(data, 'local');\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 13\n    }\n  }, \"local\"), /*#__PURE__*/React.createElement(Popconfirm, {\n    title: \"Are you sure?\",\n    onConfirm: confirm,\n    okText: \"Yes\",\n    cancelText: \"No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"link\",\n    size: \"small\",\n    danger: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 15\n    }\n  }, \"reset\"))))));\n};\n\n__signature__(_default, \"useGlobalStore{{ provider, offer, pathway }}\", () => [useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(axios, \"axios\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromoteCard/PromoteCard.js"],"names":["React","useEffect","Button","Popconfirm","FontAwesomeIcon","faImage","axiosInstance","useGlobalStore","useAxios","configure","axios","require","default","data","session","activePageId","type","allApiCall","provider","offer","pathway","adminId","id","update","endpoint","value","container","updateType","custom_page_promo_ids","custom_page_local_ids","user_id","promo_ids","is_main_promo","undefined","local_ids","is_local_promo","custom_page_promo_routes","page_route","length","includes","response","put","updateOne","promo","local","route","push","deletePromotionSetting","local_promoted_by_user_ids","updatePromotionSetting","main_promoted_by_user_ids","uniqueArray","idArray","filter","item","index","inputArray","indexOf","removeAdminId","nameOfUserIdArr","userIdsArr","incomingPromoData","foundAdminIndex","newMainPromotedByUserIds","splice","includeAdminId","promoData","userIdArr","newObj","togglePromo","promoType","entity_type","localPromoData","mainPromoData","resetPromoData","idLocalArray","routeArray","promoIdArray","confirm","e","themeBorder","themeBackground","updatePromoRoute","Data","post","process","env","REACT_APP_API_URL","then","res","console","log","catch","err","deletePromoRoute","mainArray","localArray","isLocalSelected","isMainSelected","borderTopRightRadius","borderTopLeftRadius","Files","height","file_link","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Button, Popconfirm } from 'antd';\r\nimport { last, findIndex } from 'lodash';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faImage } from '@fortawesome/free-regular-svg-icons';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport useAxios, { configure } from 'axios-hooks';\r\nimport './promote-card.scss';\r\n\r\nconst axios = require('axios').default;\r\n\r\nconfigure({\r\n  axios: axiosInstance,\r\n});\r\n\r\nexport default function ({ data = {}, session, activePageId, type, allApiCall }) {\r\n  const { provider, offer, pathway } = useGlobalStore();\r\n  const adminId = session.id;\r\n\r\n  const update = async (data, endpoint, value, container, updateType) => {\r\n    let {id,custom_page_promo_ids,custom_page_local_ids}=data;\r\n    if (!id || !endpoint || !value) {\r\n      return;\r\n    }\r\n    // console.log('daaaaaata', value);\r\n    // let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\r\n    //   user_id = id,\r\n    //   custom_page_promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.custom_page_promo_ids.length ? value.custom_page_promo_ids[0] : null : null,\r\n    //   custom_page_local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.custom_page_local_ids.length ? value.custom_page_local_ids[0] : null : null,\r\n    //   custom_page_promo_routes = uniqueArray(value.custom_page_promo_routes);\r\n\r\n    let type = endpoint === \"offers\" ? \"offer\" : endpoint === \"providers\" ? \"provider\" : endpoint === \"pathways\" ? \"pathway\" : null,\r\n      user_id = id,\r\n      promo_ids = value.is_main_promo === undefined ? null : value.is_main_promo === true || value.is_main_promo === false ? value.id : null,\r\n      local_ids = value.is_local_promo === undefined ? null : value.is_local_promo === true || value.is_local_promo === false ? value.id : null,\r\n      custom_page_promo_routes = value.page_route === undefined ? null : value.page_route,\r\n      is_main_promo=custom_page_promo_ids?custom_page_promo_ids.length?custom_page_promo_ids.includes(value.id):false :false,\r\n      is_local_promo=custom_page_local_ids?custom_page_local_ids.length?custom_page_local_ids.includes(value.id):false :false;\r\n\r\n    if (updateType === 'reset') {\r\n      let data = value;\r\n      const response = await axiosInstance.put(\r\n        `/${endpoint}/${id}?scope=with_files`,\r\n        data\r\n      );\r\n      await container.updateOne(response.data);\r\n      \r\n      let promo=[],local=[],route=[];\r\n      promo.push(promo_ids)\r\n      local.push(local_ids)\r\n      route.push(custom_page_promo_routes)\r\n      // console.log(promo,local,route,'promo_ids,local_ids,custom_page_promo_routes')\r\n      deletePromotionSetting(type, user_id, promo,local,route);\r\n      return response;\r\n    } else if (updateType === 'local') {\r\n      if (is_local_promo === false ||is_local_promo === true) {\r\n        let data = {\r\n          is_local_promo: value.is_local_promo,\r\n          local_promoted_by_user_ids: value.local_promoted_by_user_ids\r\n        }\r\n        const response = await axiosInstance.put(\r\n          `/${endpoint}/${id}?scope=with_files`,\r\n          data\r\n        );\r\n        await container.updateOne(response.data);\r\n        if (!is_local_promo === false) {\r\n          let promo=[],local=[],route=[];\r\n          promo.push(promo_ids)\r\n          local.push(local_ids)\r\n          route.push(custom_page_promo_routes)\r\n          // console.log(promo,local,route,'promo_ids,local_ids,custom_page_promo_routes')\r\n          deletePromotionSetting(type, user_id, promo,local,route);\r\n          // deletePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\r\n        } else {\r\n          updatePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\r\n        }\r\n        return response;\r\n      }\r\n    } else if (updateType === 'main') {\r\n      if ( is_main_promo === false || is_main_promo === true) {\r\n        let data = {\r\n          is_main_promo: value.is_main_promo,\r\n          main_promoted_by_user_ids: value.main_promoted_by_user_ids\r\n        }\r\n        const response = await axiosInstance.put(\r\n          `/${endpoint}/${id}?scope=with_files`,\r\n          data\r\n        );\r\n        await container.updateOne(response.data);\r\n        if (!is_main_promo === false) {\r\n          let promo=[],local=[],route=[];\r\n          promo.push(promo_ids)\r\n          local.push(local_ids)\r\n          route.push(custom_page_promo_routes)\r\n          // console.log(promo,local,route,'promo_ids,local_ids,custom_page_promo_routes')\r\n          deletePromotionSetting(type, user_id, promo,local,route);\r\n          // deletePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\r\n        } else {\r\n          updatePromotionSetting(type, user_id, promo_ids, local_ids, custom_page_promo_routes);\r\n        }\r\n        return response;\r\n      }\r\n    } else {\r\n\r\n    }\r\n  };\r\n\r\n  function uniqueArray(idArray) {\r\n    idArray = idArray.filter(function (item, index, inputArray) {\r\n      if (item === null || item === undefined) {\r\n        return false\r\n      } else {\r\n        return inputArray.indexOf(item) == index;\r\n      }\r\n    });\r\n    return idArray\r\n  }\r\n\r\n  const removeAdminId = (nameOfUserIdArr, userIdsArr, incomingPromoData) => {\r\n    const foundAdminIndex = findIndex(userIdsArr, function (item) {\r\n      return item === adminId;\r\n    });\r\n    const newMainPromotedByUserIds = userIdsArr;\r\n    newMainPromotedByUserIds.splice(foundAdminIndex, 1);\r\n    return {\r\n      ...incomingPromoData,\r\n      [nameOfUserIdArr]: newMainPromotedByUserIds,\r\n    };\r\n  };\r\n\r\n  const includeAdminId = (promoData, nameOfUserIdArr, userIdArr) => {\r\n    if (userIdArr) {\r\n      const newObj = {\r\n        ...promoData,\r\n        [nameOfUserIdArr]: [...userIdArr, adminId],\r\n      };\r\n      return newObj;\r\n    }\r\n  };\r\n\r\n  function togglePromo(data, promoType) {\r\n    const {\r\n      is_local_promo,\r\n      entity_type,\r\n      is_main_promo,\r\n      local_promoted_by_user_ids,\r\n      main_promoted_by_user_ids,\r\n      custom_page_promo_ids,\r\n      custom_page_local_ids\r\n    } = data;\r\n    let localPromoData = { is_local_promo: !is_local_promo };\r\n    let mainPromoData = { is_main_promo: !is_main_promo };\r\n    const resetPromoData = {\r\n      is_main_promo: false,\r\n      is_local_promo: false,\r\n      local_promoted_by_user_ids: [],\r\n      main_promoted_by_user_ids: [],\r\n    }, idLocalArray = [], routeArray = [], promoIdArray = [];\r\n\r\n    if (entity_type === 'offer') {\r\n      if (promoType === 'local') {\r\n        if (custom_page_local_ids) {\r\n          if (!custom_page_local_ids.includes(activePageId.id)) {\r\n            localPromoData = includeAdminId(\r\n              localPromoData,\r\n              'local_promoted_by_user_ids',\r\n              local_promoted_by_user_ids\r\n            );\r\n          } else {\r\n            localPromoData = removeAdminId(\r\n              'local_promoted_by_user_ids',\r\n              local_promoted_by_user_ids,\r\n              localPromoData\r\n            );\r\n          }\r\n          // if (localPromoData) {\r\n          //   idLocalArray.push(activePageId.id);\r\n          //   routeArray.push(activePageId.page_route);\r\n          //   localPromoData.custom_page_local_ids = idLocalArray;\r\n          //   localPromoData.custom_page_promo_routes = routeArray;\r\n          // }\r\n\r\n          localPromoData.id = activePageId.id;\r\n          localPromoData.page_route = activePageId.page_route;\r\n          return update(data, 'offers', localPromoData, offer, 'local');\r\n        }\r\n      }\r\n      if (promoType === 'main') {\r\n        if (custom_page_promo_ids) {\r\n          if (!custom_page_promo_ids.includes(activePageId.id)) {\r\n            mainPromoData = includeAdminId(\r\n              mainPromoData,\r\n              'main_promoted_by_user_ids',\r\n              main_promoted_by_user_ids\r\n            );\r\n          } else {\r\n            mainPromoData = removeAdminId(\r\n              'main_promoted_by_user_ids',\r\n              main_promoted_by_user_ids,\r\n              mainPromoData\r\n            );\r\n          }\r\n          // if (mainPromoData) {\r\n          //   promoIdArray.push(activePageId.id);\r\n          //   routeArray.push(activePageId.page_route);\r\n          //   mainPromoData.custom_page_promo_ids = promoIdArray;\r\n          //   mainPromoData.custom_page_promo_routes = routeArray;\r\n          // }\r\n          mainPromoData.id = activePageId.id;\r\n          mainPromoData.page_route = activePageId.page_route;\r\n          return update(data, 'offers', mainPromoData, offer, 'main');\r\n        }\r\n      }\r\n      resetPromoData.id = activePageId.id;\r\n      resetPromoData.page_route = activePageId.page_route;\r\n      return update(data, 'offers', resetPromoData, offer, 'reset');\r\n    }\r\n    if (entity_type === 'provider') {\r\n      if (promoType === 'local') {\r\n        if (custom_page_local_ids) {\r\n          if (!custom_page_local_ids.includes(activePageId.id)) {\r\n            localPromoData = includeAdminId(\r\n              localPromoData,\r\n              'local_promoted_by_user_ids',\r\n              local_promoted_by_user_ids\r\n            );\r\n          } else {\r\n            localPromoData = removeAdminId(\r\n              'local_promoted_by_user_ids',\r\n              local_promoted_by_user_ids,\r\n              localPromoData\r\n            );\r\n          }\r\n          // if (localPromoData) {\r\n          //   idLocalArray.push(activePageId.id);\r\n          //   routeArray.push(activePageId.page_route);\r\n          //   localPromoData.custom_page_local_ids = idLocalArray;\r\n          //   localPromoData.custom_page_promo_routes = routeArray; \r\n          // }\r\n          localPromoData.id = activePageId.id;\r\n          localPromoData.page_route = activePageId.page_route;\r\n          return update(data, 'providers', localPromoData, provider, 'local');\r\n        }\r\n      }\r\n      if (promoType === 'main') {\r\n        if (custom_page_promo_ids) {\r\n          if (!custom_page_promo_ids.includes(activePageId.id)) {\r\n            mainPromoData = includeAdminId(\r\n              mainPromoData,\r\n              'main_promoted_by_user_ids',\r\n              main_promoted_by_user_ids\r\n            );\r\n          } else {\r\n            mainPromoData = removeAdminId(\r\n              'main_promoted_by_user_ids',\r\n              main_promoted_by_user_ids,\r\n              mainPromoData\r\n            );\r\n          }\r\n          // if (mainPromoData) {\r\n          //   promoIdArray.push(activePageId.id);\r\n          //   routeArray.push(activePageId.page_route);\r\n          //   mainPromoData.custom_page_promo_ids = promoIdArray;\r\n          //   mainPromoData.custom_page_promo_routes = routeArray;       \r\n          // }\r\n          mainPromoData.id = activePageId.id;\r\n          mainPromoData.page_route = activePageId.page_route;\r\n          return update(data, 'providers', mainPromoData, provider, 'main');\r\n        }\r\n      }\r\n      resetPromoData.id = activePageId.id;\r\n      resetPromoData.page_route = activePageId.page_route;\r\n      return update(data, 'providers', resetPromoData, provider, 'reset');\r\n    }\r\n    if (entity_type === 'pathway') {\r\n      if (promoType === 'local') {\r\n        if (custom_page_local_ids) {\r\n          if (!custom_page_local_ids.includes(activePageId.id)) {\r\n            localPromoData = includeAdminId(\r\n              localPromoData,\r\n              'local_promoted_by_user_ids',\r\n              local_promoted_by_user_ids\r\n            );\r\n          } else {\r\n            localPromoData = removeAdminId(\r\n              'local_promoted_by_user_ids',\r\n              local_promoted_by_user_ids,\r\n              localPromoData\r\n            );\r\n          }\r\n          // if (localPromoData) {\r\n          //   idLocalArray.push(activePageId.id);\r\n          //   routeArray.push(activePageId.page_route);\r\n          //   localPromoData.custom_page_local_ids = idLocalArray;\r\n          //   localPromoData.custom_page_promo_routes = routeArray;\r\n\r\n          // }\r\n          localPromoData.id = activePageId.id;\r\n          localPromoData.page_route = activePageId.page_route;\r\n          return update(data, 'pathways', localPromoData, pathway, 'local');\r\n        }\r\n      }\r\n      if (promoType === 'main') {\r\n        if (custom_page_promo_ids) {\r\n          if (!custom_page_promo_ids.includes(activePageId.id)) {\r\n            mainPromoData = includeAdminId(\r\n              mainPromoData,\r\n              'main_promoted_by_user_ids',\r\n              main_promoted_by_user_ids\r\n            );\r\n          } else {\r\n            mainPromoData = removeAdminId(\r\n              'main_promoted_by_user_ids',\r\n              main_promoted_by_user_ids,\r\n              mainPromoData\r\n            );\r\n          }\r\n          // if (mainPromoData) {\r\n          //   promoIdArray.push(activePageId.id);\r\n          //   routeArray.push(activePageId.page_route);\r\n          //   mainPromoData.custom_page_promo_ids = promoIdArray;\r\n          //   mainPromoData.custom_page_promo_routes = routeArray;\r\n          // }\r\n          mainPromoData.id = activePageId.id;\r\n          mainPromoData.page_route = activePageId.page_route;\r\n          return update(data, 'pathways', mainPromoData, pathway, 'main');\r\n        }\r\n      }\r\n      resetPromoData.id = activePageId.id;\r\n      resetPromoData.page_route = activePageId.page_route;\r\n      return update(data, 'pathways', resetPromoData, pathway, 'reset');\r\n    }\r\n    return;\r\n  }\r\n\r\n  function confirm(e) {\r\n    togglePromo(data);\r\n  }\r\n\r\n  let themeBorder = 'promote-card--offerBorder', themeBackground = 'promote-card--offerBg';\r\n\r\n  if (data && data.entity_type === 'provider') {\r\n    themeBorder = 'promote-card--providerBorder';\r\n    themeBackground = 'promote-card--providerBg';\r\n  }\r\n\r\n  if (data && data.entity_type === 'pathway') {\r\n    themeBorder = 'promote-card--pathwayBorder';\r\n    themeBackground = 'promote-card--pathwayBg';\r\n  }\r\n\r\n  // update promo route api\r\n  const updatePromoRoute = async (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\r\n    let Data = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/update_promo_route`, {\r\n      type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes\r\n    })\r\n    return Data\r\n  }\r\n  // calling update promotion setting\r\n  const updatePromotionSetting = (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\r\n    updatePromoRoute(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes).then(res => {\r\n      console.log('updatePromotionSetting res', res.data)\r\n      allApiCall();\r\n    }).catch(err => {\r\n      console.log('updatePromoRoute err', err)\r\n    })\r\n  }\r\n  // calling delete promotion setting\r\n  const deletePromotionSetting = (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\r\n    deletePromoRoute(type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes).then(res => {\r\n      console.log('deletePromoRoute res', res.data)\r\n      allApiCall();\r\n    }).catch(err => {\r\n      console.log('updatePromoRoute err', err)\r\n    })\r\n  }\r\n  // delete promo route\r\n  const deletePromoRoute = async (type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes) => {\r\n    let Data = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/delete_promo_route`, {\r\n      type, user_id, custom_page_promo_ids, custom_page_local_ids, custom_page_promo_routes\r\n    })\r\n    return Data\r\n  }\r\n\r\n\r\n  let { custom_page_promo_ids, custom_page_local_ids } = data,\r\n    mainArray = custom_page_promo_ids === undefined || custom_page_promo_ids === null ? [] : uniqueArray(custom_page_promo_ids),\r\n    localArray = custom_page_local_ids === undefined || custom_page_local_ids === null ? [] : uniqueArray(custom_page_local_ids),\r\n    isLocalSelected = localArray.includes(activePageId.id),\r\n    isMainSelected = mainArray.includes(activePageId.id);\r\n  console.log('type', type, '\\n activePageId', activePageId)\r\n  return (\r\n    <React.Fragment>\r\n      <div className={`promote-card h-auto w-48 mr-3 mb-3 rounded border border-solid ${themeBorder} shadow`}>\r\n        <header className={`py-1 px-2 text-center capitalize ${themeBackground}`}\r\n          style={{\r\n            borderTopRightRadius: '0.20rem',\r\n            borderTopLeftRadius: '0.20rem',\r\n          }}>\r\n          {data && data.entity_type ? data.entity_type : ''}\r\n        </header>\r\n        <figure className=\"block bg-gray-200\">\r\n          {(data && data.Files && data.Files.length && (\r\n            <img\r\n              className=\"object-cover mx-auto\"\r\n              style={{ height: 112 }}\r\n              src={\r\n                data.Files && data.Files.length\r\n                  ? last(data.Files).file_link\r\n                  : null\r\n              } alt=\"\" />\r\n          )) || (\r\n              <div className=\"mx-auto p-6\">\r\n                <FontAwesomeIcon\r\n                  className=\"text-6xl text-gray-400 mx-auto block\"\r\n                  icon={faImage} />\r\n              </div>\r\n            )}\r\n        </figure>\r\n        <div className=\"flex flex-col pb-2 px-2\">\r\n          <span className=\"text-base break-all\">{data && data.name ? data.name : '---'}</span>\r\n          <footer>\r\n            <Button size=\"small\"\r\n              className={`mr-1 rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--main ${\r\n                mainArray.includes(activePageId.id)\r\n                  ? 'promote-card--toggledMain shadow-inner'\r\n                  : 'promote-card--notToggled shadow-md'\r\n                }`}\r\n              onClick={() => {\r\n                if (data) {\r\n                  togglePromo(data, 'main');\r\n                }\r\n              }}>main</Button>\r\n            <Button size=\"small\"\r\n              className={`rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--local ${\r\n                localArray.includes(activePageId.id)\r\n                  ? 'promote-card--toggledLocal shadow-inner'\r\n                  : 'promote-card--notToggled shadow-md'\r\n                }`}\r\n              onClick={() => {\r\n                if (data) {\r\n                  togglePromo(data, 'local');\r\n                }\r\n              }}>local</Button>\r\n            <Popconfirm title=\"Are you sure?\" onConfirm={confirm} okText=\"Yes\" cancelText=\"No\">\r\n              <Button type=\"link\" size=\"small\" danger>reset</Button>\r\n            </Popconfirm>\r\n          </footer>\r\n        </div>\r\n      </div>\r\n      {/* {\r\n        type === \"selected\" || isLocalSelected || isMainSelected ?\r\n        <div className={`promote-card h-auto w-48 mr-3 mb-3 rounded border border-solid ${themeBorder} shadow`}>\r\n          <header className={`py-1 px-2 text-center capitalize ${themeBackground}`}\r\n            style={{\r\n              borderTopRightRadius: '0.20rem',\r\n              borderTopLeftRadius: '0.20rem',\r\n            }}\r\n          >\r\n            {data && data.entity_type ? data.entity_type : ''}\r\n          </header>\r\n          <figure className=\"block bg-gray-200\">\r\n            {(data && data.Files && data.Files.length && (\r\n              <img\r\n                className=\"object-cover mx-auto\"\r\n                style={{ height: 112 }}\r\n                src={\r\n                  data.Files && data.Files.length\r\n                    ? last(data.Files).file_link\r\n                    : null\r\n                }\r\n                alt=\"\"\r\n              />\r\n            )) || (\r\n                <div className=\"mx-auto p-6\">\r\n                  <FontAwesomeIcon className=\"text-6xl text-gray-400 mx-auto block\" icon={faImage}/>\r\n                </div>\r\n              )}\r\n          </figure>\r\n          <div className=\"flex flex-col pb-2 px-2\">\r\n            <span className=\"text-base break-all\">\r\n              {data && data.name ? data.name : '---'}\r\n            </span>\r\n            <footer>\r\n              <Button size=\"small\"\r\n                className={`mr-1 rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--main ${\r\n                  mainArray.includes(activePageId.id)\r\n                    ? 'promote-card--toggledMain shadow-inner'\r\n                    : 'promote-card--notToggled shadow-md'\r\n                  }`}\r\n                onClick={() => {\r\n                  if (data) {\r\n                    togglePromo(data, 'main');\r\n                  }}}>main</Button>\r\n              <Button size=\"small\"\r\n                className={`rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--local ${\r\n                  localArray.includes(activePageId.id)\r\n                    ? 'promote-card--toggledLocal shadow-inner'\r\n                    : 'promote-card--notToggled shadow-md'\r\n                  }`}\r\n                onClick={() => {\r\n                  if (data) {\r\n                    togglePromo(data, 'local');\r\n                  }}}>local</Button>\r\n              <Popconfirm title=\"Are you sure?\" onConfirm={confirm} okText=\"Yes\" cancelText=\"No\">\r\n                <Button type=\"link\" size=\"small\" danger>reset</Button>\r\n              </Popconfirm>\r\n            </footer>\r\n          </div>\r\n        </div> \r\n        :\r\n         <div className={`promote-card h-auto w-48 mr-3 mb-3 rounded border border-solid ${themeBorder} shadow`}>\r\n            <header className={`py-1 px-2 text-center capitalize ${themeBackground}`}\r\n              style={{\r\n                borderTopRightRadius: '0.20rem',\r\n                borderTopLeftRadius: '0.20rem',\r\n              }}>\r\n              {data && data.entity_type ? data.entity_type : ''}\r\n            </header>\r\n            <figure className=\"block bg-gray-200\">\r\n              {(data && data.Files && data.Files.length && (\r\n                <img\r\n                  className=\"object-cover mx-auto\"\r\n                  style={{ height: 112 }}\r\n                  src={\r\n                    data.Files && data.Files.length\r\n                      ? last(data.Files).file_link\r\n                      : null\r\n                  } alt=\"\"/>\r\n              )) || (\r\n                  <div className=\"mx-auto p-6\">\r\n                    <FontAwesomeIcon\r\n                      className=\"text-6xl text-gray-400 mx-auto block\"\r\n                      icon={faImage}/>\r\n                  </div>\r\n                )}\r\n            </figure>\r\n            <div className=\"flex flex-col pb-2 px-2\">\r\n              <span className=\"text-base break-all\">{data && data.name ? data.name : '---'}</span>\r\n              <footer>\r\n                <Button size=\"small\"\r\n                  className={`mr-1 rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--main ${\r\n                    mainArray.includes(activePageId.id)\r\n                      ? 'promote-card--toggledMain shadow-inner'\r\n                      : 'promote-card--notToggled shadow-md'\r\n                    }`}\r\n                  onClick={() => {\r\n                    if (data) {\r\n                      togglePromo(data, 'main');\r\n                    }\r\n                  }}>main</Button>\r\n                <Button size=\"small\"\r\n                  className={`rounded text-white border-none promote-card__toggleBtn promote-card__toggleBtn--local ${\r\n                    localArray.includes(activePageId.id)\r\n                      ? 'promote-card--toggledLocal shadow-inner'\r\n                      : 'promote-card--notToggled shadow-md'\r\n                    }`}\r\n                  onClick={() => {\r\n                    if (data) {\r\n                      togglePromo(data, 'local');\r\n                    }\r\n                  }}>local</Button>\r\n                <Popconfirm title=\"Are you sure?\" onConfirm={confirm} okText=\"Yes\" cancelText=\"No\">\r\n                  <Button type=\"link\" size=\"small\" danger>reset</Button>\r\n                </Popconfirm>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n      } */}\r\n    </React.Fragment>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}