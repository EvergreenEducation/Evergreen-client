{"ast":null,"code":"import _asyncToGenerator from \"/home/devnineteen/Desktop/Projects/Evergreen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _get from \"lodash/get\";\nvar _jsxFileName = \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/screens/RoleSelectionScreen/RoleSelectionScreen.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React from 'react';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChalkboardTeacher, faUserGraduate } from '@fortawesome/free-solid-svg-icons';\nimport AuthService from 'services/AuthService';\nimport axiosInstance from 'services/AxiosInstance';\nimport './role-selection-screen.scss';\nimport { Layout, Row, Col, Card, Button } from 'antd';\nconst Content = Layout.Content;\n\nfunction RoleSelectionScreen(props) {\n  const history = props.history,\n        location = props.location;\n\n  const user_id = _get(location, 'state.user_id');\n\n  if (!user_id) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: '/'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const createUserProfile = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (role) {\n      try {\n        let user;\n\n        if (role === 'provider') {\n          const _yield$axiosInstance$ = yield axiosInstance.post('/providers', {\n            user_id\n          }),\n                data = _yield$axiosInstance$.data;\n\n          var _yield$axiosInstance$2 = yield axiosInstance.put(`/users/${user_id}`, {\n            role,\n            provider_id: data.id\n          });\n\n          user = _yield$axiosInstance$2.data;\n        } else {\n          const _yield$axiosInstance$3 = yield axiosInstance.post('/students', {\n            user_id\n          }),\n                data = _yield$axiosInstance$3.data;\n\n          var _yield$axiosInstance$4 = yield axiosInstance.put(`/users/${user_id}`, {\n            role,\n            student_id: data.id\n          });\n\n          user = _yield$axiosInstance$4.data;\n          AuthService.setCurrentSession(user);\n          history.push(`/`);\n          return;\n        }\n\n        AuthService.setCurrentSession(user);\n        history.push(`/dashboard/${user.id}`);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n\n    return function createUserProfile(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  if (!user_id) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: '/error/500'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    className: \"h-full bg-green-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full bg-green-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Content, {\n    className: \"mx-auto max-w-4xl h-full bg-green-500 flex items-center flex-col justify-center selection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-2xl mt-12 mb-6 question font-medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"Are you are a . . .\"), /*#__PURE__*/React.createElement(Row, {\n    className: \"w-full justify-around user-selection-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"h-full\",\n    type: \"link\",\n    onClick: () => createUserProfile('student'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"w-72 h-88 rounded user-card flex justify-center flex-col border-none\",\n    cover: /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"mx-auto bordered text-blue-600 user-card__icon\",\n      style: {\n        fontSize: '8rem',\n        color: 'rgb(57, 107, 86)'\n      },\n      icon: faUserGraduate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-xl\",\n    style: {\n      color: 'rgb(57, 107, 86)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }\n  }, \"Student\")))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"my-auto text-center text-2xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"OR\"), /*#__PURE__*/React.createElement(Col, {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"h-full\",\n    type: \"link\",\n    onClick: () => createUserProfile('provider'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"w-72 h-88 rounded user-card flex justify-center flex-col border-none\",\n    cover: /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"mx-auto bordered user-card__icon\",\n      style: {\n        fontSize: '8rem',\n        color: 'rgb(57, 107, 86)'\n      },\n      icon: faChalkboardTeacher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-xl\",\n    style: {\n      color: 'rgb(57, 107, 86)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, \"Provider\"))))))));\n}\n\nconst _default = withRouter(RoleSelectionScreen);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Content, \"Content\", \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/screens/RoleSelectionScreen/RoleSelectionScreen.js\");\n  reactHotLoader.register(RoleSelectionScreen, \"RoleSelectionScreen\", \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/screens/RoleSelectionScreen/RoleSelectionScreen.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/screens/RoleSelectionScreen/RoleSelectionScreen.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Desktop/Projects/Evergreen-client/src/screens/RoleSelectionScreen/RoleSelectionScreen.js"],"names":["React","withRouter","Redirect","FontAwesomeIcon","faChalkboardTeacher","faUserGraduate","AuthService","axiosInstance","Layout","Row","Col","Card","Button","Content","RoleSelectionScreen","props","history","location","user_id","pathname","createUserProfile","role","user","post","data","put","provider_id","id","student_id","setCurrentSession","push","e","console","error","fontSize","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faChalkboardTeacher,\r\n  faUserGraduate,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { get } from 'lodash';\r\n\r\nimport AuthService from 'services/AuthService';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport './role-selection-screen.scss';\r\n\r\nimport { Layout, Row, Col, Card, Button } from 'antd';\r\nconst { Content } = Layout;\r\n\r\nfunction RoleSelectionScreen(props) {\r\n  const { history, location } = props;\r\n\r\n  const user_id = get(location, 'state.user_id');\r\n\r\n  if (!user_id) {\r\n    return <Redirect to={{ pathname: '/' }} />;\r\n  }\r\n\r\n  const createUserProfile = async (role) => {\r\n    try {\r\n      let user;\r\n      if (role === 'provider') {\r\n        const { data } = await axiosInstance.post('/providers', {\r\n          user_id,\r\n        });\r\n        ({ data: user } = await axiosInstance.put(`/users/${user_id}`, {\r\n          role,\r\n          provider_id: data.id,\r\n        }));\r\n      } else {\r\n        const { data } = await axiosInstance.post('/students', {\r\n          user_id,\r\n        });\r\n        ({ data: user } = await axiosInstance.put(`/users/${user_id}`, {\r\n          role,\r\n          student_id: data.id,\r\n        }));\r\n\r\n        AuthService.setCurrentSession(user);\r\n        history.push(`/`);\r\n        return;\r\n      }\r\n\r\n      AuthService.setCurrentSession(user);\r\n      history.push(`/dashboard/${user.id}`);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  if (!user_id) {\r\n    return <Redirect to={{ pathname: '/error/500' }} />;\r\n  }\r\n\r\n  return (\r\n    <Layout className=\"h-full bg-green-500\">\r\n      <div className=\"w-full bg-green-500\">\r\n        <Content className=\"mx-auto max-w-4xl h-full bg-green-500 flex items-center flex-col justify-center selection\">\r\n          <h2 className=\"text-2xl mt-12 mb-6 question font-medium\">\r\n            Are you are a . . .\r\n          </h2>\r\n          <Row className=\"w-full justify-around user-selection-row\">\r\n            <Col className=\"flex justify-center\">\r\n              <Button\r\n                className=\"h-full\"\r\n                type=\"link\"\r\n                onClick={() => createUserProfile('student')}\r\n              >\r\n                <Card\r\n                  className=\"w-72 h-88 rounded user-card flex justify-center flex-col border-none\"\r\n                  cover={\r\n                    <FontAwesomeIcon\r\n                      className=\"mx-auto bordered text-blue-600 user-card__icon\"\r\n                      style={{ fontSize: '8rem', color: 'rgb(57, 107, 86)' }}\r\n                      icon={faUserGraduate}\r\n                    />\r\n                  }\r\n                >\r\n                  <span\r\n                    className=\"text-xl\"\r\n                    style={{ color: 'rgb(57, 107, 86)' }}\r\n                  >\r\n                    Student\r\n                  </span>\r\n                </Card>\r\n              </Button>\r\n            </Col>\r\n            <span className=\"my-auto text-center text-2xl\">OR</span>\r\n            <Col className=\"flex justify-center\">\r\n              <Button\r\n                className=\"h-full\"\r\n                type=\"link\"\r\n                onClick={() => createUserProfile('provider')}\r\n              >\r\n                <Card\r\n                  className=\"w-72 h-88 rounded user-card flex justify-center flex-col border-none\"\r\n                  cover={\r\n                    <FontAwesomeIcon\r\n                      className=\"mx-auto bordered user-card__icon\"\r\n                      style={{ fontSize: '8rem', color: 'rgb(57, 107, 86)' }}\r\n                      icon={faChalkboardTeacher}\r\n                    />\r\n                  }\r\n                >\r\n                  <span\r\n                    className=\"text-xl\"\r\n                    style={{ color: 'rgb(57, 107, 86)' }}\r\n                  >\r\n                    Provider\r\n                  </span>\r\n                </Card>\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Content>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default withRouter(RoleSelectionScreen);\r\n"]},"metadata":{},"sourceType":"module"}