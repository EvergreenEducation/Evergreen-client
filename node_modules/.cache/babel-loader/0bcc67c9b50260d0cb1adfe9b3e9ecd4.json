{"ast":null,"code":"import _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _property from \"lodash/property\";\nimport _groupBy from \"lodash/groupBy\";\nimport _compact from \"lodash/compact\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/student/TopicCarouselContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Button } from 'antd';\nimport useGlobalStore from 'store/GlobalStore';\nimport { Carousel } from 'react-responsive-carousel';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowRight, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport { InfoCard } from 'components/student';\nimport { TitleDivider } from 'components/shared';\nimport 'assets/scss/responsive-carousel-override.scss';\nimport * as _ from 'underscore';\n\nconst _default = function _default() {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        currentTopic = _useState2[0],\n        setCurrentTopic = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        onCurrentChange = _useState4[0],\n        setOnCurrentChange = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        outlookdata = _useState6[0],\n        setOutlookData = _useState6[1];\n\n  const _useGlobalStore = useGlobalStore(),\n        datafield = _useGlobalStore.datafield,\n        offerStore = _useGlobalStore.offer,\n        PathwayStore = _useGlobalStore.pathway;\n\n  console.log(\"offerStore\", offerStore, 'PathwayStore', PathwayStore);\n\n  const topics = _compact(Object.values(datafield.entities).filter(d => d.type === 'topic'));\n\n  const outlook = _compact(Object.values(datafield.entities).filter(d => d.type === 'provider'));\n\n  topics.push({\n    name: 'Others'\n  });\n  outlook.push({\n    name: 'Others'\n  });\n\n  const groupedDataFields = _groupBy(datafield.entities, _property('type'));\n\n  const handleChange = e => {\n    console.log('handleChange', e, '\\n \\t datafield', datafield); // setCurrentTopic(e);\n\n    getUpdatedOfferData(e);\n  };\n\n  function getUpdatedOfferData(currentIndex) {\n    console.log('currentIndex', currentIndex);\n  }\n\n  const handleCurrentItem = (current, total) => {\n    const index = current - 1;\n    setTimeout(() => {\n      if (onCurrentChange !== current) {\n        setOnCurrentChange(current);\n      }\n\n      if (onCurrentChange !== current) {\n        setCurrentTopic(topics[index]);\n      }\n    }, 50);\n    return null;\n  };\n\n  const handleCurrentItemOutlook = (current, total) => {\n    const index = current - 1; // setTimeout(() => {\n    //   if (onCurrentChange !== current) {\n    //     setOnCurrentChange(current);\n    //   }\n    //   if (onCurrentChange !== current) {\n    //     setCurrentTopic(outlook[index]);\n    //   }\n    // }, 50);\n    // return null;\n  };\n\n  console.log(\"topics============== \", topics);\n  let filterData = topics && topics.filter(item => item.is_check_topic === true);\n\n  const renderArrowBtns = (onClickHandler, hasPrevOrNext, label, icon, style = {\n    right: 15\n  }) => {\n    if (!icon) {\n      return null;\n    }\n\n    return hasPrevOrNext && /*#__PURE__*/React.createElement(Button, {\n      type: \"link\",\n      onClick: onClickHandler,\n      className: \"custom-control-arrow flex justify-center\",\n      style: style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }));\n  };\n\n  const hasNoTopics = offer => {\n    const _offer$DataFields = offer.DataFields,\n          DataFields = _offer$DataFields === void 0 ? [] : _offer$DataFields;\n\n    for (let k = 0; k < DataFields.length; k++) {\n      if (DataFields[k].type === 'topic') {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const hasNoTopicsOutlook = pathway => {\n    const _pathway$DataFields = pathway.DataFields,\n          DataFields = _pathway$DataFields === void 0 ? [] : _pathway$DataFields;\n\n    for (let k = 0; k < DataFields.length; k++) {\n      if (DataFields[k].type === 'provider') {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const renderOffers = () => {\n    let currentOffers = [];\n    let offerId = null;\n\n    let _offers = _compact(currentTopic.Offers);\n\n    console.log('renderOffers _offers', _offers);\n\n    for (let i = 0; i < _offers.length; i++) {\n      offerId = _offers[i].id;\n      currentOffers.push(offerStore.entities[offerId]);\n    }\n\n    if (currentTopic.name === 'Others') {\n      currentOffers = Object.values(offerStore.entities).filter(hasNoTopics);\n    }\n\n    return currentOffers.map((offer, index) => {\n      let p = null;\n\n      if (offer && offer.provider_id && offer.Provider) {\n        p = offer.Provider;\n      }\n\n      console.log('currentOffers', offer, '\\n offer.DataFields', offer.DataFields);\n      return offer.DataFields.length ? offer.DataFields.map((value, id) => {\n        console.log('currentOffers, offer.DataFields', value.is_check_topic);\n\n        if (value.is_check_topic) {\n          return /*#__PURE__*/React.createElement(Link, {\n            to: `/home/offer/${offer.id}`,\n            key: index,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(InfoCard, {\n            key: `renderOffers-${index}`,\n            className: \"mx-auto mb-4 w-full\",\n            data: offer,\n            provider: p,\n            groupedDataFields: groupedDataFields,\n            provider: offer.provider,\n            outlook: offer.outlook,\n            image: offer.rubric_attachment,\n            earnings: offer.earnings,\n            outEarvValue: true,\n            bannerImage: offer.banner_image,\n            mainImage: offer.main_image,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }\n          }));\n        }\n      }) : false;\n    });\n  };\n\n  const renderOffersOutlook = () => {\n    let currentOf = [];\n    let offerId = null;\n\n    let _offers = _compact(currentTopic.Offers);\n\n    console.log('renderOffersOutlook _offers', _offers);\n\n    for (let i = 0; i < _offers.length; i++) {\n      offerId = _offers[i].id;\n      currentOf.push(PathwayStore.entities);\n    }\n\n    if (currentTopic.name === 'Others') {\n      // currentOf = Object.values(PathwayStore.entities).filter(hasNoTopicsOutlook);\n      currentOf = Object.values(PathwayStore.entities);\n    } // console.log(\"current\",currentOf)\n    // currentOf = sortBy(currentOf, [{'outlook' : 'desc'}]);\n\n\n    currentOf.sort((a, b) => parseFloat(b.outlook) - parseFloat(a.outlook));\n    console.log(\"currentOf\", currentOf);\n    return currentOf.map((offer, index) => {\n      let p = null;\n      let outlook;\n      let earnings;\n      let image = [];\n\n      if (offer && offer.provider_id && offer.Provider) {\n        p = offer.Provider;\n        image = offer.rubric_attachment;\n        outlook = offer.outlook;\n        earnings = offer.earnings;\n      }\n\n      console.log('currentOf', offer, '\\n offer.DataFields', offer.DataFields, '\\n offer && offer.DataFields', offer && offer.DataFields);\n\n      if (offer && offer.DataFields) {\n        return offer.DataFields.length ? offer.DataFields.map((value, id) => {\n          console.log('offer.DataFields', value.is_check_topic);\n\n          if (value.is_check_topic) {\n            return /*#__PURE__*/React.createElement(Link, {\n              to: `/home/pathway/${offer.id}`,\n              key: index,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(InfoCard, {\n              key: index,\n              className: \"mx-auto mb-4 w-full\",\n              data: offer,\n              provider: offer.provider,\n              outlook: offer.outlook,\n              image: offer.rubric_attachment,\n              earnings: offer.earnings,\n              groupedDataFields: groupedDataFields,\n              outEarvValue: true,\n              bannerImage: offer.banner_image,\n              mainImage: offer.main_image,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }\n            }));\n          }\n        }) : false;\n      } else {\n        return false;\n      } // return offer && offer.DataFields ? :false\n\n    });\n  };\n\n  const renderOffersEarning = () => {\n    let currentOffers = [];\n    let offerId = null;\n\n    let _offers = _compact(currentTopic.Offers);\n\n    console.log('renderOffersEarning _offers', _offers);\n\n    for (let i = 0; i < _offers.length; i++) {\n      offerId = _offers[i].id;\n      currentOffers.push(PathwayStore.entities);\n    }\n\n    if (currentTopic.name === 'Others') {\n      currentOffers = Object.values(PathwayStore.entities).filter(hasNoTopicsOutlook);\n    } // currentOffers = sortBy(currentOffers, [{'earnings' : 'desc'}]);\n\n\n    currentOffers.sort((a, b) => parseFloat(b.earnings) - parseFloat(a.earnings));\n    return currentOffers.map((offer, index) => {\n      let p = null;\n      let outlook = null;\n      let earnings = null;\n      let image = [];\n      let mainImage = [];\n\n      if (offer && offer.provider_id && offer.Provider) {\n        console.log(\"offer\", offer);\n        p = offer.Provider;\n        outlook = offer.outlook;\n        earnings = offer.earnings;\n        image = offer.rubric_attachment;\n        mainImage = offer.main_image;\n      }\n\n      if (offer && offer.DataFields) {\n        console.log('\\n currentOffers offer.DataFields', offer.DataFields);\n        return offer.DataFields.length ? offer.DataFields.map((value, id) => {\n          console.log('offer.DataFields', value.is_check_topic);\n\n          if (value.is_check_topic) {\n            return /*#__PURE__*/React.createElement(Link, {\n              to: `/home/pathway/${offer.id}`,\n              key: index,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(InfoCard, {\n              key: index,\n              className: \"mx-auto mb-4 w-full\",\n              data: offer,\n              provider: offer.provider,\n              outlook: offer.outlook,\n              image: offer.rubric_attachment,\n              earnings: offer.earnings,\n              groupedDataFields: groupedDataFields,\n              outEarvValue: true,\n              bannerImage: offer.banner_image,\n              mainImage: offer.main_image,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }\n            }));\n          }\n        }) : false;\n      } else {\n        return false;\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-auto w-full homepage_boxes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'Top outlooks',\n    align: \"right\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: 90,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    onChange: handleChange,\n    showStatus: true,\n    statusFormatter: handleCurrentItemOutlook,\n    showThumbs: false,\n    renderArrowNext: (...rest) => {\n      return renderArrowBtns(...rest, faArrowRight);\n    },\n    renderArrowPrev: (...rest) => {\n      return renderArrowBtns(...rest, faArrowLeft, {\n        left: 15\n      });\n    },\n    swipeScrollTolerance: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"mx-auto text-white text-lg w-auto flex justify-center items-center\",\n    style: {\n      backgroundColor: 'rgb(7, 25, 80)',\n      height: 50\n    } // key={index}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, \"Outlooks\")), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }\n  }, currentTopic && renderOffersOutlook())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-auto w-full homepage_boxes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'OFFERS BY TOPICS',\n    align: \"center\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: 90,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    onChange: handleChange,\n    showStatus: true,\n    statusFormatter: handleCurrentItem,\n    showThumbs: false,\n    renderArrowNext: (...rest) => {\n      return renderArrowBtns(...rest, faArrowRight);\n    },\n    renderArrowPrev: (...rest) => {\n      return renderArrowBtns(...rest, faArrowLeft, {\n        left: 15\n      });\n    },\n    swipeScrollTolerance: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 9\n    }\n  }, filterData && filterData.map((topic, index) => {\n    if (topic.is_check_topic) {\n      return /*#__PURE__*/React.createElement(Card, {\n        className: \"mx-auto text-white text-lg w-auto flex justify-center items-center\",\n        style: {\n          backgroundColor: 'rgb(7, 25, 80)',\n          height: 50\n        },\n        key: index // onClick={ha}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 17\n        }\n      }, topic.name);\n    }\n  })), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 9\n    }\n  }, currentTopic && renderOffers())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-auto w-full homepage_boxes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: 'Top Earning',\n    align: \"Left\",\n    classNames: {\n      middleSpan: 'text-base'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    className: \"custom-carousel mb-2 cursor-grab\",\n    centerMode: true,\n    infiniteLoop: true,\n    centerSlidePercentage: 90,\n    showArrows: true,\n    showIndicators: false,\n    swipeable: true,\n    emulateTouch: true,\n    onChange: handleChange,\n    showStatus: true,\n    statusFormatter: handleCurrentItemOutlook,\n    showThumbs: false,\n    renderArrowNext: (...rest) => {\n      return renderArrowBtns(...rest, faArrowRight);\n    },\n    renderArrowPrev: (...rest) => {\n      return renderArrowBtns(...rest, faArrowLeft, {\n        left: 15\n      });\n    },\n    swipeScrollTolerance: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"mx-auto text-white text-lg w-auto flex justify-center items-center\",\n    style: {\n      backgroundColor: 'rgb(7, 25, 80)',\n      height: 50\n    } // key={index}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 11\n    }\n  }, \"Earning\")), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 9\n    }\n  }, currentTopic && renderOffersEarning())));\n};\n\n__signature__(_default, \"useState{[currentTopic, setCurrentTopic](null)}\\nuseState{[onCurrentChange, setOnCurrentChange](null)}\\nuseState{[outlookdata, setOutlookData](null)}\\nuseGlobalStore{{ datafield, offer: offerStore, pathway: PathwayStore }}\", () => [useGlobalStore]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/student/TopicCarouselContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/student/TopicCarouselContainer.js"],"names":["React","useState","Link","Card","Button","useGlobalStore","Carousel","FontAwesomeIcon","faArrowRight","faArrowLeft","InfoCard","TitleDivider","_","currentTopic","setCurrentTopic","onCurrentChange","setOnCurrentChange","outlookdata","setOutlookData","datafield","offerStore","offer","PathwayStore","pathway","console","log","topics","Object","values","entities","filter","d","type","outlook","push","name","groupedDataFields","handleChange","e","getUpdatedOfferData","currentIndex","handleCurrentItem","current","total","index","setTimeout","handleCurrentItemOutlook","filterData","item","is_check_topic","renderArrowBtns","onClickHandler","hasPrevOrNext","label","icon","style","right","hasNoTopics","DataFields","k","length","hasNoTopicsOutlook","renderOffers","currentOffers","offerId","_offers","Offers","i","id","map","p","provider_id","Provider","value","provider","rubric_attachment","earnings","banner_image","main_image","renderOffersOutlook","currentOf","sort","a","b","parseFloat","image","renderOffersEarning","mainImage","middleSpan","rest","left","backgroundColor","height","topic"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Card, Button } from 'antd';\r\nimport {\r\n  compact, groupBy, property, sortBy, orderBy\r\n} from 'lodash';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowRight, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\r\nimport { InfoCard } from 'components/student';\r\nimport { TitleDivider } from 'components/shared';\r\nimport 'assets/scss/responsive-carousel-override.scss';\r\nimport * as _ from 'underscore';\r\n\r\nexport default function () {\r\n  const [currentTopic, setCurrentTopic] = useState(null);\r\n  const [onCurrentChange, setOnCurrentChange] = useState(null);\r\n  const [outlookdata, setOutlookData] = useState(null)\r\n  const { datafield, offer: offerStore, pathway: PathwayStore } = useGlobalStore();\r\n  console.log(\"offerStore\", offerStore,'PathwayStore',PathwayStore)\r\n\r\n\r\n  const topics = compact(\r\n    Object.values(datafield.entities).filter((d) => d.type === 'topic')\r\n  );\r\n  const outlook = compact(\r\n    Object.values(datafield.entities).filter((d) => d.type === 'provider')\r\n  );\r\n\r\n  topics.push({ name: 'Others' });\r\n  outlook.push({ name: 'Others' });\r\n\r\n  const groupedDataFields = groupBy(datafield.entities, property('type'));\r\n\r\n  const handleChange = (e) => { \r\n    console.log('handleChange',e,'\\n \\t datafield',datafield)\r\n    // setCurrentTopic(e);\r\n    getUpdatedOfferData(e)\r\n\r\n\r\n\r\n  };\r\n\r\n function getUpdatedOfferData(currentIndex){\r\n  console.log('currentIndex',currentIndex)\r\n\r\n  }\r\n\r\n  const handleCurrentItem = (current, total) => {\r\n    const index = current - 1;\r\n\r\n    setTimeout(() => {\r\n      if (onCurrentChange !== current) {\r\n        setOnCurrentChange(current);\r\n      }\r\n      if (onCurrentChange !== current) {\r\n        setCurrentTopic(topics[index]);\r\n      }\r\n    }, 50);\r\n    return null;\r\n  };\r\n\r\n  const handleCurrentItemOutlook = (current, total) => {\r\n    const index = current - 1;\r\n    // setTimeout(() => {\r\n    //   if (onCurrentChange !== current) {\r\n    //     setOnCurrentChange(current);\r\n    //   }\r\n    //   if (onCurrentChange !== current) {\r\n    //     setCurrentTopic(outlook[index]);\r\n    //   }\r\n    // }, 50);\r\n    // return null;\r\n  };\r\n  console.log(\"topics============== \", topics)\r\n  let filterData = topics && topics.filter(item => item.is_check_topic === true)\r\n  const renderArrowBtns = (\r\n    onClickHandler,\r\n    hasPrevOrNext,\r\n    label,\r\n    icon,\r\n    style = { right: 15 }\r\n  ) => {\r\n    if (!icon) {\r\n      return null;\r\n    }\r\n    return (\r\n      hasPrevOrNext && (\r\n        <Button\r\n          type=\"link\"\r\n          onClick={onClickHandler}\r\n          className=\"custom-control-arrow flex justify-center\"\r\n          style={style}\r\n        >\r\n          <FontAwesomeIcon icon={icon} />\r\n        </Button>\r\n      )\r\n    );\r\n  };\r\n\r\n  const hasNoTopics = (offer) => {\r\n    const { DataFields = [] } = offer;\r\n    for (let k = 0; k < DataFields.length; k++) {\r\n      if (DataFields[k].type === 'topic') {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const hasNoTopicsOutlook = (pathway) => {\r\n    const { DataFields = [] } = pathway;\r\n    for (let k = 0; k < DataFields.length; k++) {\r\n      if (DataFields[k].type === 'provider') {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const renderOffers = () => {\r\n    let currentOffers = [];\r\n    let offerId = null;\r\n    let _offers = compact(currentTopic.Offers);\r\nconsole.log('renderOffers _offers',_offers)\r\n    for (let i = 0; i < _offers.length; i++) {\r\n      offerId = _offers[i].id;\r\n      currentOffers.push(offerStore.entities[offerId]);\r\n    }\r\n\r\n    if (currentTopic.name === 'Others') {\r\n      currentOffers = Object.values(offerStore.entities).filter(hasNoTopics);\r\n    }\r\n\r\n    return currentOffers.map((offer, index) => {\r\n      let p = null;\r\n      if (offer && offer.provider_id && offer.Provider) {\r\n        p = offer.Provider;\r\n      }\r\n      console.log('currentOffers', offer,'\\n offer.DataFields',offer.DataFields)\r\n      return offer.DataFields.length ? offer.DataFields.map((value, id) => {\r\n        console.log('currentOffers, offer.DataFields', value.is_check_topic)\r\n        if (value.is_check_topic) {\r\n          return (\r\n            <Link to={`/home/offer/${offer.id}`} key={index}>\r\n              <InfoCard\r\n                key={`renderOffers-${index}`}\r\n                className=\"mx-auto mb-4 w-full\"\r\n                data={offer}\r\n                provider={p}\r\n                groupedDataFields={groupedDataFields}\r\n                provider={offer.provider}\r\n                outlook={offer.outlook}\r\n                image={offer.rubric_attachment}\r\n                earnings={offer.earnings}\r\n                outEarvValue={true}\r\n                bannerImage={offer.banner_image}\r\n                mainImage={offer.main_image}\r\n              />\r\n            </Link>\r\n          );\r\n        }\r\n      }) : false\r\n    });\r\n  };\r\n\r\n  const renderOffersOutlook = () => {\r\n    let currentOf = [];\r\n    let offerId = null;\r\n    let _offers = compact(currentTopic.Offers);\r\n    console.log('renderOffersOutlook _offers',_offers)\r\n\r\n    for (let i = 0; i < _offers.length; i++) {\r\n      offerId = _offers[i].id;\r\n      currentOf.push(PathwayStore.entities);\r\n    }\r\n    if (currentTopic.name === 'Others') {\r\n      // currentOf = Object.values(PathwayStore.entities).filter(hasNoTopicsOutlook);\r\n      currentOf = Object.values(PathwayStore.entities)\r\n    }\r\n    // console.log(\"current\",currentOf)\r\n    // currentOf = sortBy(currentOf, [{'outlook' : 'desc'}]);\r\n    currentOf.sort((a, b) => parseFloat(b.outlook) - parseFloat(a.outlook));\r\n    console.log(\"currentOf\", currentOf)\r\n    return currentOf.map((offer, index) => {\r\n      let p = null;\r\n      let outlook\r\n      let earnings\r\n      let image = []\r\n      if (offer && offer.provider_id && offer.Provider) {\r\n        p = offer.Provider;\r\n        image = offer.rubric_attachment\r\n        outlook = offer.outlook\r\n        earnings = offer.earnings\r\n      }\r\n      console.log('currentOf', offer,'\\n offer.DataFields',offer.DataFields,'\\n offer && offer.DataFields',offer && offer.DataFields)\r\n      if(offer && offer.DataFields){\r\n       return offer.DataFields.length ? offer.DataFields.map((value, id) => {\r\n          console.log('offer.DataFields', value.is_check_topic)\r\n          if (value.is_check_topic) {\r\n            return (\r\n              <Link to={`/home/pathway/${offer.id}`} key={index} >\r\n                <InfoCard\r\n                  key={index}\r\n                  className=\"mx-auto mb-4 w-full\"\r\n                  data={offer}\r\n                  provider={offer.provider}\r\n                  outlook={offer.outlook}\r\n                  image={offer.rubric_attachment}\r\n                  earnings={offer.earnings}\r\n                  groupedDataFields={groupedDataFields}\r\n                  outEarvValue={true}\r\n                  bannerImage={offer.banner_image}\r\n                  mainImage={offer.main_image}\r\n                />\r\n              </Link>\r\n            );\r\n          }\r\n        }) : false\r\n      }else{\r\n        return false\r\n      }\r\n      // return offer && offer.DataFields ? :false\r\n    });\r\n  };\r\n\r\n  const renderOffersEarning = () => {\r\n    let currentOffers = [];\r\n    let offerId = null;\r\n    let _offers = compact(currentTopic.Offers);\r\n    console.log('renderOffersEarning _offers',_offers)\r\n\r\n    for (let i = 0; i < _offers.length; i++) {\r\n      offerId = _offers[i].id;\r\n      currentOffers.push(PathwayStore.entities);\r\n    }\r\n    if (currentTopic.name === 'Others') {\r\n      currentOffers = Object.values(PathwayStore.entities).filter(hasNoTopicsOutlook);\r\n    }\r\n    // currentOffers = sortBy(currentOffers, [{'earnings' : 'desc'}]);\r\n    currentOffers.sort((a, b) => parseFloat(b.earnings) - parseFloat(a.earnings));\r\n    return currentOffers.map((offer, index) => {\r\n      let p = null;\r\n      let outlook = null\r\n      let earnings = null\r\n      let image = []\r\n      let mainImage = []\r\n      if (offer && offer.provider_id && offer.Provider) {\r\n        console.log(\"offer\", offer)\r\n        p = offer.Provider;\r\n        outlook = offer.outlook\r\n        earnings = offer.earnings\r\n        image = offer.rubric_attachment\r\n        mainImage = offer.main_image\r\n      }\r\n      if(offer && offer.DataFields){\r\n        console.log('\\n currentOffers offer.DataFields',offer.DataFields)\r\n        return offer.DataFields.length ? offer.DataFields.map((value, id) => {\r\n          console.log('offer.DataFields', value.is_check_topic)\r\n          if (value.is_check_topic) {\r\n            return (\r\n              <Link to={`/home/pathway/${offer.id}`} key={index}>\r\n                <InfoCard\r\n                  key={index}\r\n                  className=\"mx-auto mb-4 w-full\"\r\n                  data={offer}\r\n                  provider={offer.provider}\r\n                  outlook={offer.outlook}\r\n                  image={offer.rubric_attachment}\r\n                  earnings={offer.earnings}\r\n                  groupedDataFields={groupedDataFields}\r\n                  outEarvValue={true}\r\n                  bannerImage={offer.banner_image}\r\n                  mainImage={offer.main_image}\r\n                />\r\n              </Link>\r\n            );\r\n          }\r\n        }) : false\r\n      }else{\r\n        return false\r\n      }\r\n\r\n     \r\n    });\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"h-auto w-full homepage_boxes\">\r\n        <TitleDivider\r\n          title={'Top outlooks'}\r\n          align=\"right\"\r\n          classNames={{ middleSpan: 'text-base' }}\r\n        />\r\n        <Carousel\r\n          className=\"custom-carousel mb-2 cursor-grab\"\r\n          centerMode\r\n          infiniteLoop\r\n          centerSlidePercentage={90}\r\n          showArrows={true}\r\n          showIndicators={false}\r\n          swipeable={true}\r\n          emulateTouch={true}\r\n          onChange={handleChange}\r\n          showStatus={true}\r\n          statusFormatter={handleCurrentItemOutlook}\r\n          showThumbs={false}\r\n          renderArrowNext={(...rest) => {\r\n            return renderArrowBtns(...rest, faArrowRight);\r\n          }}\r\n          renderArrowPrev={(...rest) => {\r\n            return renderArrowBtns(...rest, faArrowLeft, { left: 15 });\r\n          }}\r\n          swipeScrollTolerance={1}\r\n        >\r\n          <Card\r\n            className=\"mx-auto text-white text-lg w-auto flex justify-center items-center\"\r\n            style={{\r\n              backgroundColor: 'rgb(7, 25, 80)',\r\n              height: 50,\r\n            }}\r\n          // key={index}\r\n          >\r\n            {\"Outlooks\"}\r\n          </Card>\r\n        </Carousel>\r\n        <main>{currentTopic && renderOffersOutlook()}</main>\r\n      </div>\r\n      <div className=\"h-auto w-full homepage_boxes\">\r\n        <TitleDivider\r\n          title={'OFFERS BY TOPICS'}\r\n          align=\"center\"\r\n          classNames={{ middleSpan: 'text-base' }}\r\n        />\r\n        <Carousel\r\n          className=\"custom-carousel mb-2 cursor-grab\"\r\n          centerMode\r\n          infiniteLoop\r\n          centerSlidePercentage={90}\r\n          showArrows={true}\r\n          showIndicators={false}\r\n          swipeable={true}\r\n          emulateTouch={true}\r\n          onChange={handleChange}\r\n          showStatus={true}\r\n          statusFormatter={handleCurrentItem}\r\n          showThumbs={false}\r\n          renderArrowNext={(...rest) => {\r\n            return renderArrowBtns(...rest, faArrowRight);\r\n          }}\r\n          renderArrowPrev={(...rest) => {\r\n            return renderArrowBtns(...rest, faArrowLeft, { left: 15 });\r\n          }}\r\n          swipeScrollTolerance={1}\r\n        >\r\n          {filterData && filterData.map((topic, index) => {\r\n            if (topic.is_check_topic) {\r\n              return (\r\n                <Card\r\n                  className=\"mx-auto text-white text-lg w-auto flex justify-center items-center\"\r\n                  style={{\r\n                    backgroundColor: 'rgb(7, 25, 80)',\r\n                    height: 50,\r\n                  }}\r\n                  key={index}\r\n                  // onClick={ha}\r\n                >\r\n                  {topic.name}\r\n                </Card>\r\n              );\r\n            }\r\n          })}\r\n        </Carousel>\r\n        <main>{currentTopic && renderOffers()}</main>\r\n      </div>\r\n      <div className=\"h-auto w-full homepage_boxes\">\r\n        <TitleDivider\r\n          title={'Top Earning'}\r\n          align=\"Left\"\r\n          classNames={{ middleSpan: 'text-base' }}\r\n        />\r\n        <Carousel\r\n          className=\"custom-carousel mb-2 cursor-grab\"\r\n          centerMode\r\n          infiniteLoop\r\n          centerSlidePercentage={90}\r\n          showArrows={true}\r\n          showIndicators={false}\r\n          swipeable={true}\r\n          emulateTouch={true}\r\n          onChange={handleChange}\r\n          showStatus={true}\r\n          statusFormatter={handleCurrentItemOutlook}\r\n          showThumbs={false}\r\n          renderArrowNext={(...rest) => {\r\n            return renderArrowBtns(...rest, faArrowRight);\r\n          }}\r\n          renderArrowPrev={(...rest) => {\r\n            return renderArrowBtns(...rest, faArrowLeft, { left: 15 });\r\n          }}\r\n          swipeScrollTolerance={1}\r\n        >\r\n          <Card\r\n            className=\"mx-auto text-white text-lg w-auto flex justify-center items-center\"\r\n            style={{\r\n              backgroundColor: 'rgb(7, 25, 80)',\r\n              height: 50,\r\n            }}\r\n          // key={index}\r\n          >\r\n            {\"Earning\"}\r\n          </Card>\r\n        </Carousel>\r\n        <main>{currentTopic && renderOffersEarning()}</main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}