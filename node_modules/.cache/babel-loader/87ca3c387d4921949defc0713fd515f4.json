{"ast":null,"code":"import _asyncToGenerator from \"/home/devnineteen/Desktop/Projects/Evergreen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/devnineteen/Desktop/Projects/Evergreen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _property from \"lodash/property\";\nimport _groupBy from \"lodash/groupBy\";\nimport _filter from \"lodash/filter\";\nvar _jsxFileName = \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/components/datafield/SelectOptionsContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useGlobalStore from 'store/GlobalStore';\nimport axiosInstance from 'services/AxiosInstance';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons';\nimport { TitleDivider } from 'components/shared';\nimport useAxios, { configure } from 'axios-hooks';\nimport { Card, Input, Button, Row, Col, Form } from 'antd';\nconfigure({\n  axios: axiosInstance\n});\nexport default function SelectOptionsContainer(props) {\n  const history = useHistory();\n\n  const _useGlobalStore = useGlobalStore(),\n        datafieldStore = _useGlobalStore.datafield;\n\n  const _Form$useForm = Form.useForm(),\n        _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n        form = _Form$useForm2[0];\n\n  const _useAxios = useAxios('/datafields?type=frequency_unit&type=part_of_day_unit&type=credit_unit&type=payment_unit&type=length_unit'),\n        _useAxios2 = _slicedToArray(_useAxios, 1),\n        _useAxios2$ = _useAxios2[0],\n        getData = _useAxios2$.data,\n        getDataError = _useAxios2$.error;\n\n  if (getDataError) {\n    history.push('/error/500');\n  }\n\n  const _useAxios3 = useAxios({\n    url: '/datafields',\n    method: 'POST'\n  }, {\n    manual: true\n  }),\n        _useAxios4 = _slicedToArray(_useAxios3, 2),\n        postData = _useAxios4[0].data,\n        executePost = _useAxios4[1];\n\n  function createSelectOption(_x) {\n    return _createSelectOption.apply(this, arguments);\n  }\n\n  function _createSelectOption() {\n    _createSelectOption = _asyncToGenerator(function* (fieldValue) {\n      if (!fieldValue) {\n        return;\n      }\n\n      const data = form.getFieldValue(fieldValue);\n\n      if (!data || !data.length) {\n        return;\n      }\n\n      yield executePost({\n        data: {\n          name: data,\n          type: fieldValue\n        }\n      });\n      form.resetFields([fieldValue]);\n    });\n    return _createSelectOption.apply(this, arguments);\n  }\n\n  function deleteDataField(_x2) {\n    return _deleteDataField.apply(this, arguments);\n  }\n\n  function _deleteDataField() {\n    _deleteDataField = _asyncToGenerator(function* (id) {\n      const response = yield axiosInstance.delete(`/datafields/${id}`);\n\n      if (response.status === 200) {\n        datafieldStore.removeOneByIdKey(id);\n      }\n    });\n    return _deleteDataField.apply(this, arguments);\n  }\n\n  useEffect(() => {\n    if (getData) {\n      datafieldStore.addMany(getData);\n    }\n\n    if (postData) {\n      datafieldStore.addOne(postData);\n    }\n  }, [getData, postData]);\n\n  const filtered = _filter(Object.values(datafieldStore.entities), datafield => datafield.type === 'frequency_unit' || datafield.type === 'part_of_day_unit' || datafield.type === 'credit_unit' || datafield.type === 'payment_unit' || datafield.type === 'length_unit' || datafield.type === 'cost_unit');\n\n  const grouped = _groupBy(filtered, _property('type'));\n\n  const _grouped$frequency_un = grouped.frequency_unit,\n        frequency_unit = _grouped$frequency_un === void 0 ? [] : _grouped$frequency_un,\n        _grouped$part_of_day_ = grouped.part_of_day_unit,\n        part_of_day_unit = _grouped$part_of_day_ === void 0 ? [] : _grouped$part_of_day_,\n        _grouped$credit_unit = grouped.credit_unit,\n        credit_unit = _grouped$credit_unit === void 0 ? [] : _grouped$credit_unit,\n        _grouped$payment_unit = grouped.payment_unit,\n        payment_unit = _grouped$payment_unit === void 0 ? [] : _grouped$payment_unit,\n        _grouped$length_unit = grouped.length_unit,\n        length_unit = _grouped$length_unit === void 0 ? [] : _grouped$length_unit,\n        _grouped$cost_unit = grouped.cost_unit,\n        cost_unit = _grouped$cost_unit === void 0 ? [] : _grouped$cost_unit;\n  const fields = [{\n    fieldName: 'frequency_unit',\n    title: 'Frequency Units',\n    group: frequency_unit\n  }, {\n    fieldName: 'part_of_day_unit',\n    title: 'Day/Time Options',\n    group: part_of_day_unit\n  }, {\n    fieldName: 'credit_unit',\n    title: 'Credits Units Options',\n    group: credit_unit\n  }, {\n    fieldName: 'payment_unit',\n    title: 'Payment Units Options',\n    group: payment_unit\n  }, {\n    fieldName: 'length_unit',\n    title: 'Length Units Options',\n    group: length_unit\n  }, {\n    fieldName: 'cost_unit',\n    title: 'Cost Units Options',\n    group: cost_unit\n  }];\n  return /*#__PURE__*/React.createElement(Card, {\n    title: \"Custom Select Options\",\n    className: \"shadow-md rounded-md mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, fields.map(({\n    title,\n    fieldName,\n    group\n  }, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TitleDivider, {\n      title: title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      className: \"flex-wrap pr-2\",\n      gutter: [10, 10],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }, group.map((unit, index) => {\n      return /*#__PURE__*/React.createElement(Col, {\n        lg: 4,\n        md: 6,\n        sm: 24,\n        xs: 24,\n        key: index.toString(),\n        className: \"h-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"border border-solid rounded-l px-1 w-full h-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 27\n        }\n      }, unit.name), /*#__PURE__*/React.createElement(Button, {\n        className: \"flex justify-center rounded-l-none rounded-r items-center\",\n        type: \"primary\",\n        size: \"small\",\n        danger: true,\n        onClick: () => deleteDataField(unit.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        className: \"text-xs\",\n        icon: faMinus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 29\n        }\n      }))));\n    }), /*#__PURE__*/React.createElement(Col, {\n      lg: 4,\n      md: 6,\n      sm: 24,\n      className: \"h-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: fieldName,\n      className: \"relative\",\n      style: {\n        bottom: 4\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 22,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      className: \"rounded-l rounded-r-none h-6 w-full\",\n      name: fieldName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      span: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"rounded-l-none rounded-r\",\n      type: \"primary\",\n      size: \"small\",\n      htmlType: \"submit\",\n      onClick: () => createSelectOption(fieldName),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"text-xs\",\n      icon: faPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 29\n      }\n    }))))))));\n  }))));\n}\n\n__signature__(SelectOptionsContainer, \"useHistory{history}\\nuseGlobalStore{{ datafield: datafieldStore }}\\nuseForm{[form]}\\nuseAxios{[{ data: getData, error: getDataError }]}\\nuseAxios{[{ data: postData }, executePost]}\\nuseEffect{}\", () => [useHistory, useGlobalStore, useAxios, useAxios]);\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(SelectOptionsContainer, \"SelectOptionsContainer\", \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/components/datafield/SelectOptionsContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Desktop/Projects/Evergreen-client/src/components/datafield/SelectOptionsContainer.js"],"names":["React","useEffect","useHistory","useGlobalStore","axiosInstance","FontAwesomeIcon","faPlus","faMinus","TitleDivider","useAxios","configure","Card","Input","Button","Row","Col","Form","axios","SelectOptionsContainer","props","history","datafieldStore","datafield","useForm","form","getData","data","getDataError","error","push","url","method","manual","postData","executePost","createSelectOption","fieldValue","getFieldValue","length","name","type","resetFields","deleteDataField","id","response","delete","status","removeOneByIdKey","addMany","addOne","filtered","Object","values","entities","grouped","frequency_unit","part_of_day_unit","credit_unit","payment_unit","length_unit","cost_unit","fields","fieldName","title","group","map","index","unit","toString","bottom"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons';\r\nimport { TitleDivider } from 'components/shared';\r\n\r\nimport useAxios, { configure } from 'axios-hooks';\r\nimport { Card, Input, Button, Row, Col, Form } from 'antd';\r\nimport { filter, groupBy, property } from 'lodash';\r\n\r\nconfigure({\r\n  axios: axiosInstance,\r\n});\r\n\r\nexport default function SelectOptionsContainer(props) {\r\n  const history = useHistory();\r\n  const { datafield: datafieldStore } = useGlobalStore();\r\n  const [form] = Form.useForm();\r\n\r\n  const [{ data: getData, error: getDataError }] = useAxios(\r\n    '/datafields?type=frequency_unit&type=part_of_day_unit&type=credit_unit&type=payment_unit&type=length_unit'\r\n  );\r\n\r\n  if (getDataError) {\r\n    history.push('/error/500');\r\n  }\r\n\r\n  const [{ data: postData }, executePost] = useAxios(\r\n    {\r\n      url: '/datafields',\r\n      method: 'POST',\r\n    },\r\n    { manual: true }\r\n  );\r\n\r\n  async function createSelectOption(fieldValue) {\r\n    if (!fieldValue) {\r\n      return;\r\n    }\r\n    const data = form.getFieldValue(fieldValue);\r\n    if (!data || !data.length) {\r\n      return;\r\n    }\r\n    await executePost({\r\n      data: {\r\n        name: data,\r\n        type: fieldValue,\r\n      },\r\n    });\r\n    form.resetFields([fieldValue]);\r\n  }\r\n\r\n  async function deleteDataField(id) {\r\n    const response = await axiosInstance.delete(`/datafields/${id}`);\r\n    if (response.status === 200) {\r\n      datafieldStore.removeOneByIdKey(id);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (getData) {\r\n      datafieldStore.addMany(getData);\r\n    }\r\n    if (postData) {\r\n      datafieldStore.addOne(postData);\r\n    }\r\n  }, [getData, postData]);\r\n\r\n  const filtered = filter(\r\n    Object.values(datafieldStore.entities),\r\n    (datafield) =>\r\n      datafield.type === 'frequency_unit' ||\r\n      datafield.type === 'part_of_day_unit' ||\r\n      datafield.type === 'credit_unit' ||\r\n      datafield.type === 'payment_unit' ||\r\n      datafield.type === 'length_unit' ||\r\n      datafield.type === 'cost_unit'\r\n  );\r\n\r\n  const grouped = groupBy(filtered, property('type'));\r\n\r\n  const {\r\n    frequency_unit = [],\r\n    part_of_day_unit = [],\r\n    credit_unit = [],\r\n    payment_unit = [],\r\n    length_unit = [],\r\n    cost_unit = [],\r\n  } = grouped;\r\n\r\n  const fields = [\r\n    {\r\n      fieldName: 'frequency_unit',\r\n      title: 'Frequency Units',\r\n      group: frequency_unit,\r\n    },\r\n    {\r\n      fieldName: 'part_of_day_unit',\r\n      title: 'Day/Time Options',\r\n      group: part_of_day_unit,\r\n    },\r\n    {\r\n      fieldName: 'credit_unit',\r\n      title: 'Credits Units Options',\r\n      group: credit_unit,\r\n    },\r\n    {\r\n      fieldName: 'payment_unit',\r\n      title: 'Payment Units Options',\r\n      group: payment_unit,\r\n    },\r\n    {\r\n      fieldName: 'length_unit',\r\n      title: 'Length Units Options',\r\n      group: length_unit,\r\n    },\r\n    {\r\n      fieldName: 'cost_unit',\r\n      title: 'Cost Units Options',\r\n      group: cost_unit,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Card title=\"Custom Select Options\" className=\"shadow-md rounded-md mb-4\">\r\n      <div>\r\n        <Form form={form}>\r\n          {fields.map(({ title, fieldName, group }, index) => {\r\n            return (\r\n              <div key={index}>\r\n                <TitleDivider title={title} />\r\n                <Row className=\"flex-wrap pr-2\" gutter={[10, 10]}>\r\n                  {group.map((unit, index) => {\r\n                    return (\r\n                      <Col\r\n                        lg={4}\r\n                        md={6}\r\n                        sm={24}\r\n                        xs={24}\r\n                        key={index.toString()}\r\n                        className=\"h-10\"\r\n                      >\r\n                        <div className=\"flex row\">\r\n                          <span className=\"border border-solid rounded-l px-1 w-full h-6\">\r\n                            {unit.name}\r\n                          </span>\r\n                          <Button\r\n                            className=\"flex justify-center rounded-l-none rounded-r items-center\"\r\n                            type=\"primary\"\r\n                            size=\"small\"\r\n                            danger\r\n                            onClick={() => deleteDataField(unit.id)}\r\n                          >\r\n                            <FontAwesomeIcon\r\n                              className=\"text-xs\"\r\n                              icon={faMinus}\r\n                            />\r\n                          </Button>\r\n                        </div>\r\n                      </Col>\r\n                    );\r\n                  })}\r\n                  <Col lg={4} md={6} sm={24} className=\"h-10\">\r\n                    <Form.Item\r\n                      name={fieldName}\r\n                      className=\"relative\"\r\n                      style={{ bottom: 4 }}\r\n                    >\r\n                      <Row>\r\n                        <Col span={22}>\r\n                          <Input\r\n                            className=\"rounded-l rounded-r-none h-6 w-full\"\r\n                            name={fieldName}\r\n                          />\r\n                        </Col>\r\n                        <Col span={2}>\r\n                          <Button\r\n                            className=\"rounded-l-none rounded-r\"\r\n                            type=\"primary\"\r\n                            size=\"small\"\r\n                            htmlType=\"submit\"\r\n                            onClick={() => createSelectOption(fieldName)}\r\n                          >\r\n                            <FontAwesomeIcon\r\n                              className=\"text-xs\"\r\n                              icon={faPlus}\r\n                            />\r\n                          </Button>\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Item>\r\n                  </Col>\r\n                </Row>\r\n              </div>\r\n            );\r\n          })}\r\n        </Form>\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}