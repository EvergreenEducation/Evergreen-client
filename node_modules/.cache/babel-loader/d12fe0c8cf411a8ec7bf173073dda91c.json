{"ast":null,"code":"import _objectSpread from \"/home/devnineteen/Desktop/Projects/Evergreen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/devnineteen/Desktop/Projects/Evergreen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/devnineteen/Desktop/Projects/Evergreen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/components/enrollment/BatchEnrollmentModal.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React from 'react';\nimport { Modal, Form, Button, notification, Col, InputNumber, Row, DatePicker } from 'antd';\nimport dayjs from 'dayjs';\nimport axiosInstance from 'services/AxiosInstance';\nimport EnrollmentStore from 'store/Enrollment';\nimport 'assets/scss/antd-overrides.scss';\nexport default function EnrollModal({\n  offer,\n  onCancel,\n  visible,\n  onSubmit\n}) {\n  const enrollmentStore = EnrollmentStore.useContainer();\n\n  const _Form$useForm = Form.useForm(),\n        _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n        form = _Form$useForm2[0];\n\n  const submitEnrollment = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        if (!offer || !offer.id) {\n          notification.warning({\n            message: 'Error',\n            description: \"Could not fetch the offer's information.\"\n          });\n          return;\n        }\n\n        const values = yield form.validateFields(['batch', 'start_date']);\n        const start_date = values.start_date;\n        const createEnrollment = yield axiosInstance.post('/enrollments/batch_create', _objectSpread(_objectSpread({}, values), {}, {\n          start_date: start_date ? dayjs(start_date).toISOString() : null,\n          offer_id: offer.id,\n          provider_id: offer.provider_id\n        }));\n\n        if (createEnrollment.status === 201) {\n          const enrollmentResponse = yield axiosInstance.get(`/enrollments?offer_id=${offer.id}&provider_id=${offer.provider_id}`);\n          enrollmentStore.addMany(enrollmentResponse.data);\n          notification.success({\n            message: 'Success',\n            description: 'Batch enrollments have been created.'\n          });\n          onSubmit();\n        } else {\n          notification.warning({\n            message: createEnrollment.status,\n            description: createEnrollment.statusText\n          });\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    });\n\n    return function submitEnrollment() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    forceRender: true,\n    className: \"custom-modal\",\n    title: 'Create Batch Enrollments',\n    visible: visible,\n    width: 520,\n    bodyStyle: {\n      backgroundColor: '#f0f2f5',\n      padding: 0\n    },\n    footer: true,\n    onCancel: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-6 overflow-y-auto\",\n    style: {\n      maxHeight: '32rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 8,\n    className: \"pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    xs: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Number of enrollments\",\n    labelAlign: 'left',\n    name: \"batch\",\n    colon: false,\n    className: \"mb-0 inherit flex-col w-full\",\n    rules: [{\n      required: true,\n      message: 'This field is required'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(InputNumber, {\n    className: \"rounded w-full\",\n    min: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    xs: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Start Date\",\n    name: \"start_date\",\n    labelAlign: 'left',\n    colon: false,\n    className: \"mb-0 inherit\",\n    rules: [{\n      required: true,\n      message: 'This field is required'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    className: \"w-full custom-datepicker rounded\",\n    format: \"MM-DD-YYYY\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"bg-white px-6 pt-5 pb-1 flex justify-center\",\n    style: {\n      borderTop: '1px solid #f0f0f0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"mr-3 px-10 rounded\",\n    size: \"small\",\n    type: \"primary\",\n    htmlType: \"submit\",\n    onClick: submitEnrollment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"Create\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"px-10 rounded\",\n    size: \"small\",\n    type: \"dashed\",\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, \"Cancel\"))));\n}\n\n__signature__(EnrollModal, \"useContainer{enrollmentStore}\\nuseForm{[form]}\");\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(EnrollModal, \"EnrollModal\", \"/home/devnineteen/Desktop/Projects/Evergreen-client/src/components/enrollment/BatchEnrollmentModal.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Desktop/Projects/Evergreen-client/src/components/enrollment/BatchEnrollmentModal.js"],"names":["React","Modal","Form","Button","notification","Col","InputNumber","Row","DatePicker","dayjs","axiosInstance","EnrollmentStore","EnrollModal","offer","onCancel","visible","onSubmit","enrollmentStore","useContainer","useForm","form","submitEnrollment","id","warning","message","description","values","validateFields","start_date","createEnrollment","post","toISOString","offer_id","provider_id","status","enrollmentResponse","get","addMany","data","success","statusText","err","console","error","backgroundColor","padding","maxHeight","required","borderTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Modal,\n  Form,\n  Button,\n  notification,\n  Col,\n  InputNumber,\n  Row,\n  DatePicker,\n} from 'antd';\nimport dayjs from 'dayjs';\nimport axiosInstance from 'services/AxiosInstance';\nimport EnrollmentStore from 'store/Enrollment';\nimport 'assets/scss/antd-overrides.scss';\n\nexport default function EnrollModal({ offer, onCancel, visible, onSubmit }) {\n  const enrollmentStore = EnrollmentStore.useContainer();\n  const [form] = Form.useForm();\n\n  const submitEnrollment = async () => {\n    try {\n      if (!offer || !offer.id) {\n        notification.warning({\n          message: 'Error',\n          description: \"Could not fetch the offer's information.\",\n        });\n        return;\n      }\n\n      const values = await form.validateFields(['batch', 'start_date']);\n      const { start_date } = values;\n      const createEnrollment = await axiosInstance.post(\n        '/enrollments/batch_create',\n        {\n          ...values,\n          start_date: start_date ? dayjs(start_date).toISOString() : null,\n          offer_id: offer.id,\n          provider_id: offer.provider_id,\n        }\n      );\n\n      if (createEnrollment.status === 201) {\n        const enrollmentResponse = await axiosInstance.get(\n          `/enrollments?offer_id=${offer.id}&provider_id=${offer.provider_id}`\n        );\n\n        enrollmentStore.addMany(enrollmentResponse.data);\n\n        notification.success({\n          message: 'Success',\n          description: 'Batch enrollments have been created.',\n        });\n        onSubmit();\n      } else {\n        notification.warning({\n          message: createEnrollment.status,\n          description: createEnrollment.statusText,\n        });\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Modal\n      forceRender={true}\n      className=\"custom-modal\"\n      title={'Create Batch Enrollments'}\n      visible={visible}\n      width={520}\n      bodyStyle={{ backgroundColor: '#f0f2f5', padding: 0 }}\n      footer={true}\n      onCancel={onCancel}\n    >\n      <Form form={form}>\n        <div className=\"p-6 overflow-y-auto\" style={{ maxHeight: '32rem' }}>\n          <Row gutter={8} className=\"pb-5\">\n            <Col sm={12} md={12} xs={24}>\n              <Form.Item\n                label=\"Number of enrollments\"\n                labelAlign={'left'}\n                name=\"batch\"\n                colon={false}\n                className=\"mb-0 inherit flex-col w-full\"\n                rules={[{ required: true, message: 'This field is required' }]}\n              >\n                <InputNumber className=\"rounded w-full\" min={0} />\n              </Form.Item>\n            </Col>\n            <Col sm={12} md={12} xs={24}>\n              <Form.Item\n                label=\"Start Date\"\n                name=\"start_date\"\n                labelAlign={'left'}\n                colon={false}\n                className=\"mb-0 inherit\"\n                rules={[{ required: true, message: 'This field is required' }]}\n              >\n                <DatePicker\n                  className=\"w-full custom-datepicker rounded\"\n                  format=\"MM-DD-YYYY\"\n                />\n              </Form.Item>\n            </Col>\n          </Row>\n        </div>\n        <section\n          className=\"bg-white px-6 pt-5 pb-1 flex justify-center\"\n          style={{\n            borderTop: '1px solid #f0f0f0',\n          }}\n        >\n          <Button\n            className=\"mr-3 px-10 rounded\"\n            size=\"small\"\n            type=\"primary\"\n            htmlType=\"submit\"\n            onClick={submitEnrollment}\n          >\n            Create\n          </Button>\n          <Button\n            className=\"px-10 rounded\"\n            size=\"small\"\n            type=\"dashed\"\n            onClick={onCancel}\n          >\n            Cancel\n          </Button>\n        </section>\n      </Form>\n    </Modal>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}