{"ast":null,"code":"import _createForOfIteratorHelper from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _objectSpread from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/devnineteen/Music/evergreen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useState, useEffect } from 'react';\nimport { Layout, Button, Empty, Popover, Switch, Row, Col, Select, Table } from 'antd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFilter } from '@fortawesome/free-solid-svg-icons';\nimport matchSorter from 'match-sorter';\nimport useAxios, { configure } from 'axios-hooks';\nimport axiosInstance from 'services/AxiosInstance';\nimport { LogOutTopbar, SearchHeader, TitleDivider } from 'components/shared';\nimport useGlobalStore from 'store/GlobalStore';\nimport PromoteCard from 'components/promotion/PromoteCard/PromoteCard';\nimport { getGenericData } from 'components/datafield/GenericContainer';\n\nconst axios = require('axios').default;\n\nconst Column = Table.Column;\nconfigure({\n  axios: axiosInstance\n});\nconst Content = Layout.Content;\nconst Option = Select.Option;\n\nconst preloadOptions = (data = []) => data.map((item, index) => {\n  return /*#__PURE__*/React.createElement(Option, {\n    value: item.id,\n    key: index.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, item.name);\n});\n\nconst _default = function _default(props) {\n  const session = props.session;\n  const adminId = session.id;\n\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        searchString = _useState2[0],\n        setSearchString = _useState2[1];\n\n  const _useState3 = useState(true),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showPromoted = _useState4[0],\n        setShowPromoted = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        fileData = _useState6[0],\n        setFileData = _useState6[1];\n\n  const _useState7 = useState({\n    files: [],\n    name: \"\"\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        inputFile = _useState8[0],\n        setInputFile = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        bannerList = _useState10[0],\n        setBannerList = _useState10[1];\n\n  const _useState11 = useState({\n    offer: true,\n    pathway: true,\n    provider: true\n  }),\n        _useState12 = _slicedToArray(_useState11, 2),\n        filters = _useState12[0],\n        setFilters = _useState12[1];\n\n  const _useGlobalStore = useGlobalStore(),\n        providerStore = _useGlobalStore.provider,\n        pathwayStore = _useGlobalStore.pathway,\n        offerStore = _useGlobalStore.offer,\n        dataFieldStore = _useGlobalStore.datafield;\n\n  const _useAxios = useAxios('/pathways?scope=with_files'),\n        _useAxios2 = _slicedToArray(_useAxios, 1),\n        getPathways = _useAxios2[0].data;\n\n  const _useAxios3 = useAxios('/offers?scope=with_files'),\n        _useAxios4 = _slicedToArray(_useAxios3, 1),\n        getOffers = _useAxios4[0].data;\n\n  const _useAxios5 = useAxios('/providers?scope=with_files'),\n        _useAxios6 = _slicedToArray(_useAxios5, 1),\n        getProviders = _useAxios6[0].data;\n\n  const _useAxios7 = useAxios('/datafields?type=topic'),\n        _useAxios8 = _slicedToArray(_useAxios7, 1),\n        getDataField = _useAxios8[0].data;\n\n  const _useState13 = useState([]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        selectedTopicValue = _useState14[0],\n        setSelectedTopicValue = _useState14[1];\n\n  const updateData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (selectedTopicValue) {\n      // console.log(\"-----------\", selectedTopicValue)\n      let user_id = selectedTopicValue;\n      let Data = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/update_topic`, {\n        user_id\n      });\n      return Data;\n    });\n\n    return function updateData(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const offers = Object.values(offerStore.entities).map(o => {\n    return _objectSpread(_objectSpread({}, o), {}, {\n      entity_type: 'offer'\n    });\n  });\n  const providers = Object.values(providerStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'provider'\n    });\n  });\n  const pathways = Object.values(pathwayStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'pathway'\n    });\n  });\n  const datafield = Object.values(dataFieldStore.entities).map(p => {\n    return _objectSpread(_objectSpread({}, p), {}, {\n      entity_type: 'datafield'\n    });\n  });\n  const data = [...offers, ...pathways, ...providers];\n\n  function toggleFilter(key = 'offer') {\n    setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n      [key]: !filters[key]\n    }));\n  }\n\n  function filterContent() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-between mb-1\",\n      gutter: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"Providers\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      size: \"small\",\n      defaultChecked: filters.provider,\n      onClick: () => toggleFilter('provider'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-between mb-1\",\n      gutter: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }, \"Offers\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      size: \"small\",\n      defaultChecked: filters.offer,\n      onClick: () => toggleFilter('offer'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-between\",\n      gutter: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }, \"Pathways\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      size: \"small\",\n      defaultChecked: filters.pathway,\n      onClick: () => toggleFilter('pathway'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n  const handleDataSearch = searchVal => {\n    return setSearchString(searchVal);\n  };\n\n  const handleOnChange = event => {\n    if (showPromoted) {\n      setShowPromoted(false);\n    }\n\n    if (event.target.value.length === 0) {\n      setShowPromoted(true);\n    }\n\n    setSearchString(event.target.value);\n  };\n\n  const handleDataAfterSearch = (data, keys = ['name', 'keywords']) => {\n    return matchSorter(data, searchString, {\n      keys\n    });\n  };\n\n  let showData = handleDataAfterSearch(data);\n\n  if (showPromoted) {\n    showData = showData.filter(d => {\n      if (filters.offer && d.entity_type === 'offer' && (d.is_main_promo || d.is_local_promo)) {\n        return true;\n      }\n\n      if (filters.provider && d.entity_type === 'provider' && (d.is_main_promo || d.is_local_promo)) {\n        return true;\n      }\n\n      if (filters.pathway && d.entity_type === 'pathway' && (d.is_main_promo || d.is_local_promo)) {\n        return true;\n      }\n\n      return false;\n    });\n  } else {\n    showData = showData.filter(d => {\n      if (filters.offer && d.entity_type === 'offer') {\n        return true;\n      }\n\n      if (filters.provider && d.entity_type === 'provider') {\n        return true;\n      }\n\n      if (filters.pathway && d.entity_type === 'pathway') {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  useEffect(() => {\n    if (getPathways) {\n      pathwayStore.addMany(getPathways);\n    }\n\n    if (getOffers) {\n      offerStore.addMany(getOffers);\n    }\n\n    if (getProviders) {\n      providerStore.addMany(getProviders);\n    }\n  }, [getPathways, getOffers, getProviders]);\n\n  const getBannerApi = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      let token = JSON.parse(localStorage.getItem(\"currentSession\"));\n      let user_id = token.id;\n      let user_role = token.role; // console.log(\"filesdataaaa\", user_id, user_role)\n\n      let Data = yield axios.get(`${process.env.REACT_APP_API_URL}/api/v1/files/get_banner_list/${user_id}/${user_role}`);\n      return Data;\n    });\n\n    return function getBannerApi() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(() => {\n    getBannerApi().then(resp => {\n      // console.log(resp, \"resp\")\n      // let finaldata = []\n      // resp.data.data.map((item,i) => {\n      //   let imagedata = item.landing_image\n      //   imagedata && imagedata.map(it => {\n      //     let parsedata = JSON.parse(it)\n      //     finaldata.push(parsedata)\n      //   })\n      // })\n      setBannerList(resp.data.data); // console.log(finaldata, \"parssssssssssss\")\n    }).catch(error => {\n      console.log(error, \"error\");\n    });\n  }, []);\n\n  const handleMultipleDropdown = value => {\n    // console.log('valeue', value)\n    setSelectedTopicValue(value);\n  }; // submit selected option in promotion page\n\n\n  const submitSelectedTopics = event => {\n    // console.log('electedTopicValue', selectedTopicValue)\n    updateData(selectedTopicValue).then(resp => {// console.log(resp, \"reeeeeeeee\")\n    }).catch(error => {\n      console.log(error, \"errroor\");\n    });\n  };\n\n  const onChangeUpload = e => {\n    let emailvalue = _objectSpread(_objectSpread({}, inputFile), {}, {\n      files: e.target.files\n    });\n\n    setInputFile(emailvalue);\n\n    if (e.target.files.length) {\n      handleButton(e.target.files);\n    }\n  };\n\n  const handleButton = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(function* (files) {\n      // console.log(files)\n      yield fileDataApi(files).then( /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator(function* (resp) {\n          // console.log(resp, \"responssssssssssss\")\n          setFileData(resp.data.data); // notify(\"success\")\n        });\n\n        return function (_x3) {\n          return _ref4.apply(this, arguments);\n        };\n      }()).catch(error => {\n        console.log(error, \"erorrr\");\n      });\n    });\n\n    return function handleButton(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  const fileDataApi = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(function* (inputFile) {\n      let fileData = inputFile; // console.log(\"filesdataaaa\", fileData)\n\n      const data = new FormData();\n\n      var _iterator = _createForOfIteratorHelper(fileData),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          const File = _step.value;\n          data.append('files', File);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      let pdfData = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/upload_single_file`, data, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return pdfData;\n    });\n\n    return function fileDataApi(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  const addFileData = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator(function* ({\n      fileData,\n      inputFile\n    }) {\n      let token = JSON.parse(localStorage.getItem(\"currentSession\"));\n      let user_id = token.id;\n      let user_role = token.role;\n      let landing_image = fileData;\n      var prefix = 'http://';\n      let image_url = prefix + inputFile.name;\n      let pdfData = yield axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/add_banner_files`, {\n        user_id,\n        user_role,\n        landing_image,\n        image_url\n      });\n      return pdfData;\n    });\n\n    return function addFileData(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  const handleSubmit = () => {\n    addFileData({\n      fileData,\n      inputFile\n    }).then(resp => {// console.log(resp, \"resssssssssssssss\")\n    }).catch(error => {\n      console.log(\"error\", error);\n    });\n  };\n\n  const handleInput = e => {\n    let text = _objectSpread(_objectSpread({}, inputFile), {}, {\n      name: e.target.value\n    });\n\n    setInputFile(text);\n  };\n\n  const handleLink = text => {\n    // console.log(\"teeeeeeeee\", text)\n    window.open(`${text.image_url}`); // window.location.href = text.image_url;\n  }; // console.log(\"bannerList\", bannerList)\n\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    className: \"bg-transparent h-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LogOutTopbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SearchHeader, {\n    title: \"PROMOTIONS\",\n    onSearch: handleDataSearch,\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Popover, {\n    content: filterContent,\n    trigger: \"click\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"rounded ml-1 px-4 text-center\",\n    type: \"primary\",\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"text-white text-xs\",\n    icon: faFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Select, {\n    title: \"Select Title\",\n    showSearch: true,\n    className: \"w-full custom-select ml-1\",\n    mode: \"multiple\",\n    onChange: handleMultipleDropdown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 11\n    }\n  }, preloadOptions(getDataField)), selectedTopicValue.length ? /*#__PURE__*/React.createElement(Button, {\n    className: \"rounded ml-1 px-4 text-center\",\n    type: \"primary\",\n    size: \"small\",\n    onClick: submitSelectedTopics,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 41\n    }\n  }, \"Submit\") : '')), /*#__PURE__*/React.createElement(Content, {\n    className: \"p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TitleDivider, {\n    title: \"My Promotions\",\n    styles: {\n      leftContainer: {\n        backgroundColor: '#4a5568'\n      },\n      rightContainer: {\n        backgroundColor: '#4a5568'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shadow-md rounded-md w-full bg-white h-full pt-4 px-5 flex flex-wrap mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }\n  }, showData.length && showData.filter(function ({\n    main_promoted_by_user_ids,\n    local_promoted_by_user_ids\n  }) {\n    return main_promoted_by_user_ids.includes(adminId) || local_promoted_by_user_ids.includes(adminId);\n  }).map((d, index) => {\n    return /*#__PURE__*/React.createElement(PromoteCard, {\n      key: index,\n      data: d,\n      session: session,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 24\n      }\n    });\n  }) || /*#__PURE__*/React.createElement(Empty, {\n    className: \"m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(TitleDivider, {\n    title: \"Other Promotions\\t& Search Results\",\n    styles: {\n      leftContainer: {\n        backgroundColor: '#4a5568'\n      },\n      rightContainer: {\n        backgroundColor: '#4a5568'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"shadow-md rounded-md w-full bg-white h-full pt-4 px-5 flex flex-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 9\n    }\n  }, showData.length && showData.map((d, index) => {\n    return /*#__PURE__*/React.createElement(PromoteCard, {\n      key: index,\n      data: d,\n      session: session,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 22\n      }\n    });\n  }) || /*#__PURE__*/React.createElement(Empty, {\n    className: \"m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(TitleDivider, {\n    title: \"Landing Page Image\",\n    styles: {\n      leftContainer: {\n        backgroundColor: '#4a5568'\n      },\n      rightContainer: {\n        backgroundColor: '#4a5568'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Layout, {\n    className: \"h-auto mb-6 opportunity_choose\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"landing_page_image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 13\n    }\n  }, \"Landing Page Image\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"file-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    multiple: true,\n    type: \"file\",\n    name: \"file\",\n    onChange: e => onChangeUpload(e, \"files\"),\n    accept: \"image/*,video/*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 15\n    }\n  }, \"Choose\"), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"label\",\n    \"data-js-label\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 49\n    }\n  }, inputFile !== null ? inputFile.files.name : \"Choose File\"))), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"landing_browse\",\n    onChange: e => handleInput(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image_block_opportunity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: fileData.origin,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit_btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleSubmit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 15\n    }\n  }, \"Submit\")))), /*#__PURE__*/React.createElement(Table, {\n    ref: bannerList // loading={loading}\n    ,\n    pagination: {\n      pageSize: 8\n    },\n    dataSource: bannerList,\n    bordered: true,\n    className: \"ant-table-wrapper--responsive\",\n    rowClassName: () => 'antd-row',\n    rowKey: \"id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Column, {\n    className: \"antd-col\",\n    title: \"Image Listing\",\n    dataIndex: \"landing_image\",\n    key: \"landing_image\",\n    render: (text, record) => ({\n      children: text,\n      props: {\n        'landing_image': 'landing_image'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Column, {\n    className: \"antd-col\" // title=\"pdf_link\"\n    ,\n    key: \"image_url\",\n    render: (text, record, index) => ({\n      children: /*#__PURE__*/React.createElement(Button, {\n        onClick: () => handleLink(text),\n        title: \"PDF Listing\",\n        dataIndex: \"original\",\n        key: \"image_url\",\n        render: (text, record) => ({\n          children: text,\n          props: {\n            'image_url': 'image_url'\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 17\n        }\n      }, \"click here\"),\n      props: {\n        'image_url': 'image_url'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 11\n    }\n  }))));\n};\n\n__signature__(_default, \"useState{[searchString, setSearchString]('')}\\nuseState{[showPromoted, setShowPromoted](true)}\\nuseState{[fileData, setFileData]}\\nuseState{[inputFile, setInputFile]({\\r\\n    files: [],\\r\\n    name: \\\"\\\"\\r\\n\\r\\n  })}\\nuseState{[bannerList, setBannerList]([])}\\nuseState{[filters, setFilters]({\\r\\n    offer: true,\\r\\n    pathway: true,\\r\\n    provider: true,\\r\\n  })}\\nuseGlobalStore{{\\r\\n    provider: providerStore,\\r\\n    pathway: pathwayStore,\\r\\n    offer: offerStore,\\r\\n    datafield: dataFieldStore\\r\\n  }}\\nuseAxios{[{ data: getPathways }]}\\nuseAxios{[{ data: getOffers }]}\\nuseAxios{[{ data: getProviders }]}\\nuseAxios{[{ data: getDataField }]}\\nuseState{[selectedTopicValue, setSelectedTopicValue]([])}\\nuseEffect{}\\nuseEffect{}\", () => [useGlobalStore, useAxios, useAxios, useAxios, useAxios]);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(axios, \"axios\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\");\n  reactHotLoader.register(Column, \"Column\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\");\n  reactHotLoader.register(Content, \"Content\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\");\n  reactHotLoader.register(Option, \"Option\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\");\n  reactHotLoader.register(preloadOptions, \"preloadOptions\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/devnineteen/Music/evergreen-frontend/src/components/promotion/PromotionContainer.js"],"names":["React","useState","useEffect","Layout","Button","Empty","Popover","Switch","Row","Col","Select","Table","FontAwesomeIcon","faFilter","matchSorter","useAxios","configure","axiosInstance","LogOutTopbar","SearchHeader","TitleDivider","useGlobalStore","PromoteCard","getGenericData","axios","require","default","Column","Content","Option","preloadOptions","data","map","item","index","id","toString","name","props","session","adminId","searchString","setSearchString","showPromoted","setShowPromoted","fileData","setFileData","files","inputFile","setInputFile","bannerList","setBannerList","offer","pathway","provider","filters","setFilters","providerStore","pathwayStore","offerStore","dataFieldStore","datafield","getPathways","getOffers","getProviders","getDataField","selectedTopicValue","setSelectedTopicValue","updateData","user_id","Data","post","process","env","REACT_APP_API_URL","offers","Object","values","entities","o","entity_type","providers","p","pathways","toggleFilter","key","filterContent","handleDataSearch","searchVal","handleOnChange","event","target","value","length","handleDataAfterSearch","keys","showData","filter","d","is_main_promo","is_local_promo","addMany","getBannerApi","token","JSON","parse","localStorage","getItem","user_role","role","get","then","resp","catch","error","console","log","handleMultipleDropdown","submitSelectedTopics","onChangeUpload","e","emailvalue","handleButton","fileDataApi","FormData","File","append","pdfData","headers","addFileData","landing_image","prefix","image_url","handleSubmit","handleInput","text","handleLink","window","open","leftContainer","backgroundColor","rightContainer","main_promoted_by_user_ids","local_promoted_by_user_ids","includes","origin","pageSize","record","children"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Layout, Button, Empty, Popover, Switch, Row, Col, Select, Table } from 'antd';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFilter } from '@fortawesome/free-solid-svg-icons';\r\nimport matchSorter from 'match-sorter';\r\nimport useAxios, { configure } from 'axios-hooks';\r\nimport axiosInstance from 'services/AxiosInstance';\r\nimport { LogOutTopbar, SearchHeader, TitleDivider } from 'components/shared';\r\nimport useGlobalStore from 'store/GlobalStore';\r\nimport PromoteCard from 'components/promotion/PromoteCard/PromoteCard';\r\nimport { getGenericData } from 'components/datafield/GenericContainer';\r\nconst axios = require('axios').default;\r\nconst { Column } = Table;\r\n\r\nconfigure({\r\n  axios: axiosInstance,\r\n});\r\n\r\nconst { Content } = Layout;\r\n\r\nconst { Option } = Select;\r\n\r\nconst preloadOptions = (data = []) =>\r\n  data.map((item, index) => {\r\n    return (\r\n      <Option value={item.id} key={index.toString()}>\r\n        {item.name}\r\n      </Option>\r\n    );\r\n  });\r\n\r\nexport default function (props) {\r\n  const { session } = props;\r\n  const adminId = session.id;\r\n  const [searchString, setSearchString] = useState('');\r\n  const [showPromoted, setShowPromoted] = useState(true);\r\n  const [fileData, setFileData] = useState()\r\n  const [inputFile, setInputFile] = useState({\r\n    files: [],\r\n    name: \"\"\r\n\r\n  })\r\n  const [bannerList, setBannerList] = useState([])\r\n  const [filters, setFilters] = useState({\r\n    offer: true,\r\n    pathway: true,\r\n    provider: true,\r\n  });\r\n  const {\r\n    provider: providerStore,\r\n    pathway: pathwayStore,\r\n    offer: offerStore,\r\n    datafield: dataFieldStore\r\n  } = useGlobalStore();\r\n\r\n  const [{ data: getPathways }] = useAxios('/pathways?scope=with_files');\r\n\r\n  const [{ data: getOffers }] = useAxios('/offers?scope=with_files');\r\n\r\n  const [{ data: getProviders }] = useAxios('/providers?scope=with_files');\r\n  const [{ data: getDataField }] = useAxios('/datafields?type=topic');\r\n\r\n\r\n\r\n  const [selectedTopicValue, setSelectedTopicValue] = useState([]);\r\n\r\n  const updateData = async (selectedTopicValue) => {\r\n    // console.log(\"-----------\", selectedTopicValue)\r\n    let user_id = selectedTopicValue\r\n    let Data = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/update_topic`, {\r\n      user_id\r\n    })\r\n    return Data\r\n  }\r\n\r\n  const offers = Object.values(offerStore.entities).map((o) => {\r\n    return {\r\n      ...o,\r\n      entity_type: 'offer',\r\n    };\r\n  });\r\n\r\n  const providers = Object.values(providerStore.entities).map((p) => {\r\n    return {\r\n      ...p,\r\n      entity_type: 'provider',\r\n    };\r\n  });\r\n\r\n  const pathways = Object.values(pathwayStore.entities).map((p) => {\r\n    return {\r\n      ...p,\r\n      entity_type: 'pathway',\r\n    };\r\n  });\r\n\r\n  const datafield = Object.values(dataFieldStore.entities).map((p) => {\r\n    return {\r\n      ...p,\r\n      entity_type: 'datafield',\r\n    };\r\n  });\r\n\r\n  const data = [...offers, ...pathways, ...providers];\r\n\r\n  function toggleFilter(key = 'offer') {\r\n    setFilters({\r\n      ...filters,\r\n      [key]: !filters[key],\r\n    });\r\n  }\r\n\r\n  function filterContent() {\r\n    return (\r\n      <div>\r\n        <Row className=\"justify-between mb-1\" gutter={6}>\r\n          <Col>Providers</Col>\r\n          <Col>\r\n            <Switch\r\n              size=\"small\"\r\n              defaultChecked={filters.provider}\r\n              onClick={() => toggleFilter('provider')}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-between mb-1\" gutter={6}>\r\n          <Col>Offers</Col>\r\n          <Col>\r\n            <Switch\r\n              size=\"small\"\r\n              defaultChecked={filters.offer}\r\n              onClick={() => toggleFilter('offer')}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-between\" gutter={6}>\r\n          <Col>Pathways</Col>\r\n          <Col>\r\n            <Switch\r\n              size=\"small\"\r\n              defaultChecked={filters.pathway}\r\n              onClick={() => toggleFilter('pathway')}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleDataSearch = (searchVal) => {\r\n    return setSearchString(searchVal);\r\n  };\r\n\r\n  const handleOnChange = (event) => {\r\n    if (showPromoted) {\r\n      setShowPromoted(false);\r\n    }\r\n    if (event.target.value.length === 0) {\r\n      setShowPromoted(true);\r\n    }\r\n    setSearchString(event.target.value);\r\n  };\r\n\r\n  const handleDataAfterSearch = (data, keys = ['name', 'keywords']) => {\r\n    return matchSorter(data, searchString, { keys });\r\n  };\r\n\r\n  let showData = handleDataAfterSearch(data);\r\n\r\n  if (showPromoted) {\r\n    showData = showData.filter((d) => {\r\n      if (\r\n        filters.offer &&\r\n        d.entity_type === 'offer' &&\r\n        (d.is_main_promo || d.is_local_promo)\r\n      ) {\r\n        return true;\r\n      }\r\n\r\n      if (\r\n        filters.provider &&\r\n        d.entity_type === 'provider' &&\r\n        (d.is_main_promo || d.is_local_promo)\r\n      ) {\r\n        return true;\r\n      }\r\n\r\n      if (\r\n        filters.pathway &&\r\n        d.entity_type === 'pathway' &&\r\n        (d.is_main_promo || d.is_local_promo)\r\n      ) {\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n  } else {\r\n    showData = showData.filter((d) => {\r\n      if (filters.offer && d.entity_type === 'offer') {\r\n        return true;\r\n      }\r\n\r\n      if (filters.provider && d.entity_type === 'provider') {\r\n        return true;\r\n      }\r\n\r\n      if (filters.pathway && d.entity_type === 'pathway') {\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (getPathways) {\r\n      pathwayStore.addMany(getPathways);\r\n    }\r\n    if (getOffers) {\r\n      offerStore.addMany(getOffers);\r\n    }\r\n    if (getProviders) {\r\n      providerStore.addMany(getProviders);\r\n    }\r\n  }, [getPathways, getOffers, getProviders]);\r\n\r\n  const getBannerApi = async () => {\r\n    let token = JSON.parse(localStorage.getItem(\"currentSession\"))\r\n    let user_id = token.id\r\n    let user_role = token.role\r\n    // console.log(\"filesdataaaa\", user_id, user_role)\r\n    let Data = await axios.get(`${process.env.REACT_APP_API_URL}/api/v1/files/get_banner_list/${user_id}/${user_role}`)\r\n    return Data\r\n  }\r\n\r\n  useEffect(() => {\r\n    getBannerApi().then(resp => {\r\n      // console.log(resp, \"resp\")\r\n      // let finaldata = []\r\n      // resp.data.data.map((item,i) => {\r\n      //   let imagedata = item.landing_image\r\n      //   imagedata && imagedata.map(it => {\r\n      //     let parsedata = JSON.parse(it)\r\n      //     finaldata.push(parsedata)\r\n      //   })\r\n      // })\r\n      setBannerList(resp.data.data)\r\n      // console.log(finaldata, \"parssssssssssss\")\r\n    }).catch(error => {\r\n      console.log(error, \"error\")\r\n    })\r\n  }, [])\r\n\r\n  const handleMultipleDropdown = (value) => {\r\n    // console.log('valeue', value)\r\n    setSelectedTopicValue(value)\r\n  }\r\n\r\n  // submit selected option in promotion page\r\n  const submitSelectedTopics = (event) => {\r\n    // console.log('electedTopicValue', selectedTopicValue)\r\n    updateData(selectedTopicValue).then(resp => {\r\n      // console.log(resp, \"reeeeeeeee\")\r\n    }).catch(error => {\r\n      console.log(error, \"errroor\")\r\n    })\r\n\r\n  }\r\n\r\n  const onChangeUpload = (e) => {\r\n    let emailvalue = { ...inputFile, files: e.target.files }\r\n    setInputFile(emailvalue)\r\n    if (e.target.files.length) {\r\n      handleButton(e.target.files)\r\n    }\r\n  }\r\n\r\n  const handleButton = async (files) => {\r\n    // console.log(files)\r\n    await fileDataApi(files).then(async resp => {\r\n      // console.log(resp, \"responssssssssssss\")\r\n      setFileData(resp.data.data)\r\n      // notify(\"success\")\r\n    }).catch(error => {\r\n      console.log(error, \"erorrr\")\r\n    })\r\n  }\r\n\r\n  const fileDataApi = async (inputFile) => {\r\n    let fileData = inputFile\r\n    // console.log(\"filesdataaaa\", fileData)\r\n    const data = new FormData();\r\n    for (const File of fileData) {\r\n      data.append('files', File);\r\n    }\r\n    let pdfData = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/upload_single_file`, data, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n    return pdfData\r\n  }\r\n\r\n  const addFileData = async ({ fileData, inputFile }) => {\r\n    let token = JSON.parse(localStorage.getItem(\"currentSession\"))\r\n    let user_id = token.id\r\n    let user_role = token.role\r\n    let landing_image = fileData\r\n    var prefix = 'http://';\r\n    let image_url = prefix + inputFile.name\r\n    let pdfData = await axios.post(`${process.env.REACT_APP_API_URL}/api/v1/files/add_banner_files`, {\r\n      user_id,\r\n      user_role,\r\n      landing_image,\r\n      image_url\r\n    })\r\n    return pdfData\r\n  }\r\n  const handleSubmit = () => {\r\n    addFileData({ fileData, inputFile }).then(resp => {\r\n      // console.log(resp, \"resssssssssssssss\")\r\n    }).catch(error => {\r\n      console.log(\"error\", error)\r\n    })\r\n  }\r\n\r\n  const handleInput = (e) => {\r\n    let text = { ...inputFile, name: e.target.value }\r\n    setInputFile(text)\r\n  }\r\n\r\n  const handleLink = (text) => {\r\n    // console.log(\"teeeeeeeee\", text)\r\n    window.open(\r\n      `${text.image_url}`);\r\n    // window.location.href = text.image_url;\r\n  }\r\n  // console.log(\"bannerList\", bannerList)\r\n  return (\r\n    <Layout className=\"bg-transparent h-auto\">\r\n      <LogOutTopbar>\r\n        <SearchHeader\r\n          title=\"PROMOTIONS\"\r\n          onSearch={handleDataSearch}\r\n          onChange={handleOnChange}\r\n        >\r\n          <Popover content={filterContent} trigger=\"click\">\r\n            <Button\r\n              className=\"rounded ml-1 px-4 text-center\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n            >\r\n              <FontAwesomeIcon className=\"text-white text-xs\" icon={faFilter} />\r\n            </Button>\r\n          </Popover>\r\n          <Select title=\"Select Title\" showSearch className=\"w-full custom-select ml-1\" mode=\"multiple\" onChange={handleMultipleDropdown}>\r\n            {preloadOptions(getDataField)}\r\n          </Select>\r\n          {\r\n            selectedTopicValue.length ? <Button\r\n              className=\"rounded ml-1 px-4 text-center\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              onClick={submitSelectedTopics}\r\n            >\r\n              Submit\r\n              </Button> : ''\r\n          }\r\n        </SearchHeader>\r\n      </LogOutTopbar>\r\n      <Content className=\"p-6\">\r\n        <TitleDivider\r\n          title=\"My Promotions\"\r\n          styles={{\r\n            leftContainer: {\r\n              backgroundColor: '#4a5568',\r\n            },\r\n            rightContainer: {\r\n              backgroundColor: '#4a5568',\r\n            },\r\n          }}\r\n        />\r\n        <div className=\"shadow-md rounded-md w-full bg-white h-full pt-4 px-5 flex flex-wrap mb-1\">\r\n          {(showData.length &&\r\n            showData\r\n              .filter(function ({\r\n                main_promoted_by_user_ids,\r\n                local_promoted_by_user_ids,\r\n              }) {\r\n                return (\r\n                  main_promoted_by_user_ids.includes(adminId) ||\r\n                  local_promoted_by_user_ids.includes(adminId)\r\n                );\r\n              })\r\n              .map((d, index) => {\r\n                return <PromoteCard key={index} data={d} session={session} />;\r\n              })) || <Empty className=\"m-auto\" />}\r\n        </div>\r\n\r\n        <TitleDivider\r\n          title=\"Other Promotions\t&amp; Search Results\"\r\n          styles={{\r\n            leftContainer: {\r\n              backgroundColor: '#4a5568',\r\n            },\r\n            rightContainer: {\r\n              backgroundColor: '#4a5568',\r\n            },\r\n          }}\r\n        />\r\n        <main className=\"shadow-md rounded-md w-full bg-white h-full pt-4 px-5 flex flex-wrap\">\r\n          {(showData.length &&\r\n            showData.map((d, index) => {\r\n              return <PromoteCard key={index} data={d} session={session} />;\r\n            })) || <Empty className=\"m-auto\" />}\r\n        </main>\r\n\r\n        <TitleDivider\r\n          title=\"Landing Page Image\"\r\n          styles={{\r\n            leftContainer: {\r\n              backgroundColor: '#4a5568',\r\n            },\r\n            rightContainer: {\r\n              backgroundColor: '#4a5568',\r\n            },\r\n          }}\r\n        />\r\n        <Layout className=\"h-auto mb-6 opportunity_choose\">\r\n          <Col className=\"landing_page_image\">\r\n            <p>Landing Page Image</p>\r\n            <div class='file-input'>\r\n              <input multiple type='file' name=\"file\" onChange={(e) => onChangeUpload(e, \"files\")} accept=\"image/*,video/*\" />\r\n              <span class='button'>Choose</span>\r\n              <span class='label' data-js-label><label>{inputFile !== null ? inputFile.files.name : \"Choose File\"}</label></span>\r\n            </div>\r\n            <input className=\"landing_browse\" onChange={(e) => handleInput(e)}></input>\r\n            <div className=\"image_block_opportunity\">\r\n              {/* {fileData && fileData.length > 0 ? fileData.map((item, i) => { */}\r\n              {/* return ( */}\r\n              <img src={fileData.origin} alt={\"\"} />\r\n              {/* }) : null} */}\r\n            </div>\r\n            <div className=\"submit_btn\">\r\n              <button onClick={() => handleSubmit()}>Submit</button>\r\n            </div>\r\n          </Col>\r\n        </Layout>\r\n        <Table\r\n          ref={bannerList}\r\n          // loading={loading}\r\n          pagination={{ pageSize: 8 }}\r\n          dataSource={bannerList}\r\n          bordered\r\n          className=\"ant-table-wrapper--responsive\"\r\n          rowClassName={() => 'antd-row'}\r\n          rowKey=\"id\"\r\n        >\r\n          <Column\r\n            className=\"antd-col\"\r\n            title=\"Image Listing\"\r\n            dataIndex=\"landing_image\"\r\n            key=\"landing_image\"\r\n            render={(text, record) => ({\r\n              children: text,\r\n              props: {\r\n                'landing_image': 'landing_image',\r\n              },\r\n            })}\r\n          />\r\n          <Column\r\n            className=\"antd-col\"\r\n            // title=\"pdf_link\"\r\n            key=\"image_url\"\r\n            render={(text, record, index) => ({\r\n              children: (\r\n                <Button\r\n                  onClick={() => handleLink(text)}\r\n                  title=\"PDF Listing\"\r\n                  dataIndex=\"original\"\r\n                  key=\"image_url\"\r\n                  render={(text, record) => ({\r\n                    children: text,\r\n                    props: {\r\n                      'image_url': 'image_url',\r\n                    },\r\n                  })}\r\n                >click here</Button>\r\n              ),\r\n              props: {\r\n                'image_url': 'image_url',\r\n              },\r\n            })}\r\n          />\r\n        </Table>\r\n      </Content>\r\n    </Layout>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}